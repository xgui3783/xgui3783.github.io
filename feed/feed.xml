<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:base="">
	<title>pandamakes</title>
	<subtitle>web developer, photographer, panda</subtitle>
	<link href="https://pandamakes.me/feed/feed.xml" rel="self"/>
	<link href="https://pandamakes.me/"/>
	<updated>2024-08-14T00:00:00Z</updated>
	<id>https://pandamakes.me/</id>
	<author>
		<name>panda</name>
		<email>panda@pandamakes.me</email>
	</author>
	
	<entry>
		<title>Browser cache is... weird</title>
		<link href="https://pandamakes.me/posts/20240814-browser-cache/"/>
		<updated>2024-08-14T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/20240814-browser-cache/</id>
		<content type="html">&lt;p&gt;Recently, I wanted to introduce &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/ETag&quot;&gt;ETag&lt;/a&gt; as an identifer if new version of a web service is deployed properly. I could use a custom header, but I thought I would be a good boy and use a standard header.&lt;/p&gt;
&lt;p&gt;But of course, in my infinite wisdom, I did not include a &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control&quot;&gt;cache-control&lt;/a&gt; header, and since the resource is fetched with &lt;code&gt;WebWorker&lt;/code&gt;, hard refresh (&lt;code&gt;Shift + F5&lt;/code&gt;) did not work, &lt;code&gt;Disable Cache&lt;/code&gt; in developer tool did not work. What worked was right clicking the specific request in developer panel, and manually click &amp;quot;clear browser cache&amp;quot;.&lt;/p&gt;
&lt;p&gt;Chromium seems to use &lt;code&gt;(current_time - last_modified) / 10&lt;/code&gt; &lt;a href=&quot;https://chromium.googlesource.com/chromium/src/+/refs/tags/127.0.6533.101/net/http/http_response_headers.cc#1250&quot;&gt;ref&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I will now always add &lt;code&gt;cache-control&lt;/code&gt; header. =/&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>FOSDEM2024 day 2</title>
		<link href="https://pandamakes.me/posts/20240407-fosdem-day2/"/>
		<updated>2024-04-07T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/20240407-fosdem-day2/</id>
		<content type="html">&lt;p&gt;As the previous day, all talks I attended are in chronological order. The only difference is, I tried to attend everything remotely... in my hotel room... about 1km away from the venue.&lt;/p&gt;
&lt;p&gt;Also, the event happened on 2024-02-04, so this post is a latergram.&lt;/p&gt;
&lt;p&gt;There will be a third post in this series, in which I will talk about my experience.&lt;/p&gt;
&lt;h2 id=&quot;testing-and-cd-streamline-dx&quot; tabindex=&quot;-1&quot;&gt;Testing &amp;amp; CD: Streamline DX &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/20240407-fosdem-day2/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://fosdem.org/2024/schedule/event/fosdem-2024-2964-streamlining-developer-experience-the-power-of-ci-cd-standardization-and-interoperability/&quot;&gt;abstract&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;It might seem obvious, but standardization of CI/CD and docs improves onboarding.&lt;/p&gt;
&lt;h2 id=&quot;doc-maintenance&quot; tabindex=&quot;-1&quot;&gt;Doc maintenance &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/20240407-fosdem-day2/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://fosdem.org/2024/schedule/event/fosdem-2024-2523-mind-the-gap-building-a-cultural-commitment-to-documentation-maintenance/&quot;&gt;abstract&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Linting the doc. Check when the code is updated, to ensure that the doc is also updated.&lt;/p&gt;
&lt;p&gt;Being responsive to first time contributors.&lt;/p&gt;
&lt;p&gt;Veil Lint (???)&lt;/p&gt;
&lt;h2 id=&quot;lazy-developer&quot; tabindex=&quot;-1&quot;&gt;Lazy developer &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/20240407-fosdem-day2/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://fosdem.org/2024/schedule/event/fosdem-2024-2231-a-lazy-developer-s-approach-to-building-real-time-web-applications/&quot;&gt;abstract&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Interesting demo of public karaoke. Also learnt about &lt;a href=&quot;https://www.cncf.io/projects/nats/&quot;&gt;CNCF: NATS&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;phabricator&quot; tabindex=&quot;-1&quot;&gt;Phabricator &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/20240407-fosdem-day2/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://fosdem.org/2024/schedule/event/fosdem-2024-3610-unpack-phabricator-welcome-phorge-forking-the-opinionated-open-source-project-manager/&quot;&gt;abstract&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;An interesting approach to source code version management. Issues are not bound to projects, but all pooled together. They are categorised by labels. This is something I can get behind, honestly.&lt;/p&gt;
&lt;p&gt;It also supports mercurial, svn, in addition to git.&lt;/p&gt;
&lt;p&gt;It&#39;s php based, and he&#39;s not joking about &lt;a href=&quot;https://about.gitlab.com/blog/2021/08/13/five-great-phabricator-features-inspired-gitlab/&quot;&gt;gitlab taking inspiration from phabricator&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;observability-common-schema&quot; tabindex=&quot;-1&quot;&gt;Observability common schema &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/20240407-fosdem-day2/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://fosdem.org/2024/schedule/event/fosdem-2024-1734-unifying-observability-the-power-of-a-common-schema/&quot;&gt;abstract&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Since I am quite new to the whole observability, metrics, monitoring world, I was only briefly aware of the competing standards. My understanding is that, opentelemetry is the effort to create a common standard. To accomplish this goal, it is likely that some conventions may need to be deprecated.&lt;/p&gt;
&lt;p&gt;Another remark, OTLP (open telemetry language protocol ?), describes &lt;code&gt;resource&lt;/code&gt; and &lt;code&gt;LogRecord&lt;/code&gt; (or as I understand, payload), is very reminiscent on how k8s organise resources.&lt;/p&gt;
&lt;h2 id=&quot;owncloud-infinite-scale&quot; tabindex=&quot;-1&quot;&gt;Owncloud infinite scale &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/20240407-fosdem-day2/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://fosdem.org/2024/schedule/event/fosdem-2024-2415-how-to-build-an-open-source-school-cloud-for-5-million-users/&quot;&gt;abstract&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Provide cloud storage &amp;amp; cloud office solution to all secondary students in Germany. Uneven load is definiitely going to be an issue (e.g. at 8am CET, server load will spike, but overnight, load will be little/none)&lt;/p&gt;
&lt;p&gt;I have also learnt the difference between owncloud 10 (single installation) and owncloud infinite scale (cloud native) (I think?)&lt;/p&gt;
&lt;h2 id=&quot;so-you-think-you-know-git&quot; tabindex=&quot;-1&quot;&gt;So you think you know git &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/20240407-fosdem-day2/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://fosdem.org/2024/schedule/event/fosdem-2024-3611-so-you-think-you-know-git/&quot;&gt;abstract&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Easily the most entertaining, and most educational talk of the day (or the entire event). A list of thing I learnt:&lt;/p&gt;
&lt;pre class=&quot;language-sh&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-sh&quot;&gt;- &lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; blame/git log &lt;span class=&quot;token punctuation&quot;&gt;&#92;&lt;/span&gt;
    &lt;span class=&quot;token parameter variable&quot;&gt;-L&lt;/span&gt; start:end path/to/file.txt &lt;span class=&quot;token punctuation&quot;&gt;&#92;&lt;/span&gt;
    &lt;span class=&quot;token parameter variable&quot;&gt;-w&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;ignore whitespace&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&#92;&lt;/span&gt;
    &lt;span class=&quot;token parameter variable&quot;&gt;-C&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;detect movement&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-C&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-C&lt;/span&gt;
- &lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;diff&lt;/span&gt; --word-diff
- &lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; rerere.enabled - remembers how conflict resolution
- &lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; branch &lt;span class=&quot;token parameter variable&quot;&gt;--column&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;--sort&lt;/span&gt;
- &lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; push --force-with-lease
- commit with &lt;span class=&quot;token function&quot;&gt;ssh&lt;/span&gt;
- &lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; maintenance start
- &lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; sparse-checkout
- &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;github&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; ls-remote, PRs are refs&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;closing-session&quot; tabindex=&quot;-1&quot;&gt;Closing session &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/20240407-fosdem-day2/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://fosdem.org/2024/schedule/event/fosdem-2024-3024-closing-fosdem-2024/&quot;&gt;abstract&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Also learnt a lot in this session regarding the technical challenges associated with running a conference with multiple tracks, all need their own video streaming, in particular:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;the ease of operating the system (since technical volunteers needs to be trained with least amount of effort)&lt;/li&gt;
&lt;li&gt;upload throughput (lots of parallel uploads)&lt;/li&gt;
&lt;li&gt;monitoring of potential issues (audio? visual?)&lt;/li&gt;
&lt;li&gt;plan B&#39;s (blackout? slides/ not working etc)&lt;/li&gt;
&lt;li&gt;setup &amp;amp; tear down&lt;/li&gt;
&lt;/ul&gt;
</content>
	</entry>
	
	<entry>
		<title>FOSDEM2024 day 1</title>
		<link href="https://pandamakes.me/posts/20240207-fosdem-day1/"/>
		<updated>2024-02-07T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/20240207-fosdem-day1/</id>
		<content type="html">&lt;p&gt;On 2024, I went to &lt;a href=&quot;https://fosdem.org/&quot;&gt;fosdem&lt;/a&gt; for the first time.&lt;/p&gt;
&lt;p&gt;This post and next post will be an objective recount (or as much as possible), of the sessions I visited, and my take aways from each of the sessions. I also intend to make a &amp;quot;after thought&amp;quot; post, discussing the meta issues.&lt;/p&gt;
&lt;p&gt;Entries are arranged in chronological order.&lt;/p&gt;
&lt;h2 id=&quot;open-research-bridging-research-and-open-source-the-genesis-of-gephi-lite&quot; tabindex=&quot;-1&quot;&gt;Open Research: Bridging Research and Open Source: the genesis of Gephi Lite &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/20240207-fosdem-day1/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://fosdem.org/2024/schedule/event/fosdem-2024-3253-bridging-research-and-open-source-the-genesis-of-gephi-lite/&quot;&gt;abstract&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I had initially hoped this session would discuss or push for open standards for plotting/graphing. I was disappointed to find that this was more for porting graphing functionality of &lt;a href=&quot;https://gephi.org/&quot;&gt;Gephi (desktop application)&lt;/a&gt; to the web.&lt;/p&gt;
&lt;h2 id=&quot;javascript-your-web-app-is-taking-up-too-much-ram-let-s-fix-it&quot; tabindex=&quot;-1&quot;&gt;Javascript: Your web app is taking up too much RAM. Let&#39;s fix it! &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/20240207-fosdem-day1/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://fosdem.org/2024/schedule/event/fosdem-2024-2722-your-web-app-is-taking-up-too-much-ram-let-s-fix-it-/&quot;&gt;abstract&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I had moderate expectation to learn something from this session, to learn something new about profiling web applications. It did not disappoint.&lt;/p&gt;
&lt;p&gt;I was already aware of the memory profiler in chrome dev tool, which allow snapshot of heap to be captured and profiled. I was not aware that the memory profiler can be used to profile on a temporal axis (i.e., start recording, do action, stop recording, see all calls to allocate memory).&lt;/p&gt;
&lt;p&gt;I also learnt about &lt;a href=&quot;https://github.com/facebook/memlab&quot;&gt;facebook/memlab&lt;/a&gt; and &lt;a href=&quot;https://clinicjs.org/flame/&quot;&gt;clinicjs&lt;/a&gt;. They may be for nodejs applications only, but since chrome devtool allow exporting of the profile result, they can potentially be used to visualize and debug frontend.&lt;/p&gt;
&lt;h2 id=&quot;javascript-recycle-reuse-rebuild-transformative-tactics-for-turning-your-brownfields-green&quot; tabindex=&quot;-1&quot;&gt;Javascript: Recycle, Reuse, Rebuild: Transformative Tactics for Turning your Brownfields Green &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/20240207-fosdem-day1/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://fosdem.org/2024/schedule/event/fosdem-2024-3289-recycle-reuse-rebuild-transformative-tactics-for-turning-your-brownfields-green/&quot;&gt;abstract&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Frankly, I stayed because I wanted to see the next session. I had zero expectation.&lt;/p&gt;
&lt;p&gt;Convert strongly coupled to loosely coupled. But otherwise, I ... don&#39;t know if I learnt anything else?&lt;/p&gt;
&lt;h2 id=&quot;javascript-unraveling-javascript-s-heart-mastering-the-event-loop-for-peak-performance&quot; tabindex=&quot;-1&quot;&gt;Javascript: Unraveling JavaScript&#39;s Heart: Mastering the Event Loop for Peak Performance &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/20240207-fosdem-day1/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://fosdem.org/2024/schedule/event/fosdem-2024-2890-unraveling-javascript-s-heart-mastering-the-event-loop-for-peak-performance/&quot;&gt;abstract&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I thought I had learnt a lot from Jake Archibald&#39;s &lt;a href=&quot;https://www.youtube.com/watch?v=cCOL7MC4Pl0&amp;amp;vl=en&quot;&gt;talk&lt;/a&gt; on event loop, and was curious as to what else I can learn. I was pleasant surprised to find that, there is &lt;em&gt;always&lt;/em&gt; more to learn.&lt;/p&gt;
&lt;p&gt;The talk focused mainly on async operations (e.g. Promise, async-await, callback), and how they could still block the main thread, if you are not careful. Since I exclusively used async ops for io-bound task (file read/write, network, etc), I was ready to believe that async tasks would not block the main thread. The speaker used bcrypt to illustrate that CPU bound tasks, even if they are delegated to async operation, could still block the main thread.&lt;/p&gt;
&lt;p&gt;Takeaway: For CPU-bound tasks, use workers.&lt;/p&gt;
&lt;p&gt;(extra: I wonder how/if this also affects EventLoop implementation in python)&lt;/p&gt;
&lt;h2 id=&quot;open-research-the-french-open-science-monitor-steering-the-science-based-on-open-bibliographic-databases&quot; tabindex=&quot;-1&quot;&gt;Open Research: The French Open Science Monitor: steering the science based on open bibliographic databases &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/20240207-fosdem-day1/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://fosdem.org/2024/schedule/event/fosdem-2024-3185-the-french-open-science-monitor-steering-the-science-based-on-open-bibliographic-databases/&quot;&gt;abstract&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I wanted to join the next session, and I had some time to kill, so I decided to join this session, too. I did not expect to learn anything. But of course, there is &lt;em&gt;always&lt;/em&gt; something to be learnt.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://unpaywall.org&quot;&gt;https://unpaywall.org&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Grobid &lt;a href=&quot;https://github.com/kermitt2/grobid&quot;&gt;github&lt;/a&gt; &lt;a href=&quot;https://grobid.readthedocs.io/en/latest/Introduction/&quot;&gt;rtd&lt;/a&gt;: use ML (?) to generate metadata from PDF&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://open.coki.ac&quot;&gt;https://open.coki.ac&lt;/a&gt; Curtin Open Knowledge Initiative&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://openalex.org/&quot;&gt;https://openalex.org/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://hal.science/&quot;&gt;https://hal.science/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;open-research-infra-finder-increasing-visibility-of-open-technologies-for-open-science&quot; tabindex=&quot;-1&quot;&gt;Open Research: Infra Finder: Increasing visibility of open technologies for open science &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/20240207-fosdem-day1/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://fosdem.org/2024/schedule/event/fosdem-2024-3436-infra-finder-increasing-visibility-of-open-technologies-for-open-science/&quot;&gt;abstract&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I guess a similar initiative to &lt;a href=&quot;https://helmholtz.software/&quot;&gt;https://helmholtz.software/&lt;/a&gt;, but for infrastructure? I am not sure. There was nothing I could test etc.&lt;/p&gt;
&lt;p&gt;One of the takeaways from this talk, is that, people who makes the decision regarding infrastructure has different concern/technical know how. It might be necessary to have a different set of criteria when speak to such steakholders&lt;/p&gt;
&lt;h2 id=&quot;open-research-best-practices-for-research-in-open-source-ecosystems&quot; tabindex=&quot;-1&quot;&gt;Open Research: Best practices for research in open source ecosystems &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/20240207-fosdem-day1/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://fosdem.org/2024/schedule/event/fosdem-2024-2405-best-practices-for-research-in-open-source-ecosystems/&quot;&gt;abstract&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;open-research-phaidra-a-repository-where-research-data-goes-to-live-not-to-die&quot; tabindex=&quot;-1&quot;&gt;Open Research: PHAIDRA - A Repository Where Research Data Goes to Live (Not to Die). &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/20240207-fosdem-day1/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://fosdem.org/2024/schedule/event/fosdem-2024-3447-phaidra-a-repository-where-research-data-goes-to-live-not-to-die-/&quot;&gt;abstract&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I have some interest in RDM. We learnt a little about the history of PHAIDRA, but little to no technical detail. The presenter also mentioned that large data (multi GB/TB) is not currently covered.&lt;/p&gt;
&lt;h2 id=&quot;open-research-updating-open-data-standards&quot; tabindex=&quot;-1&quot;&gt;Open Research: Updating open data standards &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/20240207-fosdem-day1/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://fosdem.org/2024/schedule/event/fosdem-2024-3109-updating-open-data-standards/&quot;&gt;abstract&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The main reason why I was in open research dev room to begin with. I wanted to learn about open data standards. This talk gave me some idea on in jobby job.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>k8s secret shinanigans</title>
		<link href="https://pandamakes.me/posts/20231225-k8s-secret-shinanigans/"/>
		<updated>2023-12-25T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/20231225-k8s-secret-shinanigans/</id>
		<content type="html">&lt;blockquote&gt;
&lt;p&gt;*checks dates* So... took a while to write this one? I am going to chalk it to being busy at my jobby job.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;According to the &lt;a href=&quot;https://kubernetes.io/docs/reference/kubernetes-api/config-and-storage-resources/secret-v1/#Secret&quot;&gt;official documentation&lt;/a&gt;, k8s secrets needs to be base64 encoded.&lt;/p&gt;
&lt;p&gt;So below is a no no:&lt;/p&gt;
&lt;pre class=&quot;language-yaml&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# do **NOT** do this!&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; v1
&lt;span class=&quot;token key atrule&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Secret
&lt;span class=&quot;token key atrule&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; my&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;secret
&lt;span class=&quot;token key atrule&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Opaque
&lt;span class=&quot;token key atrule&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;FAV_FOOD&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; PIE&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Of course, linux comes with &lt;code&gt;base64&lt;/code&gt; utilities, and if you do:&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;pie&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; base64 &lt;span class=&quot;token comment&quot;&gt;# prints cGllCg==&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;... and tried ...&lt;/p&gt;
&lt;pre class=&quot;language-yaml&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# do **NOT** do this!&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; v1
&lt;span class=&quot;token key atrule&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Secret
&lt;span class=&quot;token key atrule&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; my&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;secret
&lt;span class=&quot;token key atrule&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Opaque
&lt;span class=&quot;token key atrule&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;FAV_FOOD&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; cGllCg==&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You might be in for a rude awakening, too, since this includes a new line character.&lt;/p&gt;
&lt;p&gt;Lastly, I tried ...&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;token parameter variable&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;pie&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; base64 &lt;span class=&quot;token comment&quot;&gt;# prints cGll&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;So ...&lt;/p&gt;
&lt;pre class=&quot;language-yaml&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; v1
&lt;span class=&quot;token key atrule&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Secret
&lt;span class=&quot;token key atrule&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; my&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;secret
&lt;span class=&quot;token key atrule&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Opaque
&lt;span class=&quot;token key atrule&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;FAV_FOOD&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; cGll&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;... should work.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Bitshift chaos in JS &amp; Python</title>
		<link href="https://pandamakes.me/posts/20220730-bit-shift-js-python/"/>
		<updated>2022-07-30T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/20220730-bit-shift-js-python/</id>
		<content type="html">&lt;p&gt;Preface: work&#39;s been rather busy lately. Even though I constantly add blog ideas, I have not had the chance to properly materialise them into blogs proper. This post originated late last year.&lt;/p&gt;
&lt;p&gt;I needed to do do some quick hashing of string into hex characters, with the following requirements/limitations:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;input is string with length ~ 50 characters&lt;/li&gt;
&lt;li&gt;output is unique hex (given input), shorter the better (perhaps 6 length?)&lt;/li&gt;
&lt;li&gt;needs to be implemented in browser javascript, without additional libraries (md5/sha libraries are available plenty)&lt;/li&gt;
&lt;li&gt;users do &lt;strong&gt;not&lt;/strong&gt; control inputs, and ...&lt;/li&gt;
&lt;li&gt;...does &lt;strong&gt;not&lt;/strong&gt; matter if the hash is reversible, so security is not essential&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I considered reimplementing md5, in the application, but the complexity it introduces seems to outweight the benefit.&lt;/p&gt;
&lt;p&gt;So I came across this &lt;a href=&quot;https://stackoverflow.com/a/7616484/6059235&quot;&gt;SO post&lt;/a&gt;, and implemented it, and everything seems fine... Until I needed to implement the same hash function in python.&lt;/p&gt;
&lt;p&gt;Bitwise operator in python is actually exactly the same symbol as that in JS, &lt;code&gt;&amp;lt;&amp;lt;&lt;/code&gt; and &lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt;. Just double checking, I did some quick REPL in JS vs python, and they seem to return the same results.&lt;/p&gt;
&lt;pre class=&quot;language-js&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// return 4&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// returns 10240&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;and in python:&lt;/p&gt;
&lt;pre class=&quot;language-python&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# returns 4&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# returns 10240&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;So I naively thought I just had to reimplement the entire function in python. I was wrong. And I had to learn this the hard way.&lt;/p&gt;
&lt;p&gt;In JS, bitwise operation are carried out in int32, but python will use however many additional bits required to represent the number. This means, bitwise operation in JS will overflow (which is fine), bitwise operation in python will not overflow, but simply consume more memory. This also means, if the number gets too large, python and JS bitwise operation will diverse, if one is not careful:&lt;/p&gt;
&lt;p&gt;In JS:&lt;/p&gt;
&lt;pre class=&quot;language-js&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 1073741824&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;31&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// -2147483648&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;32&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 1&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;In python:&lt;/p&gt;
&lt;pre class=&quot;language-python&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 1073741824&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;31&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 2147483648&lt;/span&gt;
&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;32&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 4294967296&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The way I dealt with the problem is by casting the result to int32 (since numpy is already a dependency):&lt;/p&gt;
&lt;pre class=&quot;language-python&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; numpy &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; int32
int32&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 1073741824&lt;/span&gt;
int32&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;31&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# -2147483648&lt;/span&gt;
int32&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;# 0&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;PS.&lt;/p&gt;
&lt;p&gt;1/ As I write this, I just noticed the edge case of &lt;code&gt;1 &amp;lt;&amp;lt; 32&lt;/code&gt;, and it appears that it has been asked and &lt;a href=&quot;https://stackoverflow.com/a/57660143/6059235&quot;&gt;answered&lt;/a&gt; before. The hashing code does not use &lt;code&gt;&amp;lt;&amp;lt; 32&lt;/code&gt;, so perhaps I am ... still safe? Programming is weird.&lt;/p&gt;
&lt;p&gt;2/ As I am writing this, I noticed the second &lt;a href=&quot;https://stackoverflow.com/a/52171480/6059235&quot;&gt;highest voted answer&lt;/a&gt; on the hashing question, make use of &lt;code&gt;Math.imul&lt;/code&gt;, which is something I did not know existed. The hashing function has been in production for sometime now, and unfortunately cannot be swapped out, but I will keep what I learnt in mind.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Disabling (some) zonejs in Angular app</title>
		<link href="https://pandamakes.me/posts/20211026-disabling-zonejs-angular/"/>
		<updated>2021-10-26T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/20211026-disabling-zonejs-angular/</id>
		<content type="html">&lt;p&gt;Profiling is so fun.&lt;/p&gt;
&lt;p&gt;I noticed that a component is running significantly slower in angular than in vanilla JS. I had some spare time, and did some profiling.&lt;/p&gt;
&lt;p&gt;The component did have a lot of interactivity (via &lt;code&gt;Element.addEventListener&lt;/code&gt; and &lt;code&gt;requestAnimationFrame&lt;/code&gt;). I noticed that there were a lot of calls to &lt;code&gt;globalZone&lt;/code&gt;, and alot of unnecessary &lt;code&gt;delegate&lt;/code&gt; calls. (each raf call. )&lt;/p&gt;
&lt;p&gt;Normally reactivity is nice. It simplifies product development cycle and boosts productivity. In this case, however, it is unnecessarily punishing performance.&lt;/p&gt;
&lt;p&gt;Intially, I wondered if I could call the component with a special set of globals, something like&lt;/p&gt;
&lt;pre class=&quot;language-js&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;
&lt;span class=&quot;token comment&quot;&gt;// before zone.js patch the hell out of native raf&lt;/span&gt;

window&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&#39;originalRAF&#39;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; window&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&#39;requestAnimationFrame&#39;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&#39;zone.js&#39;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;//...&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MyHero&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;OnInit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;ngOnInit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; proxyCreateMyComponent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createMyComponent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;bind&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;window&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token literal-property property&quot;&gt;requestAnimationFrame&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; window&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&#39;originalRAF&#39;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;proxyCreateMyComponent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&#39;#comp-id&#39;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I did some digging, and some source code divining, and it seems, for the time being, the solution is actually much simpler:&lt;/p&gt;
&lt;pre class=&quot;language-js&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;
&lt;span class=&quot;token comment&quot;&gt;// disables patches to raf altogether&lt;/span&gt;

window&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&#39;__Zone_disable_requestAnimationFrame&#39;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&#39;zone.js&#39;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Hopefully... the angular team doesn&#39;t change this, eh?&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Python ABC WTF</title>
		<link href="https://pandamakes.me/posts/20211022-python-abc-wtf/"/>
		<updated>2021-10-22T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/20211022-python-abc-wtf/</id>
		<content type="html">&lt;p&gt;I was playing with some python code recently, and something... kind of caught me offguard. (Well, more like I misunderstood how the API works). Consider the following:&lt;/p&gt;
&lt;pre class=&quot;language-python&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; abc &lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; ABC
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MyAbCls&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ABC&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;pass&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MyRealCls&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;MyAbCls&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;pass&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AnotherMyRealCls&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;MyRealCls&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;pass&lt;/span&gt;

my_real_in&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;MyRealCls&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
another_real_in&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;AnotherMyRealCls&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;When confronted with &lt;code&gt;issubclass&lt;/code&gt;, my immediate expectation on how it should work is:&lt;/p&gt;
&lt;pre class=&quot;language-python&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;# RETURNS FALSE!&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;issubclass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;my_real_in&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; MyAbCls&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then it hit me. &lt;code&gt;issubclass&lt;/code&gt; expects classes as arguments. I should have been using &lt;code&gt;isinstance&lt;/code&gt; instead. e.g.:&lt;/p&gt;
&lt;pre class=&quot;language-python&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-python&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;isinstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;my_real_in&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; MyAbCls&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;isinstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;another_real_in&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; MyRealCls&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;isinstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;another_real_in&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; MyAbCls&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;issubclass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token builtin&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;my_real_in&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; MyAbCls&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
</content>
	</entry>
	
	<entry>
		<title>Updating openssl certificates</title>
		<link href="https://pandamakes.me/posts/2021-09-28-openssl/"/>
		<updated>2021-09-28T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/2021-09-28-openssl/</id>
		<content type="html">&lt;p&gt;Awhile ago, my &lt;code&gt;curl&lt;/code&gt; suddenly stopped working, citing:&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;unable to get &lt;span class=&quot;token builtin class-name&quot;&gt;local&lt;/span&gt; issuer certificate&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;After a bit of digging, it seems that &lt;code&gt;openssl&lt;/code&gt; cannot accurately resolve some ssl certificates (especially, perhaps exclusively let&#39;s encrypt certs).&lt;/p&gt;
&lt;p&gt;I on-and-off tried to resolve the issue, but didn&#39;t realise the issue is easily resolved with&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;&lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; update-ca-certificates &lt;span class=&quot;token parameter variable&quot;&gt;--fresh&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
</content>
	</entry>
	
	<entry>
		<title>Array.prototype.sort reversed for Chrome vs FF</title>
		<link href="https://pandamakes.me/posts/2021-08-04-js-array-sort/"/>
		<updated>2021-08-04T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/2021-08-04-js-array-sort/</id>
		<content type="html">&lt;p&gt;Erm, so this certainly has been a long time.&lt;/p&gt;
&lt;p&gt;Anyway, I was working with &lt;code&gt;Array.prototype.sort&lt;/code&gt; function, and produced the following code:&lt;/p&gt;
&lt;pre class=&quot;language-js&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;array&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;a&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;order &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;order &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;My intention is to sort the array if a.order is defined. Otherwise, use the original order.&lt;/p&gt;
&lt;p&gt;This produced reversed order for chrome vs FF.&lt;/p&gt;
&lt;p&gt;Reading &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort&quot;&gt;MDN&lt;/a&gt;, and specifically:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;compareFunction(a, b) must always return the same value when given a specific pair of elements a and b as its two arguments. If inconsistent results are returned, then the sort order is undefined.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Guess browsers have freedom on how they operate on the array, and no necessarily (exclusively) from the 0th element.&lt;/p&gt;
&lt;p&gt;Turns out, if the return value is 0, the original order is preserved. i.e.:&lt;/p&gt;
&lt;pre class=&quot;language-js&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;array&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;a&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;order &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;b&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;order &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;would work the way I intended it to.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Persisting (nodejs) express process</title>
		<link href="https://pandamakes.me/posts/2020-10-06-persisting-node-express-process/"/>
		<updated>2020-10-06T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/2020-10-06-persisting-node-express-process/</id>
		<content type="html">&lt;p&gt;I was running a test just today, and&lt;/p&gt;
&lt;p&gt;I should be no stranger to builds breaking all of a sudden.&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;ERROR &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; node_modules/@types/node/ts3.4/globals.global.d.ts:1:13 - error TS2403: Subsequent variable declarations must have the same type.  Variable &lt;span class=&quot;token string&quot;&gt;&#39;global&#39;&lt;/span&gt; must be of &lt;span class=&quot;token builtin class-name&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&#39;Global&#39;&lt;/span&gt;, but here has &lt;span class=&quot;token builtin class-name&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&#39;Global &amp;amp; typeof globalThis&#39;&lt;/span&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt;

&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;declare&lt;/span&gt; var global: NodeJS.Global &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; typeof globalThis&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
              ~~~~~~

  node_modules/zone.js/dist/zone.js.d.ts:600:13
    &lt;span class=&quot;token number&quot;&gt;600&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;declare&lt;/span&gt; var global: NodeJS.Global&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                    ~~~~~~
    &lt;span class=&quot;token string&quot;&gt;&#39;global&#39;&lt;/span&gt; was also declared here.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It seems the bug was introduced by&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/pull/43308&quot;&gt;https://github.com/DefinitelyTyped/DefinitelyTyped/pull/43308&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/pull/44700/commits&quot;&gt;https://github.com/DefinitelyTyped/DefinitelyTyped/pull/44700/commits&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/pull/41491&quot;&gt;https://github.com/DefinitelyTyped/DefinitelyTyped/pull/41491&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;My (temporary) solution was to pin &lt;code&gt;@types/node&lt;/code&gt; version to &lt;code&gt;12.12.39&lt;/code&gt;&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>CSS priorities</title>
		<link href="https://pandamakes.me/posts/20200708-css-rules/"/>
		<updated>2020-07-08T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/20200708-css-rules/</id>
		<content type="html">&lt;p&gt;I had an interesting scenario today where I had to apply a local modified theme, in addition to a global theme. By scss setup looks like:&lt;/p&gt;
&lt;pre class=&quot;language-scss&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-scss&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;@import&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&#39;~@angular/material/theming&#39;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;@include&lt;/span&gt;  &lt;span class=&quot;token function&quot;&gt;mat-core&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;@mixin&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;custom-cmp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

  &lt;span class=&quot;token property&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$foreground&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;map-get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; foreground&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token property&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$primary&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;map-get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; primary&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$accent&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;map-get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; accent&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$warn&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;map-get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; warn&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token selector&quot;&gt;[my-custom-comp],
  .my-custom-comp
  &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token selector&quot;&gt;&lt;span class=&quot;token parent important&quot;&gt;&amp;amp;&lt;/span&gt;[text],
    &lt;span class=&quot;token parent important&quot;&gt;&amp;amp;&lt;/span&gt;.text
    &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mat-color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$foreground&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; text&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token selector&quot;&gt;&lt;span class=&quot;token parent important&quot;&gt;&amp;amp;&lt;/span&gt;[primary],
    &lt;span class=&quot;token parent important&quot;&gt;&amp;amp;&lt;/span&gt;.primary
    &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mat-color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$primary&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token selector&quot;&gt;&lt;span class=&quot;token parent important&quot;&gt;&amp;amp;&lt;/span&gt;[accent],
    &lt;span class=&quot;token parent important&quot;&gt;&amp;amp;&lt;/span&gt;.accent
    &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mat-color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$accent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token selector&quot;&gt;&lt;span class=&quot;token parent important&quot;&gt;&amp;amp;&lt;/span&gt;[warn],
    &lt;span class=&quot;token parent important&quot;&gt;&amp;amp;&lt;/span&gt;.warn
    &lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mat-color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$warn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token property&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$my-theme-primary&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mat-palette&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$mat-indigo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token property&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$my-theme-accent&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mat-palette&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$mat-amber&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token property&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$my-theme-warn&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mat-palette&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$mat-red&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token property&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$my-theme&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mat-light-theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$my-theme-primary&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$my-theme-accent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$my-theme-warn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;@include&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;angular-material-theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$my-theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;@include&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;custom-cmp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$my-theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token property&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$my-dark-theme-primary&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;mat-palette&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$mat-blue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token property&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$my-dark-theme-accent&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;token function&quot;&gt;mat-palette&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$mat-amber&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; A200&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; A100&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; A400&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token property&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$my-dark-theme-warn&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;    &lt;span class=&quot;token function&quot;&gt;mat-palette&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$mat-red&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token property&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$my-dark-theme&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;   &lt;span class=&quot;token function&quot;&gt;mat-dark-theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$my-dark-theme-primary&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$my-dark-theme-accent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token variable&quot;&gt;$my-dark-theme-warn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token selector&quot;&gt;[darktheme=true]
&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;@include&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;angular-material-theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$my-dark-theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;@include&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;custom-cmp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$iv-dark-theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token selector&quot;&gt;[darktheme=false]
&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;@include&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;angular-material-theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$iv-theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;@include&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;custom-cmp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$iv-theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;... and the top level &lt;code&gt;darktheme&lt;/code&gt; attribute is used to control the global theming.&lt;/p&gt;
&lt;h2 id=&quot;use-important&quot; tabindex=&quot;-1&quot;&gt;Use &lt;code&gt;!important&lt;/code&gt; &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/20200708-css-rules/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;I did not want to use &lt;code&gt;!important&lt;/code&gt; unless absolutely necessary (also, I couldn&#39;t get the syntax to work in the 10 minutes I was trying it).&lt;/p&gt;
&lt;h2 id=&quot;use-class&quot; tabindex=&quot;-1&quot;&gt;Use class &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/20200708-css-rules/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;My next attempt was to add higher level css priority to the local component. &lt;a href=&quot;https://stackoverflow.com/a/22214407/6059235&quot;&gt;This SO post&lt;/a&gt; seems to suggest that the css priority goes by:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ID &amp;gt; class &amp;gt; attribute
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;My attempt was to add:&lt;/p&gt;
&lt;pre class=&quot;language-scss&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-scss&quot;&gt;
[darktheme=&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;]&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
.darktheme &lt;span class=&quot;token comment&quot;&gt;// &amp;lt;-- added&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;@include&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;angular-material-theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$my-dark-theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;@include&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;custom-cmp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$iv-dark-theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

[darktheme=&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;]&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
.lighttheme &lt;span class=&quot;token comment&quot;&gt;// &amp;lt;-- added&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;@include&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;angular-material-theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$iv-theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;@include&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;custom-cmp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$iv-theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It did not seem to work. Later parsed CSS attributes were taking precedent, suggesting class and attribute have the same priority (at least in Chrome Version 83.0.4103.116 (Official Build) (64-bit))&lt;/p&gt;
&lt;h2 id=&quot;further-increase-css-priority&quot; tabindex=&quot;-1&quot;&gt;Further increase CSS priority &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/20200708-css-rules/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Then, I remembered a trick to artificially boost the priority&lt;/p&gt;
&lt;pre class=&quot;language-scss&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-scss&quot;&gt;
&lt;span class=&quot;token selector&quot;&gt;[darktheme=true],
.darktheme.darktheme
&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;@include&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;angular-material-theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$my-dark-theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;@include&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;custom-cmp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$iv-dark-theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token selector&quot;&gt;[darktheme=false],
.lighttheme.lighttheme
&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;@include&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;angular-material-theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$iv-theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;@include&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;custom-cmp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token variable&quot;&gt;$iv-theme&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note to self: should investigate CSS priority.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Angular 9 AOT build suddenly breaks</title>
		<link href="https://pandamakes.me/posts/2020-05-27-angular-aot-build-suddenly-breaks/"/>
		<updated>2020-05-27T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/2020-05-27-angular-aot-build-suddenly-breaks/</id>
		<content type="html">&lt;p&gt;I should be no stranger to builds breaking all of a sudden.&lt;/p&gt;
&lt;pre class=&quot;language-bash&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;ERROR &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; node_modules/@types/node/ts3.4/globals.global.d.ts:1:13 - error TS2403: Subsequent variable declarations must have the same type.  Variable &lt;span class=&quot;token string&quot;&gt;&#39;global&#39;&lt;/span&gt; must be of &lt;span class=&quot;token builtin class-name&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&#39;Global&#39;&lt;/span&gt;, but here has &lt;span class=&quot;token builtin class-name&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&#39;Global &amp;amp; typeof globalThis&#39;&lt;/span&gt;&lt;span class=&quot;token builtin class-name&quot;&gt;.&lt;/span&gt;

&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;declare&lt;/span&gt; var global: NodeJS.Global &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&lt;/span&gt; typeof globalThis&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
              ~~~~~~

  node_modules/zone.js/dist/zone.js.d.ts:600:13
    &lt;span class=&quot;token number&quot;&gt;600&lt;/span&gt; &lt;span class=&quot;token builtin class-name&quot;&gt;declare&lt;/span&gt; var global: NodeJS.Global&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                    ~~~~~~
    &lt;span class=&quot;token string&quot;&gt;&#39;global&#39;&lt;/span&gt; was also declared here.&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It seems the bug was introduced by&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/pull/43308&quot;&gt;https://github.com/DefinitelyTyped/DefinitelyTyped/pull/43308&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/pull/44700/commits&quot;&gt;https://github.com/DefinitelyTyped/DefinitelyTyped/pull/44700/commits&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/DefinitelyTyped/DefinitelyTyped/pull/41491&quot;&gt;https://github.com/DefinitelyTyped/DefinitelyTyped/pull/41491&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;My (temporary) solution was to pin &lt;code&gt;@types/node&lt;/code&gt; version to &lt;code&gt;12.12.39&lt;/code&gt;&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Angular 9 - webpack AOT build - CSP woes</title>
		<link href="https://pandamakes.me/posts/2020-05-07-angular-9-aot-build-csp-woes/"/>
		<updated>2020-05-07T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/2020-05-07-angular-9-aot-build-csp-woes/</id>
		<content type="html">&lt;p&gt;We are actively developing an &lt;a href=&quot;http://angular.io/&quot;&gt;angular.io&lt;/a&gt; application, which, for historical reason, does not use &lt;code&gt;angular-cli&lt;/code&gt;. Instead, builds were done via &lt;code&gt;webpack&lt;/code&gt; and &lt;a href=&quot;https://www.npmjs.com/package/@ngtools/webpack&quot;&gt;@ngtools/webpack&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;We also enabled CSP on production server to disallow unsafe eval.&lt;/p&gt;
&lt;p&gt;However, AOT build violates unsafe eval, by invoking &lt;a href=&quot;https://github.com/angular/angular/blob/c25503b/packages/core/src/util/named_array_type.ts#L26-L41&quot;&gt;createNamedArrayType&lt;/a&gt; method. What is more infuriating is the comment in the file clearly states&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;/**
 * THIS FILE CONTAINS CODE WHICH SHOULD BE TREE SHAKEN AND NEVER CALLED FROM PRODUCTION CODE!!!
 */
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I would have thought AOT build (by setting &lt;code&gt;mode&lt;/code&gt;: &lt;code&gt;production&lt;/code&gt; in webpack configuration) would automatically set the flags to allow the methods to be tree shaken, but clearly I was wrong.&lt;/p&gt;
&lt;p&gt;After much digging, the interim solution seems to be using webpack define plugin to set &lt;code&gt;ngDevMode&lt;/code&gt; to &lt;code&gt;false&lt;/code&gt;, and include &lt;a href=&quot;https://webpack.js.org/plugins/terser-webpack-plugin/&quot;&gt;terser-webpack-plugin&lt;/a&gt; in webpack configuration &lt;code&gt;optimization.minimizer&lt;/code&gt;&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Protractor Strangies</title>
		<link href="https://pandamakes.me/posts/2020-03-02-protractor-strangies/"/>
		<updated>2020-03-02T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/2020-03-02-protractor-strangies/</id>
		<content type="html">&lt;p&gt;In a previous post, I mentioned that I have decided to work with protractor, selenium, and webdriver (though webdriver/protractor API are abstracted via OOP).&lt;/p&gt;
&lt;p&gt;When porting our e2e tests, we noticed the need to move the cursor to a specific position on the viewport, and observe the UI change. It just so happens that selenium v1 and v2 had &lt;a href=&quot;https://stackoverflow.com/a/53108677/6059235&quot;&gt;very different API of moving mouse&lt;/a&gt;.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Selenium vs Puppeteer</title>
		<link href="https://pandamakes.me/posts/2020-02-14-selenium-vs-puppeteer/"/>
		<updated>2020-02-14T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/2020-02-14-selenium-vs-puppeteer/</id>
		<content type="html">&lt;p&gt;Lately, I have been working on e2e test of an angular application.&lt;/p&gt;
&lt;p&gt;Natively, angular CLI appears to use protractor, selenium and jasmine. However, I am been more familiar with mocha, chai and puppeteer. Thus began the debugging cycle.&lt;/p&gt;
&lt;h2 id=&quot;issue-1-lacking-visual-feedback&quot; tabindex=&quot;-1&quot;&gt;Issue 1: Lacking visual feedback &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/2020-02-14-selenium-vs-puppeteer/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;After much research, I came to the conclusion that whilst it &lt;a href=&quot;https://stackoverflow.com/a/52765728/6059235&quot;&gt;certainly appears&lt;/a&gt; that you can write puppeteer tests, in non-headless mode, the chrome window simply does not navigate to the page(s) you instruct it to. My guess is that protractor internally uses selenium. By specifying the binary executable path, protractor opens a Chrome window. But &lt;code&gt;puppeteer.launch&lt;/code&gt; will launch a separate chrome instance. Puppeteer API interacts with the latter and webdriver API interacts with the former. Whilst your tests will still pass/fail as you would expect, debugging them becomes a much more difficult task.&lt;/p&gt;
&lt;p&gt;So I could:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Use protractor and learn selenium web driver API&lt;/li&gt;
&lt;li&gt;Use protractor and use puppeteer in effective headless mode&lt;/li&gt;
&lt;li&gt;Use mocha, chai and puppeteer&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;After much back and forth, I have decided to use jasmine and selenium. Hopefully, in the future, it should be easier to distribute e2e tests via selenium grid. It should also allow tests to be written in other languages.&lt;/p&gt;
&lt;p&gt;I have abstracted away the selenium webdriver API, so in principle, implementing puppeteer should be relatively simple.&lt;/p&gt;
&lt;h2 id=&quot;issue-2-debugging-http-requests&quot; tabindex=&quot;-1&quot;&gt;Issue 2: Debugging HTTP requests &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/2020-02-14-selenium-vs-puppeteer/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;In e2e tests, one of the test conditions is given the navigation to a URL, the application should make a HTTP GET request. For puppeteer, there is &lt;a href=&quot;https://github.com/puppeteer/puppeteer/blob/master/docs/api.md#pagesetrequestinterceptionvalue&quot;&gt;page.setRequestInterception(value)&lt;/a&gt; . For selenium ... nothing?&lt;/p&gt;
&lt;p&gt;At the end, I had to resort to proxy&#39;ing &lt;code&gt;XMLHttpRequest.prototype.open&lt;/code&gt;. (edit: the idea came from &lt;a href=&quot;https://gist.github.com/chmanie/e616ef3b9d20321943e8&quot;&gt;this gist&lt;/a&gt;) Even then, it was not straight forward. &lt;code&gt;webdriver.get&lt;/code&gt; instantiate a new window for me, and thus overwrites any previous proxying of &lt;code&gt;XMLHttpRequest.prototype.open&lt;/code&gt;. So I had to hack it by synchronously patching the method, after &lt;code&gt;webdriver.get&lt;/code&gt; call was made.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>glMatrix bug - mat4.getRotation when matrix has scaling component</title>
		<link href="https://pandamakes.me/posts/2020-02-01-gl-matrix-bug/"/>
		<updated>2020-02-01T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/2020-02-01-gl-matrix-bug/</id>
		<content type="html">&lt;p&gt;I have been working on a project that extensively make uses of &lt;a href=&quot;http://glmatrix.net/&quot;&gt;glMatrix&lt;/a&gt;, a javascript library which implements a number of extremely handy methods for manipulating vectors, quaternions and affine matrices.&lt;/p&gt;
&lt;p&gt;To set the scene:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;root scene consists of two objects, which relative to the world coordinates
&lt;ul&gt;
&lt;li&gt;object A has a single transform, which consists of translation component&lt;/li&gt;
&lt;li&gt;object B has a single transform, which consists of translation, rotation and isotropic scaling&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;default camera has no rotation component&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;My desired outcome is to apply a rotation to the camera to view object B in its native orientation.&lt;/p&gt;
&lt;p&gt;As I have transformation matrix of object B, I thought I could use the &lt;a href=&quot;http://glmatrix.net/docs/module-mat4.html#.getRotation&quot;&gt;mat4.getRotation&lt;/a&gt; method. Apply it to the camera and we should be done.&lt;/p&gt;
&lt;p&gt;To my dismay, this method result in a view of B that is &lt;em&gt;slightly&lt;/em&gt; non aligned.&lt;/p&gt;
&lt;p&gt;I played around with a few other ideas, for example:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;perhaps the 3D framework I was using is rotation the scene, rather than the camera?&lt;/li&gt;
&lt;li&gt;how about getting the inverse of the matrix, and try again?&lt;/li&gt;
&lt;li&gt;the fact that &lt;code&gt;glMatrix&lt;/code&gt; uses column major convention, does that affect anything?&lt;/li&gt;
&lt;li&gt;&lt;code&gt;getRotation&lt;/code&gt; method returns a non-normalized quaternion. (this turns out to be related to the issue I am having)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I banged my head for a good half a day, and looked up &lt;code&gt;glmatrix getrotation does not work&lt;/code&gt; on google, and lo and behold, first search result &lt;a href=&quot;https://github.com/toji/gl-matrix/issues/245&quot;&gt;mat4.getRotation is not working when the matrix was scaled with specific vectors&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;So all I had to do is to scale the transform matrix before calling &lt;code&gt;getRotation&lt;/code&gt;, and it worked like a charm.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Hello world (again).</title>
		<link href="https://pandamakes.me/posts/firstpost/"/>
		<updated>2019-12-10T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/firstpost/</id>
		<content type="html">&lt;p&gt;Last time last time&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Dockerfile: multistage build does not persist ENV</title>
		<link href="https://pandamakes.me/posts/dockerfile-multi/"/>
		<updated>2019-02-27T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/dockerfile-multi/</id>
		<content type="html">&lt;p&gt;Learnt it the hard way, but somewhat makes sense. Everytime &lt;code&gt;FROM&lt;/code&gt; keyword is used, the &lt;code&gt;ENV&lt;/code&gt; declared before will no longer be accessible. Simple reproduction:&lt;/p&gt;
&lt;p&gt;FROM node:8 as builder
ENV test=helloworld
RUN echo $test
# prints helloworld&lt;/p&gt;
&lt;p&gt;FROM node:8-alphine
RUN echo $test
# prints nothing&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/moby/moby/issues/37345#issuecomment-400245466&quot;&gt;also detailed here&lt;/a&gt;&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>drag and drop adventures</title>
		<link href="https://pandamakes.me/posts/drag-and-drop-adventures/"/>
		<updated>2019-02-20T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/drag-and-drop-adventures/</id>
		<content type="html">&lt;p&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API&quot;&gt;HTML5 drag and drop API&lt;/a&gt; They are useful in creating an intuitive UI. But there are some pitfalls&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;event.dataTransfer&lt;/code&gt; can only be set &lt;code&gt;ondragstart&lt;/code&gt;, and cannot be read until &lt;code&gt;ondrop&lt;/code&gt; (&lt;a href=&quot;https://stackoverflow.com/questions/11927309/html5-dnd-datatransfer-setdata-or-getdata-not-working-in-every-browser-except-fi&quot;&gt;SO post&lt;/a&gt;). This is a security minded feature, as drag n drop is a feature that can potentially be cross browser/cross application (think drop file interface on browsers). Allowing &lt;code&gt;ondragenter&lt;/code&gt; etc handlers sniff transferData is a bad idea.&lt;/li&gt;
&lt;li&gt;in order for &lt;code&gt;ondrop&lt;/code&gt; event to be called, &lt;code&gt;ondragenter&lt;/code&gt; and &lt;code&gt;ondragover&lt;/code&gt; must both be cancelled (by &lt;code&gt;ev.preventDefault()&lt;/code&gt; or &lt;code&gt;return false&lt;/code&gt;) (&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#droptargets&quot;&gt;MDN&lt;/a&gt;). Most dom elements are not droppable. This ensures that on drop event only fires when the developer explicitly enables it.&lt;/li&gt;
&lt;/ul&gt;
</content>
	</entry>
	
	<entry>
		<title>nginx, proxy pass, cors and preflight</title>
		<link href="https://pandamakes.me/posts/nginx-proxy-pass-cors-and-preflight/"/>
		<updated>2018-10-10T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/nginx-proxy-pass-cors-and-preflight/</id>
		<content type="html">&lt;p&gt;Lately, I wanted to setup an nginx gate way that proxy pass the requests in the following manner:&lt;/p&gt;
&lt;p&gt;http://hostname.com : 301 -&amp;gt; https://hostname.com
https://hostname.com/{CONTAINER_NAME}/{PORT_NUMBER}/ -&amp;gt; add CORS header, proxy pass to http://{CONTAINER_NAME}:{PORT_NUMBER}/&lt;/p&gt;
&lt;p&gt;This would be especially useful in a &lt;code&gt;docker-compose.yml&lt;/code&gt; script, where, in the same &lt;code&gt;docker network&lt;/code&gt; containers can communicate with each other via docker network dns. TLDR: &lt;a href=&quot;https://github.com/xgui3783/dockerNginxProxyPass&quot;&gt;github repo&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;redirect-to-https-connection&quot; tabindex=&quot;-1&quot;&gt;redirect to https connection &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/nginx-proxy-pass-cors-and-preflight/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;this bit is easy&lt;/p&gt;
&lt;p&gt;server {
listen 80;
access_log  /var/log/nginx/port80.access.log;&lt;/p&gt;
&lt;p&gt;# for let&#39;s encrypt
location /.well-known/acme-challenge/ {
root /www/html/letsencrypt;
}&lt;/p&gt;
&lt;p&gt;location / {
return 301 https://$host$request_uri;
}
}&lt;/p&gt;
&lt;p&gt;But to configure ssl connection it is slightly tricky. Because one does not have the files necessary. I ran the test without the ssl directive. Once acquired, I then added the ssl directive and referenced the files.&lt;/p&gt;
&lt;h2 id=&quot;proxy-pass-based-on-path&quot; tabindex=&quot;-1&quot;&gt;proxy pass based on path &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/nginx-proxy-pass-cors-and-preflight/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;This took a while, but:&lt;/p&gt;
&lt;p&gt;location ~ ^/(.&lt;em&gt;)/([0-9]&lt;/em&gt;)/ {&lt;/p&gt;
&lt;p&gt;# docker dns resolver
resolver 127.0.0.11;&lt;/p&gt;
&lt;p&gt;set $proxy_pass_full http://$1:$2;
rewrite ^/.&lt;em&gt;/[0-9]&lt;/em&gt;/(.*) /$1 break;&lt;/p&gt;
&lt;p&gt;add_header Access-Control-Allow-Origin *;
proxy_pass $proxy_pass_full;
}&lt;/p&gt;
&lt;p&gt;Setting the &lt;code&gt;resolver&lt;/code&gt; directive is essential, as if any part of the &lt;code&gt;proxy_pass&lt;/code&gt; was replaced with a variable, nginx needs the resolver to be defined.&lt;/p&gt;
&lt;h2 id=&quot;double-cors-header&quot; tabindex=&quot;-1&quot;&gt;double cors header(?) &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/nginx-proxy-pass-cors-and-preflight/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;one of the forwarded service has already been configured to add the cors header. By adding another &lt;code&gt;Access-Control-Allow-Origin&lt;/code&gt; header, the browser freaks out and makes the response opaque. So easy, right, disable the CORS capability of the forwarded service. which bring us to ...&lt;/p&gt;
&lt;h2 id=&quot;preflight-option&quot; tabindex=&quot;-1&quot;&gt;preflight (OPTION) &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/nginx-proxy-pass-cors-and-preflight/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;I never quite understood the preflight (OPTION) request, because I only ever see it rarely. But I now see more clearly the anatomy of a CORS request. A GET CORS request from the browser does not trigger preflight OPTION request, but a POST CORS request (and any other methods, it seems) does. (nb this could be unique to the &lt;code&gt;fetch&lt;/code&gt; api, lower level &lt;code&gt;XMLHttpRequest&lt;/code&gt; may be unaffected). preflight OPTION request is forwarded, but without CORS configuration, the preflight request was responded with a 405, and the POST CORS request was never sent.&lt;/p&gt;
&lt;h2 id=&quot;the-solution&quot; tabindex=&quot;-1&quot;&gt;the solution &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/nginx-proxy-pass-cors-and-preflight/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;the nginx proxy server will respond preflight request:&lt;/p&gt;
&lt;p&gt;if ($request_method = &#39;OPTIONS&#39;){
add_header &#39;Access-Control-Allow-Origin&#39; &#39;*&#39;;
add_header &#39;Access-Control-Allow-Methods&#39; &#39;GET, POST, OPTIONS&#39;;
#
# Custom headers and headers various browsers &lt;em&gt;should&lt;/em&gt; be OK with but aren&#39;t
#
add_header &#39;Access-Control-Allow-Headers&#39; &#39;DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range&#39;;
#
# Tell client that this pre-flight info is valid for 20 days
#
add_header &#39;Access-Control-Max-Age&#39; 1728000;
add_header &#39;Content-Type&#39; &#39;text/plain; charset=utf-8&#39;;
add_header &#39;Content-Length&#39; 0;
return 204;
}&lt;/p&gt;
&lt;p&gt;courtesy of &lt;a href=&quot;https://enable-cors.org/server_nginx.html&quot;&gt;this post&lt;/a&gt;&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Rendering a very, very large nested tree in Angular</title>
		<link href="https://pandamakes.me/posts/rendering-a-very-very-large-nested-tree-in-angular/"/>
		<updated>2018-10-02T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/rendering-a-very-very-large-nested-tree-in-angular/</id>
		<content type="html">&lt;p&gt;And cherry on top, needs filtering by text functionality, support single/double click + hierarchy guiding lines.&lt;/p&gt;
&lt;p&gt;Lessons learnt:&lt;br&gt;
1/ &lt;strong&gt;do not use a nested structure.&lt;/strong&gt; Whilst it initially makes sense, and everything are structured sematically, rendering and changing the parent will case a cascade of changes, and render it extremely non performant. &lt;strong&gt;Solution&lt;/strong&gt;: use a flattened list instead. Any changes to the local node stays local.&lt;/p&gt;
&lt;p&gt;2/ &lt;strong&gt;intersection observer behaves strangely&lt;/strong&gt;. I wanted to achieve an infinite scroll effect where only the first 50 or so rows are rendered. As the user scroll to the bottom half, the next 50 are rendered dynamically. My first attempt was to use a &lt;code&gt;slice&lt;/code&gt; pipe and dynamically alter the begin and end. But this causes the entire list to rerender, and the result? on render, the viewport is teleported with the added content, to the very bottom. &lt;strong&gt;Solution&lt;/strong&gt;: cluster the flattened list into batch of 50, and use &lt;code&gt;*ngIf&lt;/code&gt; to hide/show them&lt;/p&gt;
&lt;p&gt;3/ &lt;strong&gt;do not remove elements from the top&lt;/strong&gt;. So I thought I&#39;d be clever. User scrolled past the first 50 elements, let&#39;s destroy them, so they do not need to be rendered, should speed up the rendering process. True, but also screws up the scroll location. I think browser remembers the scroll pos on a px level. &lt;strong&gt;Solution&lt;/strong&gt;: do not remove elements from the top. Unless you are dynamically setting the scroll pos.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>more js quirks</title>
		<link href="https://pandamakes.me/posts/more-js-quirks/"/>
		<updated>2018-09-28T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/more-js-quirks/</id>
		<content type="html">&lt;p&gt;following on from &lt;a href=&quot;https://pandamakes.me/posts/more-js-quirks/www.pandamakes.com.au/js-quirks/&quot;&gt;last js quirks post&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;isNaN([1,2,3])
//prints true&lt;/p&gt;
&lt;p&gt;good. and array is not a number&lt;/p&gt;
&lt;p&gt;isNaN([])
//prints false&lt;/p&gt;
&lt;p&gt;err... so an empty array IS a number?&lt;/p&gt;
&lt;p&gt;isNaN(true)
isNaN(false)
//both prints false&lt;/p&gt;
&lt;p&gt;a boolean is a number? (I guess this one can be considered 1 or 0 respectively...)&lt;/p&gt;
&lt;p&gt;conclusion, &lt;code&gt;isNaN&lt;/code&gt; is weird...&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>using `null` as a key for Map in JS</title>
		<link href="https://pandamakes.me/posts/using-null-as-a-key-for-map-in-js/"/>
		<updated>2018-08-06T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/using-null-as-a-key-for-map-in-js/</id>
		<content type="html">&lt;p&gt;Totally works... for e.g.&lt;/p&gt;
&lt;p&gt;const map = new Map()
map.set(1,2)
map.set(null,&#39;apple&#39;)
map.get(null)
/* prints apple */&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Typescript + Webpack + Alias</title>
		<link href="https://pandamakes.me/posts/typescript-webpack-alias/"/>
		<updated>2018-07-25T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/typescript-webpack-alias/</id>
		<content type="html">&lt;p&gt;Ran into a small problem today regarding the using of &lt;code&gt;alias&lt;/code&gt; in a typescript webpack project.&lt;/p&gt;
&lt;p&gt;The project structure looks like so:&lt;/p&gt;
&lt;p&gt;- root
- src
- main.ts
- third_party
- another_module
- main.js
- tsconfig.json
- webpack.config.js&lt;/p&gt;
&lt;p&gt;in &lt;code&gt;main.js&lt;/code&gt;, instead of:&lt;/p&gt;
&lt;p&gt;import &#39;../third_party/another_module/main.js&#39;&lt;/p&gt;
&lt;p&gt;I would very much prefer:&lt;/p&gt;
&lt;p&gt;import &#39;third_party/another_module/main.js&#39;&lt;/p&gt;
&lt;p&gt;Initially, I thought it was the &lt;a href=&quot;https://www.typescriptlang.org/docs/handbook/module-resolution.html&quot;&gt;typescript module resolution&lt;/a&gt; I needed to fiddle around with. Turns out, it was &lt;a href=&quot;https://webpack.js.org/configuration/resolve/&quot;&gt;webpack resolve.alias&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;path.resolve&lt;/code&gt; was also needed. i.e.:&lt;/p&gt;
&lt;p&gt;/* didn&#39;t work */
module.exports = {
resolve : {
alias : {
&amp;quot;third_party&amp;quot; : &amp;quot;third_party&amp;quot;
}
}
}&lt;/p&gt;
&lt;p&gt;/* worked */
const path = require(&#39;path&#39;)
module.exports = {
resolve : {
alias : {
&amp;quot;third_party&amp;quot; : path.resolve(__dirname, &#39;third_party&#39;)
}
}
}&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Webpack HTML plugin pitfall</title>
		<link href="https://pandamakes.me/posts/webpack-html-plugin-pitfall/"/>
		<updated>2018-07-23T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/webpack-html-plugin-pitfall/</id>
		<content type="html">&lt;p&gt;Singular, a quick one.&lt;/p&gt;
&lt;p&gt;If one mix javascript in html pages loaded by HTML plugin, such as:&lt;/p&gt;
&lt;p&gt;&amp;lt;!doctype html&amp;gt;
&lt;html&gt;
&lt;head&gt;
&lt;script&gt;
const message = &#39;hello world&#39;
console.log(&lt;code&gt;${message}&lt;/code&gt;)
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;/body&gt;
&lt;/html&gt;&lt;/p&gt;
&lt;p&gt;webpack html plugin will throw an error reads something like:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Template execution failed: ReferenceError: message is not defined&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;No template literals in webpack html plugin.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>JS Quirks</title>
		<link href="https://pandamakes.me/posts/js-quirks/"/>
		<updated>2018-07-13T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/js-quirks/</id>
		<content type="html">&lt;p&gt;isNaN(&#39;&#39;) /* prints false &lt;em&gt;/
/&lt;/em&gt; you are telling me an empty string is a number? */&lt;/p&gt;
&lt;p&gt;javascript, you so silly&lt;/p&gt;
&lt;p&gt;edit:&lt;br&gt;
bonus:&lt;/p&gt;
&lt;p&gt;isNaN(null) /* prints false &lt;em&gt;/
/&lt;/em&gt; you are telling me null IS a number? */&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Angular Elements Gotcha</title>
		<link href="https://pandamakes.me/posts/angular-elements-gotcha/"/>
		<updated>2018-07-10T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/angular-elements-gotcha/</id>
		<content type="html">&lt;p&gt;binding &lt;em&gt;inputs&lt;/em&gt; to angular elements gave me a surprise.&lt;/p&gt;
&lt;p&gt;for example, the below component:&lt;/p&gt;
&lt;p&gt;/* import statements */&lt;/p&gt;
&lt;p&gt;@Component({
selector : &#39;my-component&#39;,
template : &#39;&#39;
styles : []
})&lt;/p&gt;
&lt;p&gt;export class MyComponent{
@Input() inputString : string = &lt;code&gt;default value&lt;/code&gt;
}&lt;/p&gt;
&lt;p&gt;in an angular application, you&#39;d have:&lt;/p&gt;
&lt;p&gt;&amp;lt;my-component [inputString]=&amp;quot;&#39;hello world&#39;&amp;quot;&amp;gt;
&lt;/p&gt;
&lt;p&gt;in the exported element would however, look like:&lt;/p&gt;
&lt;p&gt;&lt;my-component input-string=&quot;hello world&quot;&gt;
&lt;/my-component&gt;&lt;/p&gt;
&lt;p&gt;as documented &lt;a href=&quot;https://angular.io/guide/elements#mapping&quot;&gt;here&lt;/a&gt;&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Angular 6 changeDetection lesson</title>
		<link href="https://pandamakes.me/posts/angular-6-changedetection-lesson/"/>
		<updated>2018-06-09T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/angular-6-changedetection-lesson/</id>
		<content type="html">&lt;p&gt;I learnt an important lesson today.&lt;/p&gt;
&lt;p&gt;@Component({
template :
`
&amp;lt;div *ngFor = &amp;quot;let string of array&amp;quot;&amp;gt;&lt;/p&gt;
&lt;p&gt;
`
})&lt;/p&gt;
&lt;p&gt;export class MyApp{&lt;/p&gt;
&lt;p&gt;get array(){
return [&#39;hello&#39;,&#39;world&#39;]
}
}&lt;/p&gt;
&lt;p&gt;does &lt;strong&gt;not&lt;/strong&gt; work like the way I thought it did.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Angular &amp;gt;2 DI Can&#39;t resolve all parameters</title>
		<link href="https://pandamakes.me/posts/angular-2-di-cant-resolve-all-parameters/"/>
		<updated>2018-05-30T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/angular-2-di-cant-resolve-all-parameters/</id>
		<content type="html">&lt;p&gt;Couldn&#39;t work out for the life of me. Could not inject Factory components such as &lt;code&gt;ComponentFactoryResolver&lt;/code&gt; or &lt;code&gt;DOMSanitizer&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Then it dawned on me. I needed to install and include &lt;code&gt;reflect-metadata&lt;/code&gt;&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>more foray web-dev: Angular 6 &amp;amp; Webpack</title>
		<link href="https://pandamakes.me/posts/more-foray-web-dev-angular-6-webpack/"/>
		<updated>2018-05-25T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/more-foray-web-dev-angular-6-webpack/</id>
		<content type="html">&lt;p&gt;Recently, I have been motivated to upgrade the currently application I am writing from Angular 5 to Angular 6. Since there was going to be a rewrite of the application any way, I thought this is a good opportunity to upgrade.&lt;/p&gt;
&lt;h2 id=&quot;first-error&quot; tabindex=&quot;-1&quot;&gt;First error: &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/more-foray-web-dev-angular-6-webpack/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;in &lt;code&gt;tsconfig.json&lt;/code&gt;, only include &lt;code&gt;&#39;.ts&#39;&lt;/code&gt; as &lt;code&gt;resolve.extension&lt;/code&gt;. as a result, &lt;code&gt;rxjs&lt;/code&gt; kept on throwing error during bundling&lt;/p&gt;
&lt;p&gt;ERROR in ./node_modules/rxjs/_esm5/index.js
Module not found: Error: Can&#39;t resolve &#39;./internal/util/pipe&#39; in &#39;/PATH-TO-PROJECT/node_modules/rxjs/_esm5&#39;&lt;/p&gt;
&lt;h2 id=&quot;second-error&quot; tabindex=&quot;-1&quot;&gt;Second error: &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/more-foray-web-dev-angular-6-webpack/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;I changed the &lt;code&gt;target&lt;/code&gt; from &lt;code&gt;es5&lt;/code&gt; to &lt;code&gt;es2015&lt;/code&gt; in lieu for supporting &lt;a href=&quot;https://angular.io/guide/elements#browser-support-for-custom-elements&quot;&gt;angular elements&lt;/a&gt;. But the bundler throws error on failing to find module &lt;code&gt;@angular/core&lt;/code&gt;. changing &lt;code&gt;target&lt;/code&gt; back to &lt;code&gt;es5&lt;/code&gt; circumvents the problem. Turns out, with the increased support for dynamic import, one will need to specify &lt;code&gt;moduleResolution&lt;/code&gt; as &lt;code&gt;node&lt;/code&gt; in &lt;code&gt;tsconfig.json&lt;/code&gt; to explicitly tell the typescript compiler that imports are node modules.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>finally sorted out the weird EACCES issue re: npm, npm link and node gyp</title>
		<link href="https://pandamakes.me/posts/finally-sorted-out-the-weird-eacces-issue-re-npm-npm-link-and-node-gyp/"/>
		<updated>2018-05-24T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/finally-sorted-out-the-weird-eacces-issue-re-npm-npm-link-and-node-gyp/</id>
		<content type="html">&lt;p&gt;For the longest time, I was plagued by the issue of constantly have EACCES issue with regard to EACCES issue.&lt;/p&gt;
&lt;p&gt;To set the scene, I do not have &lt;code&gt;nvm&lt;/code&gt; installed. So &lt;code&gt;npm link&lt;/code&gt; actually required &lt;code&gt;sudo&lt;/code&gt; access. Crazy. I know. (Guess who&#39;s setting up &lt;code&gt;nvm&lt;/code&gt; next time?). &lt;code&gt;package.json&lt;/code&gt; has dependency on packages set up by &lt;code&gt;npm link&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;to reproduce the issue:&lt;/p&gt;
&lt;p&gt;firstly, &lt;code&gt;rm -rf node_modules&lt;/code&gt;&lt;br&gt;
now, &lt;code&gt;npm i&lt;/code&gt; results in error, as the packages set up by &lt;code&gt;npm link&lt;/code&gt; cannot be found, and the process is reversed.&lt;br&gt;
&lt;code&gt;sudo npm link PACKAGE&lt;/code&gt; successfully Links the package and creates &lt;code&gt;node_modules&lt;/code&gt; folder, but since the &lt;code&gt;node_modules&lt;/code&gt; folder was created with super user, &lt;code&gt;node-gyp&lt;/code&gt; would not be able to be installed properly.&lt;/p&gt;
&lt;p&gt;solution: &lt;code&gt;(sudo) rm -rf node_modules&lt;/code&gt;, &lt;code&gt;mkdir node_modules&lt;/code&gt;, &lt;code&gt;sudo npm link PACKAGE&lt;/code&gt;, &lt;code&gt;npm i&lt;/code&gt;&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>on cross browser (chrome vs FF) compatibility of webcomponents</title>
		<link href="https://pandamakes.me/posts/on-cross-browser-compatibility-of-webcomponents/"/>
		<updated>2018-05-16T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/on-cross-browser-compatibility-of-webcomponents/</id>
		<content type="html">&lt;p&gt;I ran into an interesting problem yesterday. Support for webcomponents.&lt;/p&gt;
&lt;p&gt;AFAIK, chrome natively support webcomponents. FF however, require a polyfill. It did not take long for me to realise that the polyfill breaks chrome&#39;s native support for webcomponents (probably overwrites the &lt;code&gt;customElements(...arg)&lt;/code&gt; function and &lt;code&gt;customElementRegistry&lt;/code&gt; property of &lt;code&gt;window&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Then I remembered learning about testing for browser capability using codes such as&lt;/p&gt;
&lt;p&gt;if(&#39;customElements&#39; in window){
/* natively support webcomponents &lt;em&gt;/
}else{
/&lt;/em&gt; polyfill */
}&lt;/p&gt;
&lt;p&gt;Worked like a charm.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>webpack-closure-compiler throws cryptic error (and solution)</title>
		<link href="https://pandamakes.me/posts/webpack-closurecompiler/"/>
		<updated>2018-01-26T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/webpack-closurecompiler/</id>
		<content type="html">&lt;p&gt;&lt;a href=&quot;https://www.npmjs.com/package/webpack-closure-compiler&quot;&gt;webpack-closure-compiler&lt;/a&gt; was used to convert compiled js from ecma6 to ecma5 by &lt;a href=&quot;https://github.com/google/neuroglancer&quot;&gt;neuroglancer&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;How I found out&lt;/strong&gt;&lt;br&gt;
&lt;code&gt;npm run build&lt;/code&gt; works, &lt;code&gt;npm run build-min&lt;/code&gt; does not. Commenting out the &lt;a href=&quot;https://github.com/google/neuroglancer/blob/de7ca35dd4d9fa4e6c3166d636ee430af6da0fa0/config/webpack_helpers.js#L294&quot;&gt;&lt;code&gt;ClosureCompiler&lt;/code&gt;&lt;/a&gt; worked.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;The diagnosis&lt;/strong&gt;&lt;br&gt;
New machine, did not install java runtime. Concurrency (default) only works with java runtime installed.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;The fix&lt;/strong&gt;&lt;br&gt;
&lt;a href=&quot;https://stackoverflow.com/a/14788468/6059235&quot;&gt;install java run time on ubuntu&lt;/a&gt; by&lt;/p&gt;
&lt;p&gt;sudo apt-get install openjdk-8-jdk&lt;/p&gt;
&lt;p&gt;&lt;code&gt;npm run build-min&lt;/code&gt; worked.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>weird development issues</title>
		<link href="https://pandamakes.me/posts/weird-development-issues/"/>
		<updated>2017-05-15T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/weird-development-issues/</id>
		<content type="html">&lt;p&gt;this post was supposed to be published last week week monday. There happens to be a mix-up unfortunately.&lt;/p&gt;
&lt;p&gt;I may or may not have mentioned this, the environment of my work PC is all kinds of screwed up. Chrome 64 bit never seem to support webgl completely (even though on other windows machine, it runs fine). At least I have Firefox that runs everything smoothly.&lt;/p&gt;
&lt;p&gt;This one is definitely a new one: attempting to run a dev-server &lt;code&gt;npm run dev-server&lt;/code&gt; on &lt;a href=&quot;https://github.com/google/neuroglancer&quot;&gt;neuroglancer&lt;/a&gt;. The initial compilation error was:&lt;/p&gt;
&lt;p&gt;*.ts: files cannot be an empty array&lt;/p&gt;
&lt;p&gt;Strangely, many mentioned that it is a feature introduced in TS 2.10, whereas neuroglancer required TS 2.14 and up. Likely my dev machine. So I uninstalled node (which on uninstall says 4.x, but in cmd, &lt;code&gt;node --version&lt;/code&gt; prints 6.x) and reinstall (node v 6.10.x LTS) fixes the issue.&lt;/p&gt;
&lt;p&gt;However, a new issue arises. I get three new compilation errors:&lt;/p&gt;
&lt;p&gt;@types/lodash: ts2304 cannot find name &#39;object&#39;,
ts2428 all declaration of weakmap must have identical type parameters,
ts2304 cannot find name &#39;object&#39;&lt;/p&gt;
&lt;p&gt;On three separate files. Again, searching online yielded not a lot of useful information. Likely a dev machine config issue.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>A tectonic change in my life</title>
		<link href="https://pandamakes.me/posts/a-tectonic-change-in-my-life/"/>
		<updated>2017-05-01T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/a-tectonic-change-in-my-life/</id>
		<content type="html">&lt;p&gt;&lt;strong&gt;Background:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;I started this blog as a way for me to record my transition from my previous day-job, to one that is more intimately related to web development and programming. I believed (and I still do believe) that these records will be the testament that can attest for my conviction can experience. If I am lucky enough, I may even use the contents of this blog as a proof of character, showing potential clients and/or employers what I am capable of. As a result, I have been trying to ensure that the blog is as free of personal entries as possible.&lt;/p&gt;
&lt;p&gt;However, it may no longer be possible, as I will explain.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;The tectonic change:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;As I have given hints in the previous posts, change has come for me. I have accepted a front-end developer position, situated in Germany. I have been busy for the past month (April ’17), preparing for the move to the other side of the world. My position officially start on 1st May (well, 2nd of May, since 1st May is a public holiday).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;What is becoming of this blog?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;I do not intend to poison this blog with my personal struggles and triumphs in Germany. I will hopefully update this blog with the same frequency I have done in the past. However, this will likely depend largely on what I can/cannot talk about, the kind of issues I will be dealing with, and the amount of free time I can expect to get.&lt;/p&gt;
&lt;p&gt;My thoughts are rather tangled right now. Lots of uncertainty and anxiety.&lt;/p&gt;
&lt;p&gt;Apologies for the lack of tech in this post.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Terrible jokes (Probably only I understand)</title>
		<link href="https://pandamakes.me/posts/terrible-jokes-probably-only-i-understand/"/>
		<updated>2017-04-24T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/terrible-jokes-probably-only-i-understand/</id>
		<content type="html">&lt;p&gt;Here’s an easy one:&lt;/p&gt;
&lt;p&gt;NaCl = Native Client.&lt;br&gt;
so salty.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Here’s more like a self-deprecating joke:When downloading an example, instead of clicking the “download” button like a normal, sane person, you try to find the &lt;code&gt;git clone&lt;/code&gt; command.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Here is maybe one more:when creating a new file, my first mode of action is to go to terminal, &lt;code&gt;cd&lt;/code&gt; into the directory and &lt;code&gt;touch FILENAME&lt;/code&gt;.&lt;br&gt;
similarly, looking at the directory, it is becoming more natural to use &lt;code&gt;ls -l&lt;/code&gt; rather than &lt;code&gt;dir&lt;/code&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Real talk now. I am about to embark on a new journey. A new part of my life. I’d be lying if I say I am not scared. Scared of the unknown. Scared of not being good enough. Do I have impostor syndrome? Or do I lack the expertise to do my job well, as I have long suspected?Well, no turning back now. Impostor syndrome or not, I’m going to dive in head first, into the dimly lit unknown. It might be concrete and my head will end up in pieces. It might be calm, warm tropical sea. It might only be a swimming pool.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>threejs tips and tricks</title>
		<link href="https://pandamakes.me/posts/threejs-tips-and-tricks/"/>
		<updated>2017-04-17T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/threejs-tips-and-tricks/</id>
		<content type="html">&lt;p&gt;re: &lt;code&gt;OrbitControl&lt;/code&gt;(same can be said for &lt;code&gt;TrackballControl&lt;/code&gt;, I would assume), upon initialisation, reset camera rotation to 0,0,0. One will have to redefine the rotation of the camera, or invoke&lt;br&gt;
&lt;code&gt;camera.lookAt( target )&lt;/code&gt;&lt;br&gt;
method.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Caveat re: the point above, altering camera rotation after the initialisation of &lt;code&gt;OrbitControl&lt;/code&gt; and &lt;code&gt;TrackballControl&lt;/code&gt; is a bad idea. Whilst it works on execution, when one interacts with the camera, (via clicking and dragging), the rotation of the camera abruptly teleports to (0,0,0) first. Indeed a very jarring experience.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>JS lessons</title>
		<link href="https://pandamakes.me/posts/js-lessons/"/>
		<updated>2017-04-10T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/js-lessons/</id>
		<content type="html">&lt;p&gt;lesson 1:&lt;/p&gt;
&lt;p&gt;let code = &#39;console.log(&amp;quot;hello world&amp;quot;)&#39;
eval(eval(&#39;code&#39;)) // console logs hello world&lt;/p&gt;
&lt;p&gt;works as expected&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;lesson 2:&lt;br&gt;
babeljs is a es6 -&amp;gt; es5 interpreter… for browser compatibility&lt;br&gt;
neat feature to usher developers to use es6, to write code, that has good compatibility when the browser adoption rate could be better- - - - - -&lt;/p&gt;
&lt;p&gt;lesson 3:&lt;br&gt;
JS runs on a single thread: not exactly true. Just very recently, I learnt about &lt;code&gt;webworker&lt;/code&gt;It runs on a separate thread, (non-ui). the disadvantages: webworker has no access to dom, parent, getelementbyid etc. the advantages: it’s non-blocking, and thus useful for cpu intensive processes.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>WEBGL performance abnormalities (chrome vs firefox)</title>
		<link href="https://pandamakes.me/posts/webgl-performance-abnormalities-chrome-vs-firefox/"/>
		<updated>2017-04-03T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/webgl-performance-abnormalities-chrome-vs-firefox/</id>
		<content type="html">&lt;p&gt;Preface: I have had the chance to play around with a very specific webgl library (the name of which I may be able to reveal in the future. This is not for any NDA reasons – the library is opensource on github). I feel obliged to present my findings here, hopefully in a legible fashion.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Problem 1: the app runs particularly slowly on a chrome browser on my laptop.&lt;/p&gt;
&lt;p&gt;I won’t bore you with the troubleshooting, the verdict is that the browser installed is a 32bit browser. As a result, I is programmed to use only 4 GB (out of the possible 16GB) of RAM, which slowed the process down significantly.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Problem 2: I attempted to reinstall chrome (57.0.2987.110 64bit). This time, chrome identifies my GPU (AMD Radeon R7 M370) as a &lt;a href=&quot;https://www.khronos.org/webgl/wiki/BlacklistsAndWhitelists&quot;&gt;blacklisted GPU&lt;/a&gt;. As a result, chrome refuses to hardware accelerate webgl.&lt;/p&gt;
&lt;p&gt;Solution: I could override the misidentification by going to &lt;code&gt;chrome://flags&lt;/code&gt; and enable &lt;code&gt;Override software rendering list&lt;/code&gt;. But a simple reinstallation cleared the problem altogether.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Problem 3: The updated chrome (57.0.2987.110 64bit) no longer supports &lt;code&gt;webgl.getExtension(‘WEBGL_draw_buffers’)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://pandamakes.me/web/20190303111435im_/https:/pandamakes.com.au/content/images/2018/01/chrome_getExtension_webgl_draw_buffers.PNG&quot; alt=&quot;chrome_getExtension_webgl_draw_buffers&quot;&gt;&lt;/p&gt;
&lt;p&gt;Above is the &lt;code&gt;console.log&lt;/code&gt; of the method &lt;code&gt;webgl.getExtension(‘WEBGL_draw_buffers’)&lt;/code&gt;. Notice how the chrome developer console outputted null.&lt;/p&gt;
&lt;p&gt;Solution: Use firefox I guess. In addition to 57.0.2987.110 64bit, I have also tried their canary build 59.0.3054.0 64bit, which does not support the extension either.&lt;/p&gt;
&lt;p&gt;Addendum: according to &lt;a href=&quot;https://www.khronos.org/registry/webgl/sdk/tests/conformance/extensions/webgl-draw-buffers.html&quot;&gt;the extension conformance&lt;/a&gt;, not supporting &lt;code&gt;WEBGL_draw_buffers&lt;/code&gt; is legal.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://pandamakes.me/web/20190303111435im_/https:/pandamakes.com.au/content/images/2018/01/notSupportingDrawBuffer_legal.PNG&quot; alt=&quot;notSupportingDrawBuffer_legal&quot;&gt;&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Some other quirks, not related to three.js</title>
		<link href="https://pandamakes.me/posts/some-other-quirks-not-related-to-three-js/"/>
		<updated>2017-03-28T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/some-other-quirks-not-related-to-three-js/</id>
		<content type="html">&lt;p&gt;For the previous two weeks, I have talked about the quirks I encountered while meddling with three.js. I have also encountered some issues that are not three.js specific. I would like to go through them this week.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;I got a Logitech MX Anywhere 2 recently. In the not so distant past, I had to work with my old mouse on glassy surfaces on a few occasions, often with hacks such as using a few sheets of A4 paper as a mouse pad, producing mixed results.Having a mouse that works on most glassy surface can be helpful. However, Logitech MX series does not seem to want to play ball with Notepad++. Horizontal scroll started off being really slow (approx 3 characters at a time). After numerous attempt at “fixing” the horizontal scroll issue, horizontal scroll stopped working altogether.&lt;/p&gt;
&lt;p&gt;After some digging, the problem seems to be &lt;a href=&quot;https://github.com/notepad-plus-plus/notepad-plus-plus/issues/2096&quot;&gt;documented&lt;/a&gt;. (After all, not many people use Notepad ++ and Logitech mice together, I’d wager).&lt;/p&gt;
&lt;p&gt;I never could get the problem resolved. So I changed my text-editor to Caret.&lt;/p&gt;
&lt;p&gt;This reminds me. I should really try sublime.&lt;/p&gt;
&lt;p&gt;I was looking for a way to effortlessly style and present some JSON data. I did not want to import JQuery + Bootstrap, since they add to the weigh and execution time. I did not want to write and debug a bunch of JS codes just to implement a modal window. The solution I settle with came from &lt;a href=&quot;http://stackoverflow.com/questions/27705640/display-json-in-a-readable-format-in-a-new-tab/27705690#27705690&quot;&gt;this stackoverflow post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;var myjson = JSON.stringify(json, null, 2);
console.log(myjson);
var x = window.open();
x.document.open();
x.document.write(&#39;&lt;/p&gt;&lt;pre&gt;&#39; + myjson + &#39;&lt;/pre&gt;&#39;);
x.document.close();&lt;p&gt;&lt;/p&gt;
&lt;p&gt;Works like a charm.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Some additional quirks associated with three.js</title>
		<link href="https://pandamakes.me/posts/some-additional-quirks-associated-with-three-js/"/>
		<updated>2017-03-21T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/some-additional-quirks-associated-with-three-js/</id>
		<content type="html">&lt;p&gt;Last week, I talked a bit about my initial adventure into three.js. This week, I will continue to share some quirks that I found interesting regarding three.js&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;When both dat.gui.min.js and TrackballControl are implemented, altering the dat.gui panel causes the perspective of TrackballControl to change. After all, clicking and dragging in dat.gui panel constitute as a click + drag event. Surely, &lt;a href=&quot;https://github.com/mrdoob/three.js/issues/828&quot;&gt;there is a way to circumvent this&lt;/a&gt;. The short answer (by meetar @ github):&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;For the record, @mrdoob is referring to passing the render context (renderer.domElement) to the controls call, like so:&lt;/p&gt;
&lt;p&gt;controls = new THREE.TrackballControls( camera, renderer.domElement );&lt;/p&gt;
&lt;p&gt;This tells the controls to only work when the mouse is over the renderer’s domElement (the canvas). This change fixed the problems I was having with dat.GUI while using TrackballControls.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;My reaction and response, borrowing from amboworld @ github from the same thread:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;thanks @meetar&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;Another issue I have had was the &lt;code&gt;.getWorldDirection()&lt;/code&gt; method. Long story short, I eventually realised that THREE treats positive x axis direction as the direction to return when the method &lt;code&gt;.getWorldDirection()&lt;/code&gt; is called. Instead of redoing the vertices and faces, I used a simple subtracting to figure out the desired direction.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;This is a short one. In order to determine whether the face of a custom geometry is “inside” or “outside”, check the order of the vertices. If the vertices are push in in an anti-clockwise fashion, it is an outside face. If clockwise, then in face. Whether a face is on the outside or inside will affect how is the polygon painted. Of course, you can paint on both sides, and alleviate this problem all together.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Lessons learnt learning three.js</title>
		<link href="https://pandamakes.me/posts/lessons-learnt-learning-three-js/"/>
		<updated>2017-03-14T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/lessons-learnt-learning-three-js/</id>
		<content type="html">&lt;p&gt;Background: I have been wanting to dabble in something new for sometime. I was pondering between &lt;em&gt;three.js&lt;/em&gt;, &lt;em&gt;d3.js&lt;/em&gt; or machine learning (python). I decided to give &lt;em&gt;three.js&lt;/em&gt; a shot.&lt;/p&gt;
&lt;p&gt;three.js is an abstraction layer on top of WebGL. It provides methods that are easy to understand and implement to those familiar with javascript. Here is a list of things about three.js that I learnt.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;the core file, three.js, does not include all of the functionalities&lt;/strong&gt;. Indeed, some of the (essential) characteristics can be implemented at will by including their respective js file(s). For example, one neat extension to include is the &lt;em&gt;TrackballControl.js&lt;/em&gt;. This grants mouse control to the user, so that one can look around the scene with familiar gestures such as drag and drop and wheel up and down. Two other modules that I use: &lt;code&gt;SubdivisionModifier&lt;/code&gt;,&lt;em&gt;stat.min.js&lt;/em&gt; and &lt;em&gt;dat.gui.min.js&lt;/em&gt; (the last one is not strictly THREE only)&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Somewhat relatedly, the application of &lt;code&gt;SubdivisionModifier&lt;/code&gt; confused me when I was first using it. It modifies the original geometry, rather than returning a copy of modified geometry. i.e., instead of:&lt;/p&gt;
&lt;p&gt;var threeGeometry = new THREE.BoxGeometry(1,1,1)
threeGeometry.mergeVertices()
var modifier = new THREE.SubdivisionModifier(1)
var newThreeGeometry = modifier.modify(threeGeometry)&lt;/p&gt;
&lt;p&gt;you simply do:&lt;/p&gt;
&lt;p&gt;var threeGeometry = new THREE.BoxGeometry(1,1,1)
threeGeometry.mergeVertices()
var modifier = new THREE.SubdivisionModifier(1)
modifier.modify(threeGeometry)&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>First steps in threejs</title>
		<link href="https://pandamakes.me/posts/first-steps-in-threejs/"/>
		<updated>2017-03-06T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/first-steps-in-threejs/</id>
		<content type="html">&lt;p&gt;So I had my first stride into three.js recently. I had wanted to try a graphic library of javascript for sometime, and I had in my mind to try either d3.js or three.js. It was not until I listened to &lt;a href=&quot;http://hanselminutes.com/565/discovering-webvr-with-ada-rose-edwards&quot;&gt;Scott Hanselman’s discussion with Ada Rose Edwards with regard to WebVR&lt;/a&gt; where I took that interest seriously.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;a href=&quot;https://threejs.org/&quot;&gt;three.js&lt;/a&gt; is a javascript library that uses WebGL to display 3D graphics. If one has done any work in the field of 3D modelling, picking up three.js should be only a gentle incline. There are familiar concepts such as geometry (cube, cylinder, sphere, etc), material (basic, lambert, phong, etc), texture (to be applied to materials) and a mesh (combining a geometry and a material)&lt;/p&gt;
&lt;p&gt;Over the next few weeks, I will write about the quirks I have learnt from three.js. But here is what I have learnt and made in two weeks &lt;a href=&quot;https://pandamakes.me/posts/first-steps-in-threejs/www.pandamakes.com.au/examples/tangerine/index.html&quot;&gt;link&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;There is no tutorial, because it takes time to write + code the logic for tutorial. WASD to move around, &lt;code&gt;W|A|S|D + L&lt;/code&gt; for dodge roll. &lt;code&gt;J + J&lt;/code&gt; etc … for attack.&lt;/p&gt;
&lt;p&gt;Currently, &lt;code&gt;W|A|S|D + J&lt;/code&gt; freezes the game, for reasons I might explore in the future.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Stream of consciousness - generic command line quirks</title>
		<link href="https://pandamakes.me/posts/stream-of-consciousness-generic-cli/"/>
		<updated>2017-02-27T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/stream-of-consciousness-generic-cli/</id>
		<content type="html">&lt;p&gt;Using imagemagick,&lt;/p&gt;
&lt;p&gt;convert pdf.pdf -density 400 png.png&lt;/p&gt;
&lt;p&gt;is different to&lt;/p&gt;
&lt;p&gt;convert -density 400 pdf.pdf png.png&lt;/p&gt;
&lt;p&gt;the latter works, the former doesn’t&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;to count the number of pages in a PDF document, instead of using&lt;/p&gt;
&lt;p&gt;identify -format %n pdf.pdf&lt;/p&gt;
&lt;p&gt;(uses imagemagick coupled with ghostscript. slow and inefficient), use&lt;/p&gt;
&lt;p&gt;pdfinfo pdf.pdf&lt;/p&gt;
&lt;p&gt;and catch the &lt;code&gt;stdout&lt;/code&gt; for the number of pages. pdfinfo is noticably faster, even on a 5 paged pdf document.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Stream of consciousness - Android/Java version</title>
		<link href="https://pandamakes.me/posts/stream-of-consciousness-androidjava-version/"/>
		<updated>2017-02-20T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/stream-of-consciousness-androidjava-version/</id>
		<content type="html">&lt;p&gt;AsyncTask: update UI Thread:&lt;br&gt;
&lt;code&gt;doInBackground()&lt;/code&gt; does not interact with UI thread, even if you invoke&lt;br&gt;
&lt;code&gt;runOnUIThread()&lt;/code&gt;&lt;br&gt;
runnable. It will just throw an error.&lt;/p&gt;
&lt;p&gt;To update UI, do runOnUIThread in &lt;code&gt;onPostExecute&lt;/code&gt; or &lt;code&gt;onProgressUpdate&lt;/code&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;In order to access files outside the sandbox (e.g. on internal/external storage), you need to explicitly state it in &lt;code&gt;AndroidManifest.xml&lt;/code&gt;. Otherwise, an error (EACCESS) will be thrown.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;This one is a bit cryptic: when you redraw UI elements, if element A overlaps with element B even just slightly, the one that’s drawn latest will be shown, and the one that’s drawn first will be completely invisible. Just avoid overlapping UI elements I guess.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Stream of consciousness - HTML quirks</title>
		<link href="https://pandamakes.me/posts/stream-of-consciousness-html-quirks/"/>
		<updated>2017-02-13T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/stream-of-consciousness-html-quirks/</id>
		<content type="html">&lt;p&gt;I believe I had known this quirk for a while, but &lt;code&gt;iframe&lt;/code&gt; cannot have its source point to a webpage not in the same domain as the host. Security feature. So that malicious codes cannot load an invisible iframe somewhere and run codes/capture info.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;there is a difference between&lt;/p&gt;
&lt;p&gt;$(&#39;#iframeID&#39;).attr(&#39;src&#39;,newURL)&lt;/p&gt;
&lt;p&gt;and&lt;/p&gt;
&lt;p&gt;document.getEelementById(&#39;iframeID&#39;).contentDocument.location.replace(newURL)&lt;/p&gt;
&lt;p&gt;The former code example push the change to history, the latter does not. Important to note if one with to control the behaviour of back button.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>How I built a python executable and ran it on Openshift (V2)</title>
		<link href="https://pandamakes.me/posts/how-i-built-a-python-executable-and-ran-it-on-openshift-v2/"/>
		<updated>2017-02-06T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/how-i-built-a-python-executable-and-ran-it-on-openshift-v2/</id>
		<content type="html">&lt;h2 id=&quot;background&quot; tabindex=&quot;-1&quot;&gt;Background &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/how-i-built-a-python-executable-and-ran-it-on-openshift-v2/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;The request was build something that can &lt;strong&gt;process PDFs&lt;/strong&gt;, &lt;strong&gt;crunch the data&lt;/strong&gt;, and &lt;strong&gt;post it&lt;/strong&gt; to another webhook.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;plan&quot; tabindex=&quot;-1&quot;&gt;Plan &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/how-i-built-a-python-executable-and-ran-it-on-openshift-v2/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Process PDF:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;JQuery (visual overlay + visual feedback) on front end, check format (pdf), ajax post&lt;/li&gt;
&lt;li&gt;NodeJS backend with multer, temporarily saving the said PDF&lt;/li&gt;
&lt;li&gt;spawn child process executing &lt;code&gt;convert pdf.pdf png.png&lt;/code&gt;. Openshift V2 comes with imagemagick preinstalled.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Crunching Data:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;???&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Posting Data:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;request post to required url&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&quot;details-re-png-processing&quot; tabindex=&quot;-1&quot;&gt;Details Re: PNG processing &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/how-i-built-a-python-executable-and-ran-it-on-openshift-v2/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;I have already written &lt;a href=&quot;http://wp.me/p7Zk8t-b5&quot;&gt;a post&lt;/a&gt; regarding trying to compile a linux executable. The said post was more of a stream of consciousness and less organised thoughts. I will attempt to summarise what was done correctly in this post.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Download &lt;a href=&quot;https://www.virtualbox.org/&quot;&gt;Virtual Box&lt;/a&gt; and install it on your host OS&lt;/li&gt;
&lt;li&gt;Download &lt;a href=&quot;https://wiki.centos.org/Download&quot;&gt;CentOS ISO &lt;strong&gt;v6.8&lt;/strong&gt;&lt;/a&gt; Why 6.8? From &lt;a href=&quot;https://rpmfind.net/linux/rpm2html/search.php?query=glibc&quot;&gt;rpmfinder&lt;/a&gt;, I can somewhat conclude that CentOS 6.8 ships (or upgrades) to glibc 2.12. Why is this important? Check out &lt;a href=&quot;http://www.pandamakes.com.au/cross-compiling-a-linux-executable-to-be-run-on-openshift/&quot;&gt;this post&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Follow the instruction on VirtualBox and create a virtual desktop with CentOS 6.8 as OS. NB: dedicate &lt;strong&gt;at least&lt;/strong&gt;16GB of hard disk. RAM: as much as possible. I dedicated 2GB on a 16GB machine. It ran fine.&lt;/li&gt;
&lt;li&gt;Remember to demount the ISO (or change the boot order). Failure to do so will result in CentOS been booted from the ISO over and over again.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now that the virtual box is setup, all of the work below will be done inside the virtualbox. This section is heavily borrowed from &lt;a href=&quot;http://techieroop.com/install-opencv-in-centos/&quot;&gt;this post&lt;/a&gt; with import addition from &lt;a href=&quot;http://answers.opencv.org/question/10651/cv2so-missing-after-opencv-installed/&quot;&gt;this thread&lt;/a&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Open Terminal, and&lt;/p&gt;
&lt;p&gt;sudo yum install cmake gcc gcc-c++ python-devel&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I find only these packages are necessary to install opencv2.4. Of course, if you need other packages, feel free to install them, too.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;http://opencv.org/downloads.html&quot;&gt;Download OpenCV2.4.13&lt;/a&gt; (latest 2.4 available at the time of writing) and unpack it&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;cd into opencv-2.4.13, then:&lt;/p&gt;
&lt;p&gt;mkdir release
cd release
cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D BUILD_opencv_python=ON ..&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;take note of the mix of cases and two full stops at the end.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Then:&lt;/p&gt;
&lt;p&gt;make
make install&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;To check the installation was successful:&lt;/p&gt;
&lt;p&gt;python&lt;/p&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;import cv2
print cv2.&lt;strong&gt;version&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If for any reason, you got&lt;/p&gt;
&lt;p&gt;cv2 is not a valid package name&lt;/p&gt;
&lt;p&gt;do:&lt;/p&gt;
&lt;p&gt;cp /usr/local/lib/python2.?/site-packages/cv2.so /usr/lib/python2.?/site-packages&lt;/p&gt;
&lt;p&gt;(change ? accordingly)&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;pyinstaller-on-python2-6&quot; tabindex=&quot;-1&quot;&gt;PyInstaller on Python2.6 &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/how-i-built-a-python-executable-and-ran-it-on-openshift-v2/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Nuitka failed to freeze my python script into an ELF, so I decided to give PyInstaller another shot. The problem is&lt;/p&gt;
&lt;p&gt;pip install pyinstaller&lt;/p&gt;
&lt;p&gt;produces an error, presumably because pyinstaller (latest version) is compatible with python 2.7+. I failed to realise that I could upgrade python to 2.7 without touching the glibc, but this turns out to be a blessing in its own way, as I side stepped the problem, by downloading &lt;a href=&quot;https://pypi.python.org/pypi/PyInstaller/2.1&quot;&gt;v2.1&lt;/a&gt;, which support python2.6. Unzip, and&lt;/p&gt;
&lt;p&gt;python setup.py install&lt;/p&gt;
&lt;p&gt;and pyinstaller freeze at my command.&lt;/p&gt;
&lt;p&gt;One more interesting quirk I found:&lt;/p&gt;
&lt;p&gt;pyinstaller script.py -F&lt;/p&gt;
&lt;p&gt;whilst this packages all the necessary libraries into a need binary, it needs to unpack in tmp folder, before the binary can run. This created the rather unfortunate event, where in the webhooks, I allowed &lt;strong&gt;five&lt;/strong&gt; of the childprocess to spawn their individual instances of the binary. This likely flooded the tmp folder usage. Not only was I unable to get any stdout from the said child processes, I was not able to transfer files via sftp, ssh and execute the binary (‘cannot create directory’, was the error message). Restarting the app does not clear the cache, but&lt;/p&gt;
&lt;p&gt;rhc app-tidy -a appname&lt;/p&gt;
&lt;p&gt;did the trick.&lt;/p&gt;
&lt;p&gt;At the end, I compiled the binary without the &lt;code&gt;-F&lt;/code&gt; flag. In a server environment, being a little unsightly is not the great sin.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;p-s-another-quirk-with-pyinstaller&quot; tabindex=&quot;-1&quot;&gt;P.S., another quirk with PyInstaller &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/how-i-built-a-python-executable-and-ran-it-on-openshift-v2/&quot;&gt;#&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;This probably does not grant a whole post by itself.&lt;/p&gt;
&lt;p&gt;pyinstaller script.v.1.2.py&lt;/p&gt;
&lt;p&gt;crashes with a cryptic error about an AssertionError. &lt;strong&gt;Remove all full stops&lt;/strong&gt; from the filename, except the one defining the extension fixes the problem.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>cross compiling a linux executable to be run on OpenShift</title>
		<link href="https://pandamakes.me/posts/cross-compiling-a-linux-executable-to-be-run-on-openshift/"/>
		<updated>2017-01-30T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/cross-compiling-a-linux-executable-to-be-run-on-openshift/</id>
		<content type="html">&lt;p&gt;I was asked to do something about the inefficient process of marking MCQ exam papers. This is my adventure trying to get it to work.&lt;/p&gt;
&lt;p&gt;I have written previously about a project where, multiple choice exam papers were marked by an Android app, and the result was sent to the server, where reports can be printed, and marks are tallied. I chose Android to do the bulk of heavy lifting, because I have gotten openCV to work on Android before, and there was not a lot of time to explore other options. However, after a term, the inefficiency of using an Android device is becoming apparent.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Android devices are scarce.&lt;/li&gt;
&lt;li&gt;the app is slow and cumbersome (as it needs to process each frame of the camera)&lt;/li&gt;
&lt;li&gt;the state of the test paper in real life scenarios not only reduce the resolution, but also distorts the geometry&lt;/li&gt;
&lt;li&gt;lighting heavily affects the marking process&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;So I was asked if I could do something via the scanned PDFs. Scanned PDFs can alleviate all of the above problems.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;Writing the program&lt;/strong&gt;&lt;br&gt;
Writing a program to run on my PC was almost too easy. I explored the possibility of detecting rectangles using &lt;code&gt;canny&lt;/code&gt; followed by &lt;code&gt;approxdp&lt;/code&gt;. They do not seem to work like I would like them to. Contamination from student writings will drastically affect the ability for the program to detect rectangles. At the end, I went with fixed positions given the size of the test paper. Less reliable if the scan was slanted, but, trade-offs.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;Making the program run on openshift&lt;/strong&gt;&lt;br&gt;
Now this is not so easy. I thought, I could just use PyInstaller, freeze the python into a single file,&lt;/p&gt;
&lt;p&gt;chmod +x executable &amp;amp;&amp;amp; ./executable&lt;/p&gt;
&lt;p&gt;Turns out, in order to compile a linux executable, I need to compile in an linux environment. Annoying, but no biggie, I thought. So I downloaded an Ubuntu ISO (which came with python), fired up &lt;em&gt;VirtualBox&lt;/em&gt;, installed &lt;em&gt;openCV&lt;/em&gt;, installed &lt;em&gt;pyinstaller&lt;/em&gt;, made the executable, made sure everything works fine (input, output, etc).&lt;/p&gt;
&lt;p&gt;I noticed that upon packing into a Linux executable, the performance took quite a significant hit. But no matter, I uploaded the executable (ELF), to the server, changed the permission, and fired it up, to which, I was greeted with the error:&lt;/p&gt;
&lt;p&gt;GLibC 2.14 is needed.&lt;/p&gt;
&lt;p&gt;Of course. It was too easy. I checked my system’s glibc version via&lt;/p&gt;
&lt;p&gt;ldd –version&lt;/p&gt;
&lt;p&gt;turns out to be 2.23. SSH into openshift, its glibc version was 2.12.&lt;/p&gt;
&lt;p&gt;At this stage, I have several options:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;attempt to recompile the ELF with glibc 2.12.&lt;/li&gt;
&lt;li&gt;attempt to update glibc version of openshift/find other hosts that provide glibc version 2.14+&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I briefly entertained with the idea, that if I &lt;a href=&quot;https://blog.openshift.com/enabling-python-27-on-a-paas-with-the-openshift-diy-app-type/&quot;&gt;updated python from 2.6 to 2.7 on openshift&lt;/a&gt;, it might also update the glibc version. Boy was I wrong.&lt;/p&gt;
&lt;p&gt;So I kept the possibility of finding another host at the back of my mind, whilst trying to recompile ELF with glibc 2.12 (or below).&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;There are quite a few people who ran into similar problems as me. But &lt;a href=&quot;http://stackoverflow.com/questions/847179/multiple-glibc-libraries-on-a-single-host&quot;&gt;solutions&lt;/a&gt; all seem rather non trivial. Possibly the most straight forward method is to find a legacy distribution of linux, which still sports glibc2.12, and compile the ELF there.&lt;/p&gt;
&lt;p&gt;I first tried the latest Fedora. glibc2.23, but supposedly with official support of RH. Didn’t work.&lt;/p&gt;
&lt;p&gt;Then, I found &lt;em&gt;CentOS6.x&lt;/em&gt; glibc2.12. Bingo, I thought. But pyinstaller would not work. pyinstaller apparently only works with python2.7+. But &lt;a href=&quot;http://nuitka.net/&quot;&gt;nuitka&lt;/a&gt; may work.&lt;/p&gt;
&lt;p&gt;So I installed the prereq’s, installed opencv. Hoping for the best.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Somehow, &lt;code&gt;import cv2&lt;/code&gt; could not find module named cv2. According to &lt;a href=&quot;http://techieroop.com/install-opencv-in-centos/&quot;&gt;this post&lt;/a&gt;, I need to copy cv2.so to the working folder of python. But cv2.so does not exist. After much digging, I found &lt;a href=&quot;http://answers.opencv.org/question/10651/cv2so-missing-after-opencv-installed/&quot;&gt;this post&lt;/a&gt;. Case sensitive, flag is accepted. Now it’s building. Hopefully, this time, it works.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;The &lt;code&gt;BUILD_opencv_python&lt;/code&gt; flag worked (for opencv2.4.13). Now, nuitka it to an ELF. It sure is taking its sweet time.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;nuitka failed to compile, but pyinstaller2.1 worked like a charm… what’s more, the ELF is smaller in size. WIN!&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Android Studio quriks: C is not a valid resource + image resources failing to be recognised by Gradle</title>
		<link href="https://pandamakes.me/posts/android-studio-quriks-c-is-not-a-valid-resource-image-resources-failing-to-be-recognised-by-gradle/"/>
		<updated>2017-01-23T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/android-studio-quriks-c-is-not-a-valid-resource-image-resources-failing-to-be-recognised-by-gradle/</id>
		<content type="html">&lt;p&gt;So I was playing with Android Studio a bit more, and two weird quirks:&lt;/p&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li&gt;I wanted to create an xml file as a layout file. What I should have done was navigate &lt;strong&gt;project structure (alt+1)&lt;/strong&gt; to &lt;strong&gt;app &amp;gt; res &amp;gt;&lt;/strong&gt;, right click on the &lt;strong&gt;layout&lt;/strong&gt; folder, and the context sensitive menu will allow me to create a xml layout file.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Instead, I navigated &lt;strong&gt;file &amp;gt; new &amp;gt; value resource file&lt;/strong&gt;, thinking that since it is also an xml file, all I have to do is move it to the right directory. Oh, how wrong was I. At least one of the problem I encountered was&lt;/p&gt;
&lt;p&gt;(Error:Error: &#39;C&#39; is not a valid file-based resource name character: File-based resource names must contain only lowercase a-z, 0-9, or underscore).&lt;/p&gt;
&lt;p&gt;I thought the problem originated from the xml codes. After much pouring over the codes, I found &lt;a href=&quot;http://stackoverflow.com/questions/32543884/error-s-is-not-a-valid&quot;&gt;this post&lt;/a&gt;. Turns out, even though resource xml files allow capital letters in its filenames, layout xml files do not.&lt;/p&gt;
&lt;hr&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;On replacing image resource files &lt;strong&gt;app&amp;gt;res&amp;gt;drawable&amp;gt;image.png&lt;/strong&gt;, to replace the image resource, I tried to delete the original resource file, and then, copying a new resource file of the same name to the specific folder. This turns out, is not such a brilliant idea. Gradle failed to compile my project. Restarting Android Studio did not help either.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;At that point, I imported the new graphic under a different name. And it seems, direct replacement (directly copy the file with the same name. When prompted if you would like to replace the old resource file, affirm). does not cause the same error.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Weird.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>MongoDB occupying excessive space (on openshift or otherwise)</title>
		<link href="https://pandamakes.me/posts/mongodb-occupying-excessive-space-on-openshift-or-otherwise/"/>
		<updated>2017-01-16T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/mongodb-occupying-excessive-space-on-openshift-or-otherwise/</id>
		<content type="html">&lt;p&gt;I was doing some daily maintenance on one of the client’s web service. the site was incredibly slow. Everything else is as fast as money vanishing in my bank account, what could be the cause? I decided to investigate. I thought I would first investigate the amount of space left on the app (which is deployed on Openshift).&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://pandamakes.me/web/20190303113321im_/https:/pandamakes.com.au/content/images/2018/01/mongomaintainence1.PNG&quot; alt=&quot;mongomaintainence1&quot;&gt;&lt;/p&gt;
&lt;p&gt;Goodness gracious. After 65 mb. The culprit must be elsewhere. So I delved into world wide web, hoping to find an answer. And an answer I found.&lt;/p&gt;
&lt;p&gt;According to the author of &lt;a href=&quot;http://www.overtakenbyevents.com/openshift-mongodb-out-of-diskspace/&quot;&gt;this blog post&lt;/a&gt;, mongodb allocates some space for journaling, in the event that write to DB fails. Doing what he did, I found:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://pandamakes.me/web/20190303113321im_/https:/pandamakes.com.au/content/images/2018/01/mongomaintainence2.PNG&quot; alt=&quot;mongomaintainence2&quot;&gt;&lt;/p&gt;
&lt;p&gt;Bingo. If I can help it, I would like to keep the journaling of mongodb. Meanwhile, I will monitor the usage weekly. If the space runs out too quickly, I will do what is necessary.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Attempt to improve OpenCV performance on Android</title>
		<link href="https://pandamakes.me/posts/attempt-to-improve-opencv-performance-on-android/"/>
		<updated>2017-01-09T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/attempt-to-improve-opencv-performance-on-android/</id>
		<content type="html">&lt;p&gt;OpenCV is an open sourced computer vision software developed for a number of popular OS such as windows, mac, linux, android and iOS. My main interest in OpenCV is application in mobile platforms such as android and iOS, where it can be used in AR applications.&lt;/p&gt;
&lt;p&gt;However, one of the most severe limitations is that mobile CPU is woefully slow comparing to desktop PCs. As a result, doing computer vision is incredibly taxing on mobile platforms.&lt;/p&gt;
&lt;p&gt;Framerate&lt;/p&gt;
&lt;p&gt;Operation&lt;/p&gt;
&lt;p&gt;Oppo F1s&lt;/p&gt;
&lt;p&gt;Native camera&lt;/p&gt;
&lt;p&gt;24+&lt;/p&gt;
&lt;p&gt;Load OpenCV only (No writing or processing)&lt;/p&gt;
&lt;p&gt;17-18&lt;/p&gt;
&lt;p&gt;Load OpenCV + writing Mat object(s) (no processing)&lt;/p&gt;
&lt;p&gt;17-18&lt;/p&gt;
&lt;p&gt;Load OpenCV + writing Mat object(s) + processing&lt;/p&gt;
&lt;p&gt;~8&lt;/p&gt;
&lt;p&gt;To improve the performance of OpenCV on mobile devices, I thought I would run processing on a non-UI thread. Turns out, according to (this thread)[http://stackoverflow.com/questions/31828704/android-opencv-app-crashes-on-ui-change] on stackoverflow, the onCameraFrame already runs on a non-UI thread.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Also important, if Mat object is large, do &lt;strong&gt;not&lt;/strong&gt; attempt to &lt;code&gt;mat.dump()&lt;/code&gt;. it will cause the app to crash, and the cryptic stacktrace is no help in diagnosing the problem.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;More OpenCV quirks.&lt;/p&gt;
&lt;p&gt;Features2d.drawKeypoints(Mat input, MatofKeyPoints keypoints, Mat output)&lt;/p&gt;
&lt;p&gt;Mat input has to be &lt;em&gt;8UC3&lt;/em&gt; or &lt;em&gt;8UC1&lt;/em&gt;. If it was 8UC4, it will throw a cryptic exception.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;More OpenCV quirks:&lt;/p&gt;
&lt;p&gt;DescriptorMatcher mMatcher = new DescriptorMatcher.create(&lt;em&gt;method&lt;/em&gt;);
mMatcher.match(Mat descriptor1,Mat descriptor2,MatOfDMatches matches);&lt;/p&gt;
&lt;p&gt;crashes if descriptor2.cols()==0 (presumably, it also crashes if &lt;code&gt;descriptor1.cols == 0&lt;/code&gt;).&lt;br&gt;
To prevent the crash, do:&lt;/p&gt;
&lt;p&gt;DescriptorMatcher mMatcher = new DescriptorMatcher.create(&lt;em&gt;method&lt;/em&gt;);
if(descriptor2.cols()==0){
return;
}
mMatcher.match(Mat descriptor1,Mat descriptor2,MatOfDMatches matches);&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Android Studio quirks:&lt;br&gt;
When you replace a .png file in res/drawable folder, gradle will fail to sync, with the following message:&lt;/p&gt;
&lt;p&gt;Error:Execution failed for task &#39;:app:processDebugResources&#39;.
&amp;gt; com.android.ide.common.process.ProcessException: org.gradle.process.internal.ExecException: Process &#39;command &#39;C:&#92;Users&#92;proto&#92;AppData&#92;Local&#92;Android&#92;sdk&#92;build-tools&#92;23.0.2&#92;aapt.exe&#39;&#39; finished with non-zero exit value 1&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>How to fix parent div ignoring child div height</title>
		<link href="https://pandamakes.me/posts/how-to-fix-parent-div-ignoring-child-div-height/"/>
		<updated>2017-01-02T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/how-to-fix-parent-div-ignoring-child-div-height/</id>
		<content type="html">&lt;p&gt;A new year!&lt;/p&gt;
&lt;p&gt;But of course, this post is written well ahead as a backlog for the weeks that I will be away (First to Melbourne, in order to attend a friend’s wedding, then go Sichuan, China, to see real pandas.) At the time of writing, I am not even sure who is the 45th President of the United S of A. So who knows. By the time this post is scheduled to be published, the world could be a smouldering ruin.&lt;/p&gt;
&lt;p&gt;Disregarding current affairs, we are here to talk about HTML and CSS. I was updating my personal website. Modifying the PHP code to my liking, when I found this bug:&lt;/p&gt;
&lt;p&gt;Notice how despite child divs have a well defined height, the parent div does not register. As a result, in our example, it takes 2px (min-height) as its height.&lt;/p&gt;
&lt;p&gt;A little bit of digging led me to &lt;a href=&quot;http://stackoverflow.com/questions/12540436/height-of-parent-div-is-zero-even-if-it-has-child-with-finite-heights&quot;&gt;this post&lt;/a&gt;. I adopted not the accepted answer, but the second highest voted answer. This let me to this fiddle:&lt;/p&gt;
&lt;p&gt;Victory!&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Unable to drag files from File Explorer to Notepad++</title>
		<link href="https://pandamakes.me/posts/unable-to-drag-files-from-file-explorer-to-notepad/"/>
		<updated>2016-12-26T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/unable-to-drag-files-from-file-explorer-to-notepad/</id>
		<content type="html">&lt;p&gt;So I recently updated Notepad++ to the latest version. I was asked to launch the program at the conclusion of the update, and I hit yes.&lt;/p&gt;
&lt;p&gt;However, I was not able to drag and drop files onto notepad++. Searching online for a possible cause of this phenomenon led me to &lt;a href=&quot;http://superuser.com/questions/507096/cant-drag-files-from-explorer-into-notepad-running-as-administrator-on-window&quot;&gt;this post&lt;/a&gt; on super user.&lt;/p&gt;
&lt;p&gt;I noticed notepad++ was opened as an administrator, as the title bar contains (Administrator). Closing and reopening notepad++, ensuring notepad++ was not run as an admin solve the problem. I am able to drag and drop the files onto Notepad++ again.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>sign in &amp;amp; outs – a perspective from a panda (conclusion)</title>
		<link href="https://pandamakes.me/posts/sign-in-outs-a-perspective-from-a-panda-conclusion/"/>
		<updated>2016-12-19T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/sign-in-outs-a-perspective-from-a-panda-conclusion/</id>
		<content type="html">&lt;p&gt;TL,DR&lt;/p&gt;
&lt;p&gt;Go with &lt;a href=&quot;http://www.pandamakes.com.au/webdesign/sign-in-outs-a-perspective-from-a-panda-part-4-open-authorisation-oauth/&quot;&gt;OAuth&lt;/a&gt; if you can.&lt;/p&gt;
&lt;p&gt;Alternatively, go with &lt;a href=&quot;http://www.pandamakes.com.au/webdesign/sign-in-outs-a-perspective-from-a-panda-part-3/&quot;&gt;salted and hashed passwords&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Use an adequate hashing algorithm (at the time of writing, SHA2).&lt;/p&gt;
&lt;p&gt;Two factor authentication/mobile authentication is also becoming increasing popular. Webservices that allow signin via qr code (such as &lt;a href=&quot;https://web.wechat.com/&quot;&gt;wechat&lt;/a&gt; and &lt;a href=&quot;https://line.me/en/&quot;&gt;line&lt;/a&gt;) and login apps such as &lt;a href=&quot;https://getclef.com/&quot;&gt;clef&lt;/a&gt; is slowly making passwords a thing of the past.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;a href=&quot;https://scotch.io/&quot;&gt;scotch.io&lt;/a&gt; recently published &lt;a href=&quot;https://scotch.io/bar-talk/how-companies-should-secure-your-passwords&quot;&gt;an article&lt;/a&gt; relevant to the topic of backend password storage. Yes, it is a sponsored content by Auth0. The article is nonetheless a very informative article.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>sign in &amp;amp; outs – a perspective from a panda (part 4: open authorisation- OAuth)</title>
		<link href="https://pandamakes.me/posts/sign-in-outs-a-perspective-from-a-panda-part-4-open-authorisation-oauth/"/>
		<updated>2016-12-12T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/sign-in-outs-a-perspective-from-a-panda-part-4-open-authorisation-oauth/</id>
		<content type="html">&lt;p&gt;I have developed webapps for quite sometime now, and I have worked on three major projects that require the user to authenticate in one way or another.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ITT: I will talk about the approaches I use to handle local signups and why I prefer clients use third party login instead.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;NITT: I won’t talk about language specific ways how the approaches can be achieved. Every mature language/platform should contain a way these approaches can be realised.&lt;/strong&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&quot;approach-four-use-open-authorisation-oauth&quot; tabindex=&quot;-1&quot;&gt;Approach Four: use open authorisation (OAuth) &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/sign-in-outs-a-perspective-from-a-panda-part-4-open-authorisation-oauth/&quot;&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;TL,DR: probably the best we could hope for.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;You probably have seen these already. When you want to sign up for a new service, you could either register a new account by supplying your full name, e-mail address, password (no shorter than 8 characters, with AT LEAST one letter, one number, one special character and one llamma), OR, you could sign in via Google, Facebook, Twitter … You thought to yourself, well, it saves me time, and I no longer have to go to my registered e-mail address, click on the stupid link, and I no longer have to remember an additional password. And if you were thinking of recycling password, shame on you.&lt;/p&gt;
&lt;p&gt;What you probably do not know, is that developers love this option, too. Developers do not need to worry about your passwords getting hacked, and they do not need to worry about hashing and salting anything. The developers will still need to keep track of the user data, but the information that are kept in their databases are no longer sensitive. The attacker, should they obtain access to the database, will see something akin to the following:&lt;/p&gt;
&lt;p&gt;name&lt;/p&gt;
&lt;p&gt;email&lt;/p&gt;
&lt;p&gt;authentication method&lt;/p&gt;
&lt;p&gt;panda&lt;/p&gt;
&lt;p&gt;panda@gmail.com&lt;/p&gt;
&lt;p&gt;google&lt;/p&gt;
&lt;p&gt;squirrel&lt;/p&gt;
&lt;p&gt;squirrel@gmail.com&lt;/p&gt;
&lt;p&gt;twitter&lt;/p&gt;
&lt;p&gt;koala&lt;/p&gt;
&lt;p&gt;koala@gmail.com&lt;/p&gt;
&lt;p&gt;facebook&lt;/p&gt;
&lt;p&gt;The attacker can likely see the email address (which, in most cases, doubles as login username). However, these companies should hopefully have beefy securities, stopping unauthorised access to the users’ google/facebook/twitter account.&lt;/p&gt;
&lt;p&gt;Are there risks to this method of authorisation? Yes. I will elaborate the risks (to the users) in a separate blog post&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>sign in &amp;amp; outs - a perspective from a panda (part 3: salt + hash)</title>
		<link href="https://pandamakes.me/posts/sign-in-outs-a-perspective-from-a-panda-part-3/"/>
		<updated>2016-12-05T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/sign-in-outs-a-perspective-from-a-panda-part-3/</id>
		<content type="html">&lt;p&gt;I have developed webapps for quite sometime now, and I have worked on three major projects that require the user to authenticate in one way or another.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ITT: I will talk about the approaches I use to handle local signups and why I prefer clients use third party login instead.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;NITT: I won’t talk about language specific ways how the approaches can be achieved. Every mature language/platform should contain a way these approaches can be realised.&lt;/strong&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&quot;approach-three-using-a-salt-and-hashing-algorithm-to-store-the-password&quot; tabindex=&quot;-1&quot;&gt;Approach Three: Using a salt and hashing algorithm to store the password &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/sign-in-outs-a-perspective-from-a-panda-part-3/&quot;&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;TL,DR: probably the best we could hope for.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;In the past two weeks, we have seen how storing usernames and passwords as plain-text is a very bad idea. Storing usernames and hashed passwords is a better approach, but still lacks in security. We will talk about salt + hash, which is yet more secure than just hashing the password&lt;/p&gt;
&lt;p&gt;Salt and hash is a method that specifically tries to counter two shortcomings of just hashing the password. Namely, social engineering and rainbow tables. The workflow of salt and hash is the following:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;on signup, generate a &lt;strong&gt;unique&lt;/strong&gt; string of characters for each new user. This random string of characters are known as a &lt;strong&gt;salt&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;calculate the hash of a string of characters, containing the password, followed by salt. e.g. if the password is michaeljackson and salt is ao2encm191, then the hash of michaeljacksonao2encm191 will be calculated. This hashed string is known as the &lt;strong&gt;salted hashed password&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;save the username, salted hashed password and salt into the database&lt;/li&gt;
&lt;li&gt;on signin, find user with the typed username&lt;/li&gt;
&lt;li&gt;calculate the hash of a string of characters, containing typed password followed by database stored salt&lt;/li&gt;
&lt;li&gt;compare the calculated salted hashed password with the stored salted hashed password. If the characters are the same, the authentication succeeds. Otherwise, the authentication fails.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Now, should an attacker gain access to your database, this is what they will see:&lt;/p&gt;
&lt;p&gt;username&lt;/p&gt;
&lt;p&gt;password&lt;/p&gt;
&lt;p&gt;salt&lt;/p&gt;
&lt;p&gt;hint&lt;/p&gt;
&lt;p&gt;panda&lt;/p&gt;
&lt;p&gt;7f2f1569adc6df56c79c43526184732a&lt;/p&gt;
&lt;p&gt;wa091k3&lt;/p&gt;
&lt;p&gt;favourite food&lt;/p&gt;
&lt;p&gt;squirrel&lt;/p&gt;
&lt;p&gt;9e99d88df248f42c145924189de77fdd&lt;/p&gt;
&lt;p&gt;91kacx&lt;/p&gt;
&lt;p&gt;thrill&lt;/p&gt;
&lt;p&gt;koala&lt;/p&gt;
&lt;p&gt;c655062d796cfc8c0771ce2299d88b10&lt;/p&gt;
&lt;p&gt;kk1nmo7&lt;/p&gt;
&lt;p&gt;is&#92;’t my kid&lt;/p&gt;
&lt;p&gt;Squirrel and koala, whilst using the same passwords, have different salted hashed passwords. This can potentially make social engineering answers a lot harder. Additionally, rainbow tables will likely not work, as the tables will need to be millions if not billions if not trillion times larger. The best part is, the salt can be stored in the database in plain text.&lt;/p&gt;
&lt;p&gt;The same caveat applies to the hashing method. Always use the latest hashing algorithms. It matters not if you are using salted hashed passwords, if your system can be compromised by brute force in 5 minutes or less. Modern (2016) computers can calculate MD5 extremely quickly. Use SHA2 (2016) or whichever hashing algorithm that is the standard.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>sign in &amp;amp; outs - a perspective from a panda (part 2: hash)</title>
		<link href="https://pandamakes.me/posts/sign-in-outs-a-perspective-from-a-panda-part-2/"/>
		<updated>2016-11-28T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/sign-in-outs-a-perspective-from-a-panda-part-2/</id>
		<content type="html">&lt;p&gt;I have developed webapps for quite sometime now, and I have worked on three major projects that require the user to authenticate in one way or another.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ITT: I will talk about the approaches I use to handle local signups and why I prefer clients use third party login instead.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;NITT: I won’t talk about language specific ways how the approaches can be achieved. Every mature language/platform should contain a way these approaches can be realised.&lt;/strong&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&quot;approach-two-using-a-hashing-algorithm-to-store-the-password&quot; tabindex=&quot;-1&quot;&gt;Approach Two: Using a hashing algorithm to store the password &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/sign-in-outs-a-perspective-from-a-panda-part-2/&quot;&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;TL,DR: better, but still, do &lt;em&gt;not&lt;/em&gt; do this!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Hashing algorithms is a method of scrambling a string of data. The beauty of hashing algorithms is that, given the same input, using the same hashing algorithm, one will always get the same output. For example:&lt;/p&gt;
&lt;p&gt;md5(&#39;coffee is delicious&#39;) = acbb7ff2245639a5fb74b7e4896f1c50&lt;/p&gt;
&lt;p&gt;Google any MD5 algorithms, and try to hash ‘coffee is delicious’ (without the single quotes), you will always get &lt;code&gt;acbb7ff2245639a5fb74b7e4896f1c50&lt;/code&gt;, regardless time of the day, architecture of the CPU, position of Mercury, etc.&lt;/p&gt;
&lt;p&gt;The workflow of a username/password backend involving hashing algorithms will thus look like the following:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;retrieve the username/password combination from signup page&lt;/li&gt;
&lt;li&gt;hash the password&lt;/li&gt;
&lt;li&gt;store the username and hashed password as two strings in a database&lt;/li&gt;
&lt;li&gt;when the user signs in, find the record in the database that matches the username input with username in the database&lt;/li&gt;
&lt;li&gt;hash the password input, and compare that with hashed password stored in the database.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Should hashed password database be breached, the intruder will see the following table:&lt;/p&gt;
&lt;p&gt;username&lt;/p&gt;
&lt;p&gt;password&lt;/p&gt;
&lt;p&gt;hint&lt;/p&gt;
&lt;p&gt;panda&lt;/p&gt;
&lt;p&gt;82960335036ff4ddc124b78af7777ee4&lt;/p&gt;
&lt;p&gt;favourite food&lt;/p&gt;
&lt;p&gt;squirrel&lt;/p&gt;
&lt;p&gt;8d38376baca2ecf4196e5e0529f48e48&lt;/p&gt;
&lt;p&gt;thrill&lt;/p&gt;
&lt;p&gt;koala&lt;/p&gt;
&lt;p&gt;8d38376baca2ecf4196e5e0529f48e48&lt;/p&gt;
&lt;p&gt;is&#92;’t my kid&lt;/p&gt;
&lt;p&gt;Hopefully, one of the problems associated with hashing is becoming clear to you. Both squirrel and koala had michaeljackson as their passwords. As a result, their hashed passwords are the same. With a little social engineering, the intruder can deduce that their password is michaeljackson&lt;/p&gt;
&lt;p&gt;The other problem with hashing password is that whilst in theory, it is extremely difficult to reverse engineer hashed passwords, there are ways to crack hashed passwords:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;What is known as ‘rainbow tables’, where popular passwords and their hashed strings have been calculated, and stored in very very very very VERY large spreadsheets. Each of the sheet is known as a rainbow table, which effectively serve as a dictionary, that translates hashed string to plain text passwords.&lt;/li&gt;
&lt;li&gt;Depending on the method of hashing, brute force may be a viable method to break the hashed passwords. At the time of writing, MD5 is &lt;strong&gt;not&lt;/strong&gt; a secure hashing algorithm. SHA1 is &lt;strong&gt;not&lt;/strong&gt; a secure hashing algorithm. SHA2 is the industry standard for now, but as the computing speed doubles roughly every four years, I am confident that SHA2 will become inadequate in the future, too.&lt;/li&gt;
&lt;/ol&gt;
</content>
	</entry>
	
	<entry>
		<title>sign in &amp;amp; outs - a perspective from a panda (part 1: plain text)</title>
		<link href="https://pandamakes.me/posts/web-developers-would-rather-you-sign-in-with-third-party-google-fb-etc/"/>
		<updated>2016-11-21T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/web-developers-would-rather-you-sign-in-with-third-party-google-fb-etc/</id>
		<content type="html">&lt;p&gt;I have developed webapps for quite sometime now, and I have worked on three major projects that require the user to authenticate in one way or another.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ITT: I will talk about the approaches I use to handle local signups and why I prefer clients use third party login instead.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;NITT: I won’t talk about language specific ways how the approaches can be achieved. Every mature language/platform should contain a way these approaches can be realised.&lt;/strong&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&quot;approach-one-store-plain-text-username-password-in-database&quot; tabindex=&quot;-1&quot;&gt;Approach One: Store plain text username/password in database &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/web-developers-would-rather-you-sign-in-with-third-party-google-fb-etc/&quot;&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;TL,DR: do &lt;em&gt;not&lt;/em&gt; do this!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The most straight forward approach to username/password problem might be:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;retrieve the username/password combination from signup page&lt;/li&gt;
&lt;li&gt;store the username and password as two strings in a database&lt;/li&gt;
&lt;li&gt;when the user signs in, find the record in the database that matches the username input with username in the database&lt;/li&gt;
&lt;li&gt;compare the value of the password input and the password stored in the database&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;There are several reasons why this is a very very bad idea. For one, should the database access become compromised, the intruder will see the following table, aptly named user (probably):&lt;/p&gt;
&lt;p&gt;username&lt;/p&gt;
&lt;p&gt;password&lt;/p&gt;
&lt;p&gt;hint&lt;/p&gt;
&lt;p&gt;panda&lt;/p&gt;
&lt;p&gt;bamboo&lt;/p&gt;
&lt;p&gt;favourite food&lt;/p&gt;
&lt;p&gt;squirrel&lt;/p&gt;
&lt;p&gt;michaeljackson&lt;/p&gt;
&lt;p&gt;thrill&lt;/p&gt;
&lt;p&gt;koala&lt;/p&gt;
&lt;p&gt;michaeljackson&lt;/p&gt;
&lt;p&gt;is&#92;’t my kid&lt;/p&gt;
&lt;p&gt;The intruder now has access to the users registered with your site. More importantly, since most users recycle their password, you have just put all of their accounts (google, facebook etc) in peril.&lt;/p&gt;
&lt;p&gt;Incidentally, if your system admin can tell you exactly what your forgotten password is, chances are, your password is being stored as a plain text password. Either approach your system admin to see it changed or change it to something harmless.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Anatomy of a website</title>
		<link href="https://pandamakes.me/posts/anatomy-of-a-web-presence/"/>
		<updated>2016-11-14T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/anatomy-of-a-web-presence/</id>
		<content type="html">&lt;p&gt;I have had to explain to a few clients about the process of constructing a web site. And so I thought, it is probably worthwhile compiling a TL,DR version, to which I could point future clients.&lt;/p&gt;
&lt;p&gt;Additionally, I having liberally included some existing products, which I have used in the past and could vouch for their quality. However, this is NOT a sponsored content. I simply would like my clients to know all of the alternatives as well as the various aspects of web design, and the cost they can expect.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;img src=&quot;https://pandamakes.me/web/20190303113427im_/https:/pandamakes.com.au/content/images/2018/01/website-anatomy.png&quot; alt=&quot;website-anatomy&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&quot;1-domain-hosting-must&quot; tabindex=&quot;-1&quot;&gt;1. Domain + Hosting (Must) &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/anatomy-of-a-web-presence/&quot;&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;This is where you buy the real estate of your online space.&lt;/p&gt;
&lt;p&gt;I found hover (domain) and zuver (domain + hosting) to be the most user friendly, without a premium price tag. Do your research before plunging in. If in doubt, ask your designer for advice.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Domain (e.g. www.yourbusiness.com) is like your electronic address (yes, you have to buy your address separately for your website)&lt;/li&gt;
&lt;li&gt;Hosting is like the electronic plot of land, where you can build your electronic shop front&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id=&quot;2-design-must&quot; tabindex=&quot;-1&quot;&gt;2. Design (Must) &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/anatomy-of-a-web-presence/&quot;&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;This is where webdesigners can build on the real estate you purchased. Which shape? Which colour? So many choices!&lt;/p&gt;
&lt;h4 id=&quot;2-1-logo-layout-colour&quot; tabindex=&quot;-1&quot;&gt;2.1 Logo + Layout + Colour &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/anatomy-of-a-web-presence/&quot;&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;Some web designers can help you decide on a logo, if you do not already have one.&lt;/p&gt;
&lt;p&gt;The logo will likely determine the major and minor colours of your website.&lt;/p&gt;
&lt;p&gt;Unless you have &lt;strong&gt;very specific&lt;/strong&gt; need in terms of layout and functionality of your website, your web designers will likely use one of the CMS (Content management systems) such as wordpress, drupal or joomla to build your virtual real estate.&lt;/p&gt;
&lt;h4 id=&quot;2-2-photos-and-graphics&quot; tabindex=&quot;-1&quot;&gt;2.2 Photos and graphics &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/anatomy-of-a-web-presence/&quot;&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;Relevant photos and graphics can make your website pop out from the rest. You can either commission a photographer or a graphic designer to shoot/custom design your ideal photographs and/or graphics, or pay for stock images/graphics.&lt;/p&gt;
&lt;h4 id=&quot;2-3-content&quot; tabindex=&quot;-1&quot;&gt;2.3 Content &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/anatomy-of-a-web-presence/&quot;&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;p&gt;There are two different types of content that are relevant to a website: static and dynamic. &lt;strong&gt;Static content&lt;/strong&gt; are the information that does not change very often. For example, your team bio, your company’s mission statement, address, contact info, etc. &lt;strong&gt;Dynamic content&lt;/strong&gt; are the information that changes frequently, such as blog posts (see below) or social media interactions.&lt;/p&gt;
&lt;p&gt;There is little or no outsourcing of this part. In order to accurately depict your company and your value, you will need to sit down and follow your designer’s request and provide contents such as company profile and team bios. You could get an intern to do it, if you are too busy. Dynamic content, are optional (see below), but probably can be drafted by an intern and edited by middle management.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&quot;3-seo-social-media-optional-but-helpful&quot; tabindex=&quot;-1&quot;&gt;3. SEO + social media (Optional, but helpful) &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/anatomy-of-a-web-presence/&quot;&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Search engine optimisation (SEO) and interacting with (potential) customers on social media are the two bottomless void. One can easily sink huge sum of money and time into perfecting these two hungry beasts. I will only briefly talk about what you can expect.&lt;/p&gt;
&lt;h4 id=&quot;3-1-social-media-presence&quot; tabindex=&quot;-1&quot;&gt;3.1 Social Media Presence &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/anatomy-of-a-web-presence/&quot;&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Frequent posts to social media accounts.&lt;/li&gt;
&lt;li&gt;Keep relevant posts : irrelevant posts ratio high&lt;br&gt;
However, some filler posts can humanise your business. After all, saying hello is a human nature.&lt;/li&gt;
&lt;li&gt;Provide timely response to customers’ enquiries&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;3-2-seo-the-basics&quot; tabindex=&quot;-1&quot;&gt;3.2 SEO (the basics) &lt;a class=&quot;header-anchor&quot; href=&quot;https://pandamakes.me/posts/anatomy-of-a-web-presence/&quot;&gt;#&lt;/a&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Submit links to search engines (such as Google, Bing, Yahoo, etc).&lt;/li&gt;
&lt;li&gt;Mobile friendly site&lt;/li&gt;
&lt;li&gt;Well maintained blog&lt;br&gt;
Frequently updated with relevant information. Having external sites link to your blog content is a huge bonus.&lt;/li&gt;
&lt;li&gt;Sitemap available&lt;/li&gt;
&lt;li&gt;Physical contact information&lt;br&gt;
Address, phone numbers etc.&lt;/li&gt;
&lt;li&gt;No dead links&lt;/li&gt;
&lt;/ul&gt;
</content>
	</entry>
	
	<entry>
		<title>Cost effective gallery plugin, Jetpack mobile theme</title>
		<link href="https://pandamakes.me/posts/cost-effective-gallery-plugin-jetpack-mobile-theme/"/>
		<updated>2016-11-07T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/cost-effective-gallery-plugin-jetpack-mobile-theme/</id>
		<content type="html">&lt;p&gt;I was looking for a gallery plugin that would showcase my photography, as well as the webapp pages. I was hoping screenshots can be neatly presented to showcase the capabilities of each of the webapps I have developed over the last year.&lt;/p&gt;
&lt;p&gt;I first found Robo Gallery. Robo Gallery is stunning, both in terms of the customisability as well as cleanliness of the plugin. But the free version comes with a 3 gallery limit. That was when I realised that most gallery plugins impose a limit on how many galleries you can create before nudging you in the direction of the paid plans. I was relatively happy with robo galleries, but I was not too keen on forking out 99USD to purchase the extended version. After the failed attempt (or rather, just the lack of enthusiasm) at unlocking the gallery limit at 3, I looked into the Gallery + Slideshow functionality offered by Jetpack.&lt;/p&gt;
&lt;p&gt;Jetpack is an in house extension of wordpress developed by Automattic (the creator and maintainer of WordPress, if I am not mistaken). It extends a lot of the existing features of WordPress, by implementing additional features such as site analytics, tiled gallery, lightbox slide shows and so on. Whilst the out of the box slide show did not offer as much customisations, it satisfied my needs. More importantly, it was available at the low low cost of 0AUD.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Now, remember the whole host of extensible functions offered by jetpack? Well, unbeknown to me, one of them was the mobile theme. Jetpack will automatically try to optimise your webpage on a mobile device. This takes place before the responsive themes. I guess this could be a god send for sites that do not use themes that are responsive, it led a panic attack on my part. I had done some PHP hack to remove certain design elements that I was not too fond of. I had thought that it is because the PHP codes were altered, the mobile theme was messed up intentionally by the developers of the theme. After an hour of frantic search and test, the culprit was found. Jetpack. Thou giveth, and thou taketh away.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>GoDaddy adventure (Oh fun)</title>
		<link href="https://pandamakes.me/posts/godaddy-adventure-oh-fun/"/>
		<updated>2016-10-31T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/godaddy-adventure-oh-fun/</id>
		<content type="html">&lt;p&gt;A client recently bought a domain and hosting from GoDaddy. I have heard some horrid stories from web go’ers. I guess I will experience first hand the pain?&lt;/p&gt;
&lt;p&gt;First problem, the wp-admin hangs indefinitely.&lt;/p&gt;
&lt;p&gt;Hmm… I am having trouble with cPanel at Zuver, too. Perhaps it’s the USB network share?&lt;/p&gt;
&lt;p&gt;Turns out, it takes a while for the DNS setting to propagate. However, even after a day, Zuver is &lt;strong&gt;significantly&lt;/strong&gt; faster than godaddy. I think I found the hover of hosting.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Headbanging mistake(s)</title>
		<link href="https://pandamakes.me/posts/headbanging-mistakes/"/>
		<updated>2016-10-24T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/headbanging-mistakes/</id>
		<content type="html">&lt;p&gt;Recently (well, as recently as 3rd Oct… there is a bit of back log associated with the journal entries), I have been working on a multi platform app which integrates an Android app (which captures an image, and does some data extraction), and sent to the server (which takes the data, and compile it into a report).&lt;/p&gt;
&lt;p&gt;Today, (3rd Oct), as I was putting everything together, I encountered head banging bugs plaguing the system. And all of them, turns out, are my own fault.&lt;/p&gt;
&lt;p&gt;Let’s count them, shall we?&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;forgot the append a flattened &lt;code&gt;ArrayList&lt;/code&gt; as one of the &lt;code&gt;formPart&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;forgot to change the URL of http call from localhost to live&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Huh, I guess there are only two mistakes. Well, I ain’t happy about it. &amp;gt;=(&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Android Studio quirks / OpenCV pitfalls</title>
		<link href="https://pandamakes.me/posts/android-studio-quirks/"/>
		<updated>2016-10-17T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/android-studio-quirks/</id>
		<content type="html">&lt;p&gt;Recently (as recently as this backlogs go, I suppose), I was asked to make an app/webapp that automatically marks multiple choice exams. Because there is a dead line, I figured I will use tools that I am familiar with, and decided to go with:&lt;/p&gt;
&lt;p&gt;An android app that runs openCV software, recognising exam paper template, performing warptransform and marks the exam using pixel depth. Then via http protocol, send to …&lt;/p&gt;
&lt;p&gt;A webapp, that takes the array of answers and compare them with the actual answers.&lt;/p&gt;
&lt;p&gt;Lots of lessons learnt along the way. Here are a few:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;classes such as &lt;code&gt;getSharedPref&lt;/code&gt; should be instantiated &lt;em&gt;after&lt;/em&gt; &lt;code&gt;super.onCreate&lt;/code&gt;. Doing so before crashes the app.&lt;/li&gt;
&lt;li&gt;ScrollView can only contain a single view. Therefore, wrap the desired views in a single linearlayout if you want to include, say, multiple imageviews in a scrollview&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;p&gt;Feeling chippy. Now, I can mostly diagnose why OpenCV crashes on me. Most of the time, it’s either the dimension ain’t right, or the depth ain’t right, or the number of channels ain’t right.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>More AngularJS 1.x quirks + precision arithmetic</title>
		<link href="https://pandamakes.me/posts/more-angularjs-1-x-quirks/"/>
		<updated>2016-10-10T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/more-angularjs-1-x-quirks/</id>
		<content type="html">&lt;p&gt;So I was redoing some work on the Angular webapp I was working on. I had &lt;code&gt;ngSanitize&lt;/code&gt; component, and was using &lt;code&gt;ng-bind-html&lt;/code&gt; to dynamically bind some stylised HTML contents. However, it seems &lt;code&gt;style&lt;/code&gt; tags do not work as intended. i.e.&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;div ng-app=&quot;app&quot;&gt;
&lt;div ng-controller=&quot;controller&quot;&gt;
&lt;div ng-bind-html=&quot;processRawData(rawData)&quot;&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;/p&gt;
&lt;p&gt;&lt;script&gt; var app = angular.module(&#39;app&#39;,[&#39;ngSanitize&#39;])
app.controller(&#39;controller&#39;,function($scope){
$scope.rawData = &#39;raw Data&#39;
$scope.processRawData = function(i){
return &#39;&lt;span style = &quot;width:97%&quot;&gt;&#39;+i+&#39;&lt;/span&gt;&#39;
}
})
&lt;/script&gt;&lt;/p&gt;
&lt;p&gt;does not work.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;First time Javascript floating point arithmetic precision came and bit me in the ass. Long story short,&lt;/p&gt;
&lt;p&gt;var sum = a + b + c
sum - b - a == 0 //false&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>OpenCV mask mat needs to be of 8UC1 or 8SC1</title>
		<link href="https://pandamakes.me/posts/opencv-mask-mat-needs-to-be-of-8uc1-or-8sc1/"/>
		<updated>2016-10-03T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/opencv-mask-mat-needs-to-be-of-8uc1-or-8sc1/</id>
		<content type="html">&lt;p&gt;Logic:&lt;/p&gt;
&lt;p&gt;cameraframe -&amp;gt; mRGB mat (8UC4)&lt;br&gt;
function(mRGB) returns mResult&lt;br&gt;
show mResult if mResult != 0, otherwise, show mRGB.&lt;/p&gt;
&lt;p&gt;In practice, this means I will need to create a mask mat, and mask mat needs to be &lt;code&gt;8UC1&lt;/code&gt; or &lt;code&gt;8SC1&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Simply performing&lt;/p&gt;
&lt;p&gt;mResult.convertTo(mMask, CvType.CV_8UC1)&lt;/p&gt;
&lt;p&gt;does not work, as mMask will have a channel count of 4. One needs to:&lt;/p&gt;
&lt;p&gt;mResult.convertTo(mMask, CvType.CV_8UC4) //or clone, or w/e
Imgproc.cvtColor(mMask,mMask,Imgproc.COLOR_RGBA2GRAY)&lt;/p&gt;
&lt;p&gt;and mMask will have a channel count of 1 and it can be used as a mat mask.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>OpenCV camera plight. Camera Calibration Matrix</title>
		<link href="https://pandamakes.me/posts/opencv-camera-plight-camera-calibration-matrix/"/>
		<updated>2016-09-26T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/opencv-camera-plight-camera-calibration-matrix/</id>
		<content type="html">&lt;p&gt;Secret project molens. Now that I am able to do pattern matching, uploading via http post request, having the server configured to translate the molecule to 3D coord, I need a way to project the 3D particles in to the reality.&lt;/p&gt;
&lt;p&gt;To do that, I will need to use Calib3D.solvePnP(MatofPoint3F objPoints, Matofpoint2F imgPoints, Mat cameraMatrix, MatofDouble distortionCoef, Mat rVec, Mat tVec)&lt;/p&gt;
&lt;p&gt;objPoints and imgPoints are easy enough. They represent the coordinates of the points in the 3D plane and 2D plane respectively. distortionCoef can be useful, but I am just going to let it be null and default to zero. The problem is cameraMatrix. The doc sugguests taking a series of checkerboard images to allow the camera to calibrate. I did not like the idea for two reasons. 1) I cannot reasonably expect an average user to be bothered with camera calibration. 2) CPU intensive. 3) Where in the world are they going to print the pattern?&lt;/p&gt;
&lt;p&gt;I think I will find an average cameraMatrix, and use it that way. To find out more about the camera calibration matrix, I stumbled across this video:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://pandamakes.me/web/20190303113215im_/https:/pandamakes.com.au/content/images/2018/01/Capture.PNG&quot; alt=&quot;Capture&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://youtu.be/4-thTdR7Blg&quot;&gt;youtube link&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;More shenanigans. The method:&lt;/p&gt;
&lt;p&gt;solvePnP(MatOfPoint3f objectPoints, MatOfPoint2f imagePoints, Mat cameraMatrix, MatOfDouble distCoeffs, Mat rvec, Mat tvec)&lt;/p&gt;
&lt;p&gt;even though the &lt;a href=&quot;http://docs.opencv.org/2.4/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#solvepnp&quot;&gt;doc&lt;/a&gt; said:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;distCoeffs&lt;/strong&gt; – Input vector of distortion coefficients (k_1, k_2, p_1, p_2[, k_3[, k_4, k_5, k_6]]) of 4, 5, or 8 elements. If the vector is NULL/empty, the zero distortion coefficients are assumed.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;passing &lt;code&gt;null&lt;/code&gt; to the function result in program crashing, with no explanation.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Android Studio/Java JSON from string exception</title>
		<link href="https://pandamakes.me/posts/android-studiojava-json-from-string-exception/"/>
		<updated>2016-09-19T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/android-studiojava-json-from-string-exception/</id>
		<content type="html">&lt;p&gt;While working on the secret project, molens, I made a webapp that receive a PNG image, translates to a 2D mol file using &lt;em&gt;imago&lt;/em&gt;, and then using &lt;em&gt;openbabel&lt;/em&gt; to translate it to a 3D mol file.&lt;/p&gt;
&lt;p&gt;The file will then be sent back either as a stringified JSON object or a file. I figured that if I return the mol file as a file, I will need to setup an inputstream and write it to a file, I might as well return the mol file as a stringified JSON.&lt;/p&gt;
&lt;p&gt;This is where I noticed I encountered the error on runtime:&lt;/p&gt;
&lt;p&gt;org.json.JSONException: End of input at character 0 of&lt;/p&gt;
&lt;p&gt;I initially thought it was because of the double quotes, i.e.&lt;/p&gt;
&lt;p&gt;{&amp;quot;file1&amp;quot;,&amp;quot;just some text here &#92;nA new line!&#92;n END&#92;n&amp;quot;}&lt;/p&gt;
&lt;p&gt;But it turns out, it was the back slashes. So in order to avoid the problem, I needed to escape the single backslashes.&lt;/p&gt;
&lt;p&gt;stringifiedJSON.replace(&amp;quot;&#92;&amp;quot;,&amp;quot;&#92;&#92;&amp;quot;)&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Also, it seems the IDE escapes special chars in a very special way. e.g.:&lt;/p&gt;
&lt;p&gt;String s = &amp;quot;ello, &#92;n i am ruth&amp;quot;;
String[] ss = s.split(&amp;quot;&#92;n&amp;quot;);
Log.i(&amp;quot;log&amp;quot;,ss[0]) //prints out : ello, &#92;n i am ruth&lt;/p&gt;
&lt;p&gt;Whereas&lt;/p&gt;
&lt;p&gt;String s = &amp;quot;ello, &#92;n i am ruth&amp;quot;;
String[] ss = s.split(&amp;quot;&#92;&#92;n&amp;quot;);
Log.i(&amp;quot;log&amp;quot;,ss[0]) //prints out : ello,&lt;/p&gt;
&lt;p&gt;I guess Android Studio escape it once so that its syntax is valid. It then escapes it again in regex. So the first exam is really splitting the string using &lt;code&gt;&#92;n&lt;/code&gt; the new line character.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Optimise OpenCV for mobile</title>
		<link href="https://pandamakes.me/posts/optimise-opencv-for-mobile/"/>
		<updated>2016-09-12T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/optimise-opencv-for-mobile/</id>
		<content type="html">&lt;p&gt;Playing with OpenCV for a bit more again. I start to appreciate the amount of calculation one needs to do on matrices.&lt;/p&gt;
&lt;p&gt;One trick, make the mat obj as small as possible. For example, when matchtemplate, the template image(thus mat obj) should be kept as small as possible.&lt;/p&gt;
&lt;p&gt;Even with minmaxloc, a 301×1 Mat obj takes too long.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://opencv.org/itseez-announces-release-of-accelerated-cv-library.html&quot;&gt;itseez announced Accelerated OpenCV.&lt;/a&gt; I couldn’t find any info on it other than the press release. So I can only imagine it is proprietary.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>HTML form hack</title>
		<link href="https://pandamakes.me/posts/html-form-hack/"/>
		<updated>2016-09-05T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/html-form-hack/</id>
		<content type="html">&lt;p&gt;Should have known this for a long time now. If either&lt;/p&gt;
&lt;p&gt;&lt;button type=&quot;submit&quot;&gt;button&lt;/button&gt;&lt;/p&gt;
&lt;p&gt;or&lt;/p&gt;
&lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;input&quot;&gt;&lt;/p&gt;
&lt;p&gt;exist inside a form tag, enter key will automatically send the form.&lt;/p&gt;
&lt;p&gt;Incidentally, you can capture the form before it is sent using jquery:&lt;/p&gt;
&lt;p&gt;$(&#39;#myForm&#39;).submit(function(e){
/* do things here */
//e.preventDefault() //or
//return false
//to prevent form submitting all together.
})&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>AngularJS 1.5.8 Uncaught Error: [$injector:modulerr] + Mongoose quirks</title>
		<link href="https://pandamakes.me/posts/angularjs-1-5-8-uncaught-error-injectormodulerr/"/>
		<updated>2016-08-29T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/angularjs-1-5-8-uncaught-error-injectormodulerr/</id>
		<content type="html">&lt;p&gt;Long story short.&lt;/p&gt;
&lt;p&gt;Doing some AngularJS. Keep on getting this error. First thought ngRoute needs to be included. Then ngResource.&lt;/p&gt;
&lt;p&gt;Turns out, just need to include angular component outside the&lt;/p&gt;
&lt;p&gt;$(document).ready(function(){})&lt;/p&gt;
&lt;p&gt;Also, turns out one cannot bind jquery actions such as&lt;/p&gt;
&lt;p&gt;$(&#39;#modal&#39;).modal(&#39;show&#39;)&lt;/p&gt;
&lt;p&gt;I have found a get around on SO, but implementation is too complicated and I would assume the debugging process also. So I hacked it a bit. I bound ng-mouseenter with angular and left the click event to js.&lt;/p&gt;
&lt;p&gt;Using mongoose to store data this time around. Saving entries … can be counter intuitive.&lt;/p&gt;
&lt;p&gt;For example,&lt;/p&gt;
&lt;p&gt;var lessonSchema = mongoose.Schema({
shortCode : String,
arrQuestions : Array,
progress : Number,
length : Number,
creator : String,
users : Array,
created : Date,
status : String,
})&lt;/p&gt;
&lt;p&gt;lessonSchema.methods.addAnswerToAnswerSheet = function(INDEX,answerJSON){
this.users[INDEX].answerSheet.push(answerJSON)
}&lt;/p&gt;
&lt;p&gt;And one of the entry looks like the following:&lt;/p&gt;
&lt;p&gt;{
&amp;quot;_id&amp;quot; : ObjectId(&amp;quot;57bda23bd796f12824d8b710&amp;quot;),
&amp;quot;status&amp;quot; : STATUS,
&amp;quot;created&amp;quot; : ISODate(&amp;quot;2016-08-24T13:33:47.831Z&amp;quot;),
&amp;quot;creator&amp;quot; : CREATOR,
&amp;quot;length&amp;quot; : 10,
&amp;quot;shortCode&amp;quot; : &amp;quot;xk4Wp&amp;quot;,
&amp;quot;users&amp;quot; : [ {
&amp;quot;strId&amp;quot; : ID,
&amp;quot;name&amp;quot; : NAME,
&amp;quot;answerSheet&amp;quot; : []
} ],
&amp;quot;arrQuestions&amp;quot; : [ {
&amp;quot;mark&amp;quot; : &amp;quot;&amp;quot;,
&amp;quot;space&amp;quot; : &amp;quot;&amp;quot;,
&amp;quot;answer&amp;quot; : ANSWER,
&amp;quot;question&amp;quot; : QUESTION,
&amp;quot;hashed_id&amp;quot; : HASHED_ID,
&amp;quot;subject&amp;quot; : SUBJECT,
&amp;quot;note&amp;quot; : &amp;quot;&amp;quot; },
...
],
&amp;quot;__v&amp;quot; : 2,
&amp;quot;progress&amp;quot; : 1
}&lt;/p&gt;
&lt;p&gt;and calling the methods does not seem to work as intended…. i.e.:&lt;/p&gt;
&lt;p&gt;var query = {...}
var index = INDEX
var json = JSON
var submitAnswer = Lesson.findOne(query,function(e,lesson){
if(e){
console.log(e)
}else{
lesson.addAnswerToAnswerSheet(index,json)
lesson.save(function(e1){
if(e1){
console.log(e1)
}
})
}
})&lt;/p&gt;
&lt;p&gt;does not save the document.&lt;/p&gt;
&lt;p&gt;I believe the error was that you cannot individually interact with a sub document, unless you define its schema. So to solve the problem, I defined each user as a different schema.&lt;/p&gt;
&lt;p&gt;var userSchema = mongoose.Schema({
name : String,
strId : String,
answerSheet : String /* stringified JSON objects */
})&lt;/p&gt;
&lt;p&gt;var lessonSchema = mongoose.Schema({
shortCode : String,
arrQuestions : Array,
progress : Number,
length : Number,
creator : String,
users : [userSchema],
created : Date,
status : String
})&lt;/p&gt;
&lt;p&gt;Seems to work just fine…&lt;/p&gt;
&lt;p&gt;UPDATE : (21/10/2016) mongoose not saving is a result of the model not recognising that the model had been changed. To force a save:&lt;/p&gt;
&lt;p&gt;doc.markModified(&#39;field&#39;) doc.save(function(e){ })&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>dabbling into wordpress woocommerce + woocommerce color (or not)</title>
		<link href="https://pandamakes.me/posts/dabbling-into-wordpress-woocommerce-woocommerce-color-or-not/"/>
		<updated>2016-08-22T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/dabbling-into-wordpress-woocommerce-woocommerce-color-or-not/</id>
		<content type="html">&lt;p&gt;Recently, I have been asked to renovate an old project.&lt;/p&gt;
&lt;p&gt;I made the previous website with &lt;em&gt;Joomla&lt;/em&gt;, using &lt;em&gt;virtuemart&lt;/em&gt; as the e-commerce solution. Turns out, the implementation is much easier with &lt;em&gt;woocommerce&lt;/em&gt; on &lt;em&gt;wordpress&lt;/em&gt;. Whilst sacrificing some customisability, it looks great out of the box. CSS is generated from SCSS, so it’s minified, and admittedly, difficult to search through.&lt;/p&gt;
&lt;p&gt;Gimmick: &lt;em&gt;woocommerce&lt;/em&gt; discontinued native support for colour and styling (at least as of ver 2.6.4). Plugins such as &lt;em&gt;woocommerce color&lt;/em&gt; allows for very limited colour customisation, but overwrites CSS. Lesson learnt the hard way indeed.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>restarting molens, secret project</title>
		<link href="https://pandamakes.me/posts/restarting-molens-secret-project/"/>
		<updated>2016-08-15T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/restarting-molens-secret-project/</id>
		<content type="html">&lt;p&gt;ok, enough time has been spent skirting around the problem. Time to tackle it again.&lt;/p&gt;
&lt;p&gt;This time, I think I will make the optical structure recognition on a server, and make the app make api calls to the server, allowing the server to respond with .mol info.&lt;/p&gt;
&lt;p&gt;I am already aware that the two options I have are &lt;a href=&quot;https://cactus.nci.nih.gov/osra/&quot;&gt;OSRA&lt;/a&gt;, originally hosted on NIH, now has its primary home over at sourceforge, whose maintainer is Igor Filippov, and &lt;a href=&quot;http://lifescience.opensource.epam.com/imago/index.html&quot;&gt;Imago&lt;/a&gt; from EPAM (formally known as GGA Software), most of the maintainers (and the company itself) seems to be situated in Russia. (What is with Russians and its monopoly on optical structure recognition?)&lt;/p&gt;
&lt;p&gt;I was originally going to go with OSRA, given it had a more reputable origin (NIH). But it has way too much dependencies. Given that most PaaS does not allow for sudo access, figuring out how to install all the dependencies is a pain. So I am opting for the webserver to work with Imago first.&lt;/p&gt;
&lt;p&gt;Now, to say that I have no experience with Imago is lying. I have had at least a couple of months of hard work trying to get Imago to work on an Android environment. I won’t repeat the pain here. If you are interested, look through the past posts containing Java as tags.&lt;/p&gt;
&lt;p&gt;I came across &lt;a href=&quot;http://blog.scottfrees.com/getting-your-c-to-the-web-with-node-js&quot;&gt;this post&lt;/a&gt;. In short, the author argued that there are three methods of incorporating C++ libraries into node.js (yes, I have already given up making a tomcat webapplication, which may be able to implement the java binding that came with the box. After all, why reinvent the wheel?)&lt;br&gt;
-automation&lt;br&gt;
-rewrite the binding with node-ffi (which I was aware of)&lt;br&gt;
-rewrite library in native js code&lt;/p&gt;
&lt;p&gt;After not so much deliberation, if epam imago offers command line interactions, perhaps, automation is the way to go?&lt;/p&gt;
&lt;p&gt;First hurdle. Whilst the automation works fine on my local host machine, on Openshift, it does not. It returns &lt;code&gt;EACCES error&lt;/code&gt;. After some digging, it seems it is likely some permission related issue. I am suspecting that child process that writes a file makes the sandbox nervous.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Configuring Notepad++ for EJS</title>
		<link href="https://pandamakes.me/posts/configuring-notepad-for-ejs/"/>
		<updated>2016-08-08T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/configuring-notepad-for-ejs/</id>
		<content type="html">&lt;p&gt;I use &lt;a href=&quot;http://www.embeddedjs.com/&quot;&gt;EJS&lt;/a&gt; as a templating tool in NodeJS applications. The syntax and usage reminds me much of php. Of course, EJS is a very different beast. One down side, however, is that there are no recognisable plugin in Notepad++ that recognises EJS. For a while, I endured and used javascript formatting, but life is getting harder without the ability to see nesting hierarchy. So I configured something that works (for the most part).&lt;/p&gt;
&lt;p&gt;This is by no means perfect. For example, it only tries to nest &lt;code&gt;&amp;lt;div&amp;gt;&lt;/code&gt; elements. But for my purpose, this is enough. My livelihood does not depend on writing notepad++ plugins after all.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://db.tt/OGx31HoM&quot;&gt;notepad++ ejs parser&lt;/a&gt;&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>twitter plight</title>
		<link href="https://pandamakes.me/posts/twitter-plight/"/>
		<updated>2016-08-01T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/twitter-plight/</id>
		<content type="html">&lt;p&gt;Not app development related this week. My twitter account has been behaving strangely lately. It suddenly started to follow a lot of strangers whom I don’t recognise. A lot of accounts in Arabic and Japanese. Going to see if I can single out the point of vulnerability:&lt;/p&gt;
&lt;p&gt;– password compromise : not unlikely, given so many different hacks happened in the last decade or so. But this does not seem to be the case. I changed password, and enabled two factor authentication, but the problem remains.&lt;br&gt;
– tweetdeck : I recently started using tweet deck to manage multiple accounts. This does not seem to be the problem either. I revoked tweetdeck access to my account, but the problem is persisting.&lt;br&gt;
– twitter for windows : biggest suspicion yet. Reason? Date of granting access : 1982 jan 1. Really? Revoked access to see if this solves the problem of annoying following.&lt;br&gt;
– twebble : another suspicious actor. twebble is the companion app for pebble used to access tweets on pebble. It could be that twitter API could be used maliciously.&lt;br&gt;
– twitter for mac : I do not use a mac, why do I have twitter for mac? Though this is likely the result of using tweet deck. Revoked access to see if this solves the problem.&lt;br&gt;
– twitter uses unencrypted communication, so on public wifi, follow requests were added by third party. (cookie snuffed?)&lt;br&gt;
– twitter for android&lt;br&gt;
– Twitter mobile app&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Bizarre behaviours of EJS + JS + git</title>
		<link href="https://pandamakes.me/posts/bizarre-behaviours-of-ejs/"/>
		<updated>2016-07-25T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/bizarre-behaviours-of-ejs/</id>
		<content type="html">&lt;p&gt;Playing with EJS recently. One of the most bizarre behaviours I noticed is with the switch case statements:&lt;/p&gt;
&lt;p&gt;&amp;lt;% switch(foo){case &#39;bar&#39;: %&amp;gt;
&amp;lt;% break; %&amp;gt;
&amp;lt;% } %&amp;gt;
&amp;lt;%# works %&amp;gt;&lt;/p&gt;
&lt;p&gt;&amp;lt;% switch(foo){ %&amp;gt;
&amp;lt;% case &#39;bar&#39;: %&amp;gt;
&amp;lt;% break; %&amp;gt;
&amp;lt;% } %&amp;gt;
&amp;lt;%# does not work %&amp;gt;&lt;/p&gt;
&lt;p&gt;Bizarre behaviour of JS (at least in node):&lt;br&gt;
&lt;code&gt;str.indexOf(&#39;foo&#39;)&lt;/code&gt;&lt;br&gt;
does not take regex, yet&lt;br&gt;
&lt;code&gt;str.search(&#39;foo&#39;)&lt;/code&gt;&lt;br&gt;
does take regex…&lt;/p&gt;
&lt;p&gt;Bizarre (but not so bizarre) behaviours of git:&lt;br&gt;
&lt;code&gt;git push&lt;/code&gt; does not seem to work on unsecured networks.&lt;br&gt;
But when you think about it, it makes total sense.&lt;/p&gt;
&lt;p&gt;update: looks like the above statement is not entirely right. I was able to perform &lt;code&gt;git push&lt;/code&gt; on a public network just now. perhaps it’s the network settings?&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>How I solved PassportJS not fetching facebook email address(es)</title>
		<link href="https://pandamakes.me/posts/how-i-solved-passportjs-not-fetching-facebook-email-addresses/"/>
		<updated>2016-07-18T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/how-i-solved-passportjs-not-fetching-facebook-email-addresses/</id>
		<content type="html">&lt;p&gt;Using the &lt;a href=&quot;http://passportjs.org/docs/facebook&quot;&gt;official doc&lt;/a&gt; or the &lt;a href=&quot;https://scotch.io/tutorials/easy-node-authentication-facebook&quot;&gt;guide from scotch.io&lt;/a&gt;, I could not fetch the e-mail address from facebook login. From &lt;a href=&quot;http://stackoverflow.com/a/32370813/6059235&quot;&gt;this response on SO&lt;/a&gt;, I made the following changes:&lt;/p&gt;
&lt;p&gt;/* does not work */
passport.use(&#39;facebookAuth&#39;,new facebookStrategy({
&#39;clientID&#39; : CLIENT-ID,
&#39;clientSecret&#39; : CLIENT-SECRET,
&#39;callbackURL&#39; : &#39;/auth/facebook/callback&#39;
function(accessToken, refreshToken, profile, done){
thirdpartylogin(&#39;facebook&#39;,profile,null,function(user){
return done(null,user);
})
}
))&lt;/p&gt;
&lt;p&gt;/* works */
passport.use(&#39;facebookAuth&#39;,new facebookStrategy({
&#39;clientID&#39; : CLIENT-ID,
&#39;clientSecret&#39; : CLIENT-SECRET,
&#39;callbackURL&#39; : &#39;/auth/facebook/callback&#39;,
&#39;profileFields&#39; : [&#39;id&#39;, &#39;emails&#39;, &#39;name&#39;]},
function(accessToken, refreshToken, profile, done){
thirdpartylogin(&#39;facebook&#39;,profile,null,function(user){
return done(null,user);
})
}
))&lt;/p&gt;
&lt;p&gt;Lo and behold, problem solved. Thanks SO!&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>How I solved </title>
		<link href="https://pandamakes.me/posts/how-i-solved-internaloautherror-failed-to-obtain-request-token-for-passportjs-google-authentication/"/>
		<updated>2016-07-11T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/how-i-solved-internaloautherror-failed-to-obtain-request-token-for-passportjs-google-authentication/</id>
		<content type="html">&lt;p&gt;I wanted to implement third party signin option for my webapp.&lt;/p&gt;
&lt;p&gt;Since my app runs on NodeJS, PassportJS was the obvious choice. I have already made local signin work, and I thought configuring third party signin options should not be too hard. But I was stumped for two hours, trying to figure out how to solve &lt;code&gt;InternalOAuthError: Failed to obtain request token&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Even if I followed &lt;a href=&quot;http://passportjs.org/docs/google&quot;&gt;PassportJS Doc&lt;/a&gt; or &lt;a href=&quot;https://scotch.io/tutorials/easy-node-authentication-google&quot;&gt;guide from Scotch.io&lt;/a&gt;, I kept on getting the error. I had initially thought it was &lt;code&gt;express-session&lt;/code&gt; not configured correctly. But &lt;a href=&quot;https://support.google.com/googleapi/answer/6158857?hl=en-GB&quot;&gt;Google’s official API console help&lt;/a&gt; stated: OAuth 2.0 client IDs.&lt;/p&gt;
&lt;p&gt;Using OAuth2.0 worked instantly.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Amazon Inspire... vs examcopedia (?)</title>
		<link href="https://pandamakes.me/posts/amazon-inspire-vs-examcopedia/"/>
		<updated>2016-07-04T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/amazon-inspire-vs-examcopedia/</id>
		<content type="html">&lt;p&gt;I read the news on Amazon Inspire last night (27/06/16, 1300 AEST), in bed &lt;a href=&quot;https://techcrunch.com/2016/06/27/amazon-jumps-into-online-learning-with-inspire-a-platform-for-free-crowdsourced-and-premium-materials/&quot;&gt;from tech crunch&lt;/a&gt;. My heart sank. On the one hand, I am over joyed that I have the vision to target the still under competed education market. On the other hand, I feel an unease, a sense of doom. There is no way I can compete against a tech giant like amazon. Yet, I feel a sense of excitement. I have worked in the front line. I know exactly what kind of software would work with me.&lt;/p&gt;
&lt;p&gt;One thing is for sure. Either seize the bull by its horn now, or give it up and cut my losses.&lt;/p&gt;
&lt;p&gt;The irony is, examcopedia is currently hosted on openshift, which uses aws as the infrastructure.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>examcopedia - basic functionality: done. time to market + secure more funding</title>
		<link href="https://pandamakes.me/posts/examcopedia-basic-functionality-done-time-to-market-secure-more-funding/"/>
		<updated>2016-06-27T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/examcopedia-basic-functionality-done-time-to-market-secure-more-funding/</id>
		<content type="html">&lt;p&gt;The basic functionality of examcopedia has been refined in the past few weeks. Now, it is at a presentable state. Next step is to promote the site and/or secure some funding to further develop it.&lt;/p&gt;
&lt;p&gt;I am thinking of writing to some parties which may have direct or indirect interest in seeing examcopedia grow. In the local scope, ATA, teacher’s health fund, in the global scope, google edu, microsoft.&lt;/p&gt;
&lt;p&gt;I have doubts. I am scared. Of the possibilities of failure. I am scared that I might not be good enough. I am scared that examcopedia might not be good enough. Even though I truly believe its potential. We should write in.&lt;/p&gt;
&lt;p&gt;I came across &lt;a href=&quot;http://andrewkelley.me/post/do-not-use-bodyparser-with-express-js.html&quot;&gt;this article&lt;/a&gt; whilst researching on bodyparser (which I believe is required for passport).&lt;/p&gt;
&lt;p&gt;I believe the issue had been resolved, as bodyparser no longer parsers multipart post requests.&lt;/p&gt;
&lt;p&gt;In the past week, I have had some success at trying to connect to potential stake holders. I realised that I needed to broaden my scope a little, or alternatively, pitch in a very different direction if I want to gain any success in the near future. I need to work on the pitch a lot better. I need to be able to deliver a good pitch even if I was drunk/hungover/very very tired. I was talking to my friend about what I was trying to do, and I sounded like Peter Russo at the end of House of Cards S1.&lt;/p&gt;
&lt;p&gt;Very quickly, fixed some small problems with timetabling. Almost allowed JS injection exploit.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Public appeal for Examcopedia</title>
		<link href="https://pandamakes.me/posts/public-appeal-for-examcopedia/"/>
		<updated>2016-06-20T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/public-appeal-for-examcopedia/</id>
		<content type="html">&lt;p&gt;I am currently doing rounds on finding support for my exam questions repository webapp, Examcopedia. Here is the spiel:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;The short version:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;The problem:&lt;/strong&gt; For educators, finding the right questions for exams and homework takes too long.&lt;br&gt;
&lt;strong&gt;The proposed solution:&lt;/strong&gt; free to use questions repository. Beta version of the webapp has already been built and operational (&lt;a href=&quot;http://examcopedia-pandamakes.rhcloud.com/&quot;&gt;examcopedia hosted on openshift&lt;/a&gt;).&lt;br&gt;
&lt;strong&gt;What I am asking:&lt;/strong&gt; funding, publicity, feedbacks, advice and contact information of those who may have any of the above.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;The long version:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Examcopedia is an exam questions repository app that allows educators to generate quizzes, exams or homework assignments from an encyclopaedia of questions. The questions are categorised by curricular syllabi, ensuring that the questions generated will always be relevant and timely.&lt;/p&gt;
&lt;p&gt;The app is currently in its beta stage. Users with access can add and view submitted questions. There are a lot more features I would like to implement in the future, such as&lt;br&gt;
– a reddit styled voting system, which would give new or upvoted questions more weight when questions are picked randomly&lt;br&gt;
– a Wikipedia styled editing system, where users can report or submit improvements to the existing questions, and moderators can approve them&lt;br&gt;
– A Optical character recognition module, which allow questions and suggested answers to be entered into the database by the means of photography&lt;br&gt;
– an API and a webportal, where homework assignments, exams and quizzes can be generated, submitted and marked online (eventually).&lt;/p&gt;
&lt;p&gt;The greatest benefactors of the app are freelance tutors and newly qualified teachers. They are often faced with tremendous societal and time pressure.&lt;/p&gt;
&lt;p&gt;I created this app a month ago (mid-May 2016) out of the frustration of trying to find and format suitable questions to be set as homework assignments for my students. The existing process is time consuming and tedious partly because it does not take advantage of the information revolution that has taken place.&lt;/p&gt;
&lt;p&gt;I sincerely believe examcopedia can bridge the existing technological chasm within the education sector. In the immediate future, this app can cut down the time required to find the most relevant questions for homework assignments and exams. In the long run, this may be one of the building blocks of the future of education, enabling technologies such as digital personal tutors, e-homework, e-examinations and virtual classrooms.&lt;/p&gt;
&lt;p&gt;So far, I have been the sole developer and sole stakeholder in this webapp. However, I realised that I would not be able to continue the development unaided. Therefore, I am hoping to attain some support from you regarding this project.&lt;/p&gt;
&lt;p&gt;If you can provide direct financial support, allowing me to finish this project, I will be eternally grateful, and will include you as one of the financial sponsors of the app. I estimate that it will take at most two more months of development for the webapp to be release worthy. As a result, if I can raise 2,000 AUD in total, I will be able to carry out this task. If you only wish to pledge a portion of that, I will still be grateful. Anything more than 100AUD, I will include you as a financial sponsor. I will be 100% transparent on all of the financial sponsorship, all of the confirmed donors will appear on my blog and on the official app site. Any amount raised in excess of the 2000AUD required to develop the app will be used to fund my next public good project.&lt;/p&gt;
&lt;p&gt;If you believe that your developers can do a better job, I will be more than happy to give you guys the source codes and the project at its existing state. We can negotiate the terms more thoroughly if you are indeed interested in developing this app.&lt;/p&gt;
&lt;p&gt;If you can offer any technical expertise or marketing help, I will fully appreciate your aid and acknowledge you as a technical supporter of the app.&lt;/p&gt;
&lt;p&gt;Additionally, I will also welcome teachers and tutors who are willing to share their workflow with me. Making the app more user friendly is on the top of my to-do list. I will be more than happy to acknowledge you as an information supporter of the app.&lt;/p&gt;
&lt;p&gt;If you would like to have a sit down conversation with me, feel free to email or leave a message. I will be more than happy to pop into your office or your local cafe for a chat (this offer is only valid for those in Sydney metro region of course).&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>How I dealt with persistent file storage on OpenShift PaaS</title>
		<link href="https://pandamakes.me/posts/how-i-dealt-with-persistent-file-storage-on-openshift-paas/"/>
		<updated>2016-06-13T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/how-i-dealt-with-persistent-file-storage-on-openshift-paas/</id>
		<content type="html">&lt;p&gt;&lt;strong&gt;Problem:&lt;/strong&gt; every time I push my local repository to OpenShift, files inside &lt;code&gt;public/img/&lt;/code&gt; gets overwritten/deleted. This is a problem, as the webapp allows users to upload images, which would not be uploaded on my local repository.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Cause:&lt;/strong&gt; apparently, this is the result of OpenShift clearing out the repo folder and rebuilding everything from scratch.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Futile attempts to rectify:&lt;/strong&gt; I have attempted to use &lt;code&gt;.gitignore&lt;/code&gt; as well as &lt;code&gt;.git/info/exclude&lt;/code&gt;, neither helped.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Eventual (temporary) solution:&lt;/strong&gt; I have decided to use &lt;code&gt;OPENSHIFT_DATA_DIR&lt;/code&gt; as a persistent storage. It only works if the application is non-scaling (my current application is non-scaling. Though I can foresee this being an issue in the future). I have rectified the codes as follows:&lt;/p&gt;
&lt;p&gt;fs.writeFile(&#39;public/img/&#39;+FILENAME);&lt;/p&gt;
&lt;p&gt;to&lt;/p&gt;
&lt;p&gt;app = require(&#39;express&#39;);
app.set(&#39;presistentDir&#39;,process.env.OPENSHIFT_DATA_DIR||&#39;public/img/&#39;);
fs.writeFile(app.get(&#39;presistentDir&#39;)+FILENAME);&lt;/p&gt;
&lt;p&gt;P.S. I had always thought app.get() is an asyc process and was sure it wouldn’t work. But I guess I was wrong.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>more of examcopedia</title>
		<link href="https://pandamakes.me/posts/173/"/>
		<updated>2016-06-06T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/173/</id>
		<content type="html">&lt;p&gt;As I was working on node.js application over the past weeks or so, I came across &lt;a href=&quot;http://blog.ragingflame.co.za/2015/2/6/resizing-images-in-nodejs-applications#comment-1862989718&quot;&gt;this post&lt;/a&gt;. In it, a commentor described how customised user inputs can potentially inject harmful codes. As a part of my current project utilises base64 encoded image blobs, I wonder if code injection can occur?&lt;/p&gt;
&lt;p&gt;It seems openshift has imagemagick installed by default. A simple &lt;code&gt;convert --version&lt;/code&gt; executed from ssh showed me. I have installed gm and imagemagick on my localmachine. The aim is to resize, rotate, and using high contrast to modify the images (particular the mobile uploaded one’s).&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>examcopedia (aka procrastination tool) phase 1 complete</title>
		<link href="https://pandamakes.me/posts/examcopedia-aka-procrastination-tool-phase-1-complete/"/>
		<updated>2016-05-30T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/examcopedia-aka-procrastination-tool-phase-1-complete/</id>
		<content type="html">&lt;p&gt;Today, 24th May 2016, marks an important day. I have completed the first phase of examcopedia. I agree, I am pretty bad at naming things. I have finished the submission and viewing interface. All that’s to do is just fleshing things out, and the painful, painful process of entering thousands of questions.&lt;/p&gt;
&lt;p&gt;Rather annoyingly, Openshift seems to impose &lt;a href=&quot;http://stackoverflow.com/questions/19982839/nodejs-fs-module-does-not-work-in-openshift&quot;&gt;some sort of limitations on fs module in node.js&lt;/a&gt;. I understand fs.exists() is deprecated, but fs.access() yielded me with a similar error. I will attempt fs.stat(), but I am not optimistic.&lt;/p&gt;
&lt;p&gt;Major progress so far. I fs.stat() works. Also, in the mean time, I was able to get the mobile upload to work, too. I was able to get HTML5 &lt;code&gt;&amp;lt;input type = &amp;quot;file&amp;quot; accept = &amp;quot;image/*;capture=camera&amp;quot;&amp;gt;&lt;/code&gt; in order to allow users to upload their photos from capturing from the camera or their local device.&lt;/p&gt;
&lt;p&gt;I was also able to make some major breakthroughs. Namely, I found that for node.js v1.4.5, in order to find the list of clients in a specific room, you use &lt;code&gt;io.sockets.adapter.rooms[roomname]&lt;/code&gt;. Returns undefined if no-one is in the room.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>New project. Or was that procrastination?</title>
		<link href="https://pandamakes.me/posts/new-project-or-was-that-procrastination/"/>
		<updated>2016-05-23T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/new-project-or-was-that-procrastination/</id>
		<content type="html">&lt;p&gt;Now that the timetable web app was complete. I am working on another project that interests me a great deal. Simply put, it’s an exam pooler. For now, I am calling it examcopedia. For now, I am only working on the UI, and will attach functionality to it in bits and pieces.&lt;/p&gt;
&lt;p&gt;Sometimes I wonder, if what I am just trying to avoid the huge mess at Imago.&lt;/p&gt;
&lt;p&gt;For the new project, I am calling examcopedia, I needed to allow users uploading images. Implementing fileinput and multer was a bit of trial and error. Lessons learnt are as follow:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;multer uses default directory of the system as opposed to the root of the project. This made me quite confused for quite some time about why it kept telling me the directory does not exist, and why it kept quoting &lt;code&gt;c:&#92;image&#92;&lt;/code&gt; . I wonder if it will work once it is uploaded to the web.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;edit: turns out ‘&#92;image’ and ‘image’ are the reason.&lt;/p&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;without a request parser, req.body will always return undefined in ajax calls in node js. Took me a good deal of an hour figuring that out.&lt;/li&gt;
&lt;/ol&gt;
</content>
	</entry>
	
	<entry>
		<title>Getting back to Imago + some other fleeting thoughts</title>
		<link href="https://pandamakes.me/posts/getting-back-to-imago/"/>
		<updated>2016-05-16T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/getting-back-to-imago/</id>
		<content type="html">&lt;p&gt;After a brief but useful refocusing of 3 weeks, I have dived again, head first, into Imago and making it work. Just a recap on it’s status:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;libimago_c.so&lt;/code&gt; provided by Epam does not work out of the box. It is compiled on Linux x86/x64, whereas android uses an ARM architecture. I needed to recompile it using ndk. Before the brief detour, I was having trouble recompiling the source files, because … well, the ndk could not find string.h. Turns out, there is a library of &lt;a href=&quot;http://developer.android.com/ndk/guides/cpp-support.html&quot;&gt;helper runtimes&lt;/a&gt;, that incorporates standard libraries. The one I needed was:&lt;/p&gt;
&lt;p&gt;//Application.mk
APP_STL := gnustl_static
APP_CPPFLAGS += -fexceptions&lt;/p&gt;
&lt;p&gt;There was a “wha??” moment a little bit later on, relating to opencv. While compiling, one of the module required &lt;code&gt;opencv2/opencv_module.hpp&lt;/code&gt;. I ended up finding it in the android sdk of opencv. Let’s hope it works just fine.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;dirent.h&lt;/code&gt; -&amp;gt; the one that came with imago required &lt;code&gt;windows.h&lt;/code&gt;. I am not compiling for a windows machine, and turns out, if I just removed dirent.h from the compiling folder, android ndk can find the suitable dirent.h. How fitting.&lt;/p&gt;
&lt;p&gt;Now, I remember I had to deal with problems associated with &lt;code&gt;windows.h&lt;/code&gt; before. I think perhaps it was only strictly needed on a windows compiler? So I guess I can safely take the file out? The issues we are dealing with here is Imago1.0 &lt;code&gt;lock_win.cpp&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Just my luck. I thought I had hit a wall yesterday, with the superatom_expansion.cpp requiring indigo, and indigo requiring &lt;em&gt;SYSV IPC&lt;/em&gt;, I had tweaked the said cpp file, so that it will always return the input without doing anything, thereby bypassing the requirement of indigo. This allowed me to compile imago2.0 with no issue so far. except for mips64, where there was a &lt;code&gt;variable tracking size limit exceeded&lt;/code&gt; error. Also, &lt;code&gt;log_ext.cpp $lu expected long unsigned int, but instead had unsigned int as input&lt;/code&gt;. Just warnings though. So far, nothing had failed to compile.&lt;/p&gt;
&lt;p&gt;Had some problems with java.awt. Android does not support awt natively. But lucky for me, the part of Imago that uses awt reads buffered image, which I did not need. I only needed png reader.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;As I was waiting for boost-for-android to be setup, link-hopping led me down a strange rabbit hole. Python webapp (newly created on openshift and cloned via git) &amp;gt; what is wsgi (webserver gateway interface) &amp;gt; google app engine uses wsgi. Oh, I wonder if google provide similar services to AWS &amp;gt; google translate api (wow proprietary softwares are really expensive) &amp;gt; I wonder if there are any opensource solutions out there? &amp;gt;&lt;a href=&quot;http://stackoverflow.com/questions/15108313/in-need-of-an-open-source-text-language-translation-api&quot;&gt;this thread on SO&lt;/a&gt; &amp;gt; what is phonegap &amp;gt; excitement&lt;/p&gt;
&lt;p&gt;The ability to translate HTML/CSS/JS into x platform apps is a nerd’s dream come true. Ever since Node.js + jqm, I have wondered if such a thing was possible.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Final touches on timetable app v2.0, modifying the Python app</title>
		<link href="https://pandamakes.me/posts/final-touches-on-timetable-app-v2-0-modifying-the-python-app/"/>
		<updated>2016-05-09T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/final-touches-on-timetable-app-v2-0-modifying-the-python-app/</id>
		<content type="html">&lt;p&gt;Did some final touch on the timetable app v2.0. I am more or less happy with its current state.&lt;/p&gt;
&lt;p&gt;Potential for future update: responsive + add student login. Likely not going to do those in quite some time.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://timetable-gened.rhcloud.com/&quot;&gt;Timetable App v2.0&lt;/a&gt; – current state took approx 14 days from scratch.&lt;/p&gt;
&lt;p&gt;spent a day to fix the responsive part of the app. I had not appreciated the processor power of a laptop vs a mobile phone. turns out, when there are a lot of blocks to render and attach listeners to, the app slowed to a crawl. My solution was to copy and paste the js file, and cut down the parts not applicable to the mobile platform (mousemove, mousedown etc). Hopefully, the mobile app can run a bit more smoothly now.&lt;/p&gt;
&lt;p&gt;Plagued by &lt;a href=&quot;http://philosopherdeveloper.com/posts/ghost-clicks-in-jquery-mobile.html&quot;&gt;jqm’s ghost clicking&lt;/a&gt;, supposedly because of the 300ms delay on touch devices. Going to try to see if &lt;a href=&quot;https://github.com/alexblack/google-fastbutton&quot;&gt;fast button&lt;/a&gt; can work its magic.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;A client recently asked me to revisit the python app, for some degree of formatting changes. This should not take too long, but since I have upgraded the laptop, I needed to reinstall python and report lab. Here is a nice piece of advice which I have heard from the internet.Restart CMD prompt after setting the environmental variables&lt;/p&gt;
&lt;p&gt;Otherwise, the changes will not be recognised.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Bizarre behaviour of JS + JS quirkiness.</title>
		<link href="https://pandamakes.me/posts/bizarre-behaviour-of-js/"/>
		<updated>2016-05-02T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/bizarre-behaviour-of-js/</id>
		<content type="html">&lt;p&gt;foo(x); //returns 9
foo{y); //returns 11&lt;/p&gt;
&lt;p&gt;foo(x)&amp;gt;foo(y); //returns true;&lt;/p&gt;
&lt;p&gt;function foo(a){&lt;br&gt;
/* do something here */&lt;br&gt;
return b;&lt;br&gt;
}&lt;/p&gt;
&lt;p&gt;Mind = Blown.&lt;/p&gt;
&lt;p&gt;Here is a fiddle&lt;/p&gt;
&lt;p&gt;I would gather to imagine it’s because JS treats foo(x) and foo(y) as text rather than numbers, so to solve it, wrap it like Number(foo(x)) and Number(foo(y))&lt;/p&gt;
&lt;p&gt;more JS quirks. This time my own fault. jquery selectors selects all elements that matches the description. for example:&lt;/p&gt;
&lt;p&gt;$(&#39;div#foo div:nth-child(2)&#39;)&lt;/p&gt;
&lt;p&gt;will select &lt;strong&gt;ALL&lt;/strong&gt; div elements that are second in its family tree, as long as it is a descendent of #foo. I knew this, but in the heat of the moment, it’s easy to forget.&lt;/p&gt;
&lt;p&gt;Finally made a mark. v2.0 of the timetable app is complete. It still lacks some of the features I would like, for example, letting students/parents login and see the subscribed sessions, and responsive timetables. But they will come in the future. Oh, this time, some quirky git features. It seems &lt;a href=&quot;http://stackoverflow.com/questions/22575662/filename-too-long-in-git-for-windows&quot;&gt;git on windows cannot parse filenames that are too long&lt;/a&gt;. And I have experienced this first hand. I will try using a git client to circumvent the problem.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>More detour. Some Node.js</title>
		<link href="https://pandamakes.me/posts/more-detour-some-node-js/"/>
		<updated>2016-04-25T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/more-detour-some-node-js/</id>
		<content type="html">&lt;p&gt;The timetable app is in shambles.&lt;/p&gt;
&lt;p&gt;Let me talk a little about the background of the timetable app. It first started as a visual basic/excel app. Very quickly, it became obvious that the slowness was just not going to cut The lack of portability (master file needed), the lack of customisation (prettiness) and the clunkiness of the excel/VB app just does not cut it. So some time Sep ’15, I pitched to my client of a web based timetable app. I built a prototype, and started working on the actual web app. Turned out, I learnt PHP and MySQL building the webapp, which I am eternally grateful. However, the app is showing its age. the codes are ugly, the site is slow, and full of bugs. It’s time to retire the site and make a new one.&lt;/p&gt;
&lt;p&gt;This time, I am planning to use &lt;em&gt;bootstrap&lt;/em&gt; for the layout, &lt;em&gt;node.js&lt;/em&gt; for real time update on the database and &lt;em&gt;angular js&lt;/em&gt; for binding the front end. I believe &lt;em&gt;Ruby on rails&lt;/em&gt; would do similar thing as node.js. I was just lazy, and didn’t want to learn ruby unless absolutely necessary.&lt;/p&gt;
&lt;p&gt;node.js quirk #1:&lt;/p&gt;
&lt;p&gt;app.get(&#39;/&#39;, function (req,res){
res.sendFile(&#39;index.html&#39;);
});&lt;/p&gt;
&lt;p&gt;returns an error:&lt;/p&gt;
&lt;p&gt;TypeError: res.sendFile is not a function&lt;/p&gt;
&lt;p&gt;So I was scratching my head, trying to identify the error, until I saw &lt;a href=&quot;http://stackoverflow.com/questions/28787518/undefined-error-while-trying-to-route-to-client-folder-using-express&quot;&gt;link&lt;/a&gt;, which is in contrary to other &lt;a href=&quot;http://stackoverflow.com/questions/26202150/express-js-error-express-deprecated-res-sendfile-use-res-sendfile-instead&quot;&gt;SO answers&lt;/a&gt; and the &lt;a href=&quot;http://www.tutorialspoint.com/nodejs/nodejs_express_framework.htm&quot;&gt;example&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;More quirk on node.js and socket.io. So I was testing the server client connection using socket.io, following the example &lt;a href=&quot;http://socket.io/get-started/chat/&quot;&gt;here&lt;/a&gt;. But I thought I’d add my own little flavour, namely instead of&lt;/p&gt;
&lt;p&gt;socket.emit(&#39;chat message&#39;,&#39;foo&#39;)&lt;/p&gt;
&lt;p&gt;I would use&lt;/p&gt;
&lt;p&gt;socket.emit(&#39;ping&#39;,&#39;foo&#39;)&lt;/p&gt;
&lt;p&gt;Whilst the &lt;code&gt;io.on(‘connection’,’foo’)&lt;/code&gt; fired correctly, the &lt;code&gt;socket.emit(‘ping’,’foo’)&lt;/code&gt; refuse to fire. I double/triple checked the spelling, and there does not seem to be any typos present. And suddenly, a flicker of brilliance, I though to myself, ping is a common connection term, maybe it’s reserved for special functions, like ‘connection’, and lo and behold, changing &lt;code&gt;ping&lt;/code&gt; to &lt;code&gt;ping pong&lt;/code&gt; solved my issue.&lt;/p&gt;
&lt;p&gt;ONWARDS, COMRADES! I am stoked.&lt;/p&gt;
&lt;p&gt;More Node.js quirks. I installed mysql via npm, for record control. But somehow, I was not able to connect according to the &lt;a href=&quot;https://www.npmjs.com/package/mysql&quot;&gt;documented method&lt;/a&gt;. What happened was, I was thrown the error&lt;/p&gt;
&lt;p&gt;Error: getaddrinfo ENOTFOUND&lt;/p&gt;
&lt;p&gt;Before anyone asks, I have restarted my node.js server, and made sure the xampp mysql server is up, at the right (3306) port. Well, either way, when I came back home, it worked. So who knows what happened. It’s likely that I did not have an internet connection, though all of the dependencies are installed locally, so I couldn’t see if there is anything else I needed.&lt;/p&gt;
&lt;p&gt;More quirkiness with jquery this time around.&lt;/p&gt;
&lt;p&gt;//$(&#39;#&#39;+i.hashed_id).remove(); //does not work
$(&#39;div&#39;).remove(&#39;#&#39;+i.hashed_id); //works&lt;/p&gt;
&lt;p&gt;What’s the deal?&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Detour, refocus</title>
		<link href="https://pandamakes.me/posts/detour-refocus/"/>
		<updated>2016-04-18T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/detour-refocus/</id>
		<content type="html">&lt;p&gt;Hitting a wall in Imago is really not fun, so I fancy the opportunity to revisit some of my older projects.&lt;/p&gt;
&lt;p&gt;One in particular. I reworked a client’s website, made it more colour suitable, added a dynamic background. Just have to work the login magic in when I get a chance. Though truth be told, I would really fancy redoing the timetable app.&lt;/p&gt;
&lt;p&gt;And this made me keenly aware of the necessity to backup before I do anything. When I was trying to migrate the site from my PC’s localhost to the live site, I was (supposed to) change the wordpress address url and site url to the corresponding one’s. Due to a typographical error, I typed the wrong info, and was not able to return to the setting page (since the setting page in wordpress is accessed via a webpage. There is a work around, namely&lt;/p&gt;
&lt;p&gt;define(‘WP_HOME’,’http://YOURURL.HERE/’);&lt;br&gt;
define(‘WP_SITEURL’,’http://YOURURL.HERE’);&lt;/p&gt;
&lt;p&gt;It’s not ideal, though.&lt;/p&gt;
&lt;p&gt;Trying to learn node.js. Going to use OpenShift as a playground. Upon trying to install the client tools using the instruction on &lt;a href=&quot;https://developers.openshift.com/getting-started/windows.html#client-tools&quot;&gt;their site&lt;/a&gt;, I encountered the error:&lt;br&gt;
&lt;code&gt;rhc setup gives error ‘no such file dl/import’&lt;/code&gt;&lt;br&gt;
Turns out, just like python, using an earlier version worked like a charm. Re downloaded/installed ruby 2.0 rather than 2.2 solved the problem.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Imago, hit a wall?</title>
		<link href="https://pandamakes.me/posts/opencv-hit-a-wall/"/>
		<updated>2016-04-11T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/opencv-hit-a-wall/</id>
		<content type="html">&lt;p&gt;So I am able to load the jna interface for android. Turns out, I had to put the libjnidispatch.so in app/src/main/jniLibs/(platform)/&lt;/p&gt;
&lt;p&gt;But a new problem arises.&lt;/p&gt;
&lt;p&gt;java.lang.UnsatisfiedLinkError: Unable to load library &#39;/lib/Linux/x86/libimago_c.so&#39;: Native library (lib/Linux/x86/libimago_c.so) not found&lt;/p&gt;
&lt;p&gt;the &lt;code&gt;libimago_c.so&lt;/code&gt; exist in the .jar file, but android is unable to unpack in situ. Let’s see if I can re-route the resource path? And put the .so file in there?&lt;/p&gt;
&lt;p&gt;I was under the impression that any .so library files should be stored in jniLibs/(arch)/ folder, and it will be packaged by gradle. In fact, I tested the matter of fact out, and Native.library loaded other .so files without a hitch.&lt;/p&gt;
&lt;p&gt;Something wrong with with the &lt;code&gt;libimago_c.so&lt;/code&gt; then?&lt;/p&gt;
&lt;p&gt;I have three things left to try:&lt;/p&gt;
&lt;p&gt;a) see if the android studio can read &lt;code&gt;libimago_c.so&lt;/code&gt; at all.&lt;br&gt;
b) use cpp/h version, as per outlined in the examples&lt;br&gt;
c) use osra.&lt;/p&gt;
&lt;p&gt;One final thought this week. So JNA = native.loadlibrary requiring interface declaration, whilst jni = system.loadlibrary, requiring jni wrapper header file (somehow).&lt;br&gt;
either way, the library is architecture specific. Ugh, headache.&lt;/p&gt;
&lt;p&gt;Now, I need to compile imago source file according to armeabi-v7a architecture.&lt;/p&gt;
&lt;p&gt;Minor minor victory: finally sorted out the error&lt;/p&gt;
&lt;p&gt;****make.exe No rule to make target ‘directory/foo.cpp’, needed by ‘directory1/foo.o’. Stop.&lt;/p&gt;
&lt;p&gt;Turns out, I needed to go into the jni folder, before ndk-build.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>More OpenCV p3</title>
		<link href="https://pandamakes.me/posts/more-opencv-p3/"/>
		<updated>2016-04-04T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/more-opencv-p3/</id>
		<content type="html">&lt;p&gt;Getting error when I attempt to get transformation matrix.&lt;/p&gt;
&lt;p&gt;Core.perspectiveTransofrm(Matofpoint input, Matofpoint output, Mat transformationMatrix).&lt;/p&gt;
&lt;p&gt;Looks like I needed to declare &lt;code&gt;transformationMatrix&lt;/code&gt; as &lt;code&gt;3,3,CvType.CV_32F&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Foolishly, I had used &lt;code&gt;&amp;lt;imageView ... /&amp;gt;&lt;/code&gt; instead of &lt;code&gt;&amp;lt;ImageView ... /&amp;gt;&lt;/code&gt; the result was lots of errors. But it’s fixed now.&lt;/p&gt;
&lt;p&gt;OpenCV is in all kinds of disarray, as least the java version. Perhaps it’s just me, but in order to do a perspective transform, there appears to be two different solutions, either &lt;code&gt;Core.perspectiveTransform(src,dst,output)&lt;/code&gt; and the other be &lt;code&gt;ouput = Imgproc.getPerspectiveTransform(src,dst)&lt;/code&gt;. Why are there two different functions? Since they are both in the documentations, perhaps they do different things. Well, not really. the one that works is &lt;code&gt;output = Imgproc.getPerspectiveTransform(src,dst)&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Also, this discrepancy highlights another inconsistency in OpenCV. Take a look at Canny tranformation or find contour:&lt;/p&gt;
&lt;p&gt;Canny transformation: &lt;code&gt;Imgproc.Canny(src,ouput,threshold1,threshold2)&lt;/code&gt;&lt;br&gt;
Find contour: &lt;code&gt;Imgproc.findContours(src, output, hierarchy, mode, method)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;and compare that with getPerspectiveTransform:&lt;/p&gt;
&lt;p&gt;getPerspectiveTransform: &lt;code&gt;output = Imgproc.getPerspectiveTransform(src,dst)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Spot the difference?&lt;/p&gt;
&lt;p&gt;I am starting to see the reasons why an incoherent ecosystem of hardwares is such a headache for software developers. When I am trying to import the IMAGO library, it distinguishes if the OS architecture is 32 or 64bit. But getting that information programmatically can be extremely tricky. One trick was to use os.arch, with a 64bit OS, it should output aarch64. But not always. Well that was strange. I suppose that is what programmers have to contend with when they are dealing with low level codes.&lt;/p&gt;
&lt;p&gt;I have just e-mailed the guy from epam. I do not know if he will get back to me.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>More OpenCV p2</title>
		<link href="https://pandamakes.me/posts/more-opencv-p2/"/>
		<updated>2016-03-28T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/more-opencv-p2/</id>
		<content type="html">&lt;p&gt;More struggling with OpenCV this week. I will have to remember. Computer start counting at 0, not 1.&lt;/p&gt;
&lt;p&gt;Bizarre behaviours of hierarchy in findContours. even though &lt;code&gt;hierarchy.size()&lt;/code&gt; show 32×1, for eg, but it is really 1×32. In fact, when you access hierarchy matrix elements, you gain access to an array of doubles, even though they are suppose to be pointers to elements in the contour identifying as next sibling, previous sibling, parent or child.&lt;/p&gt;
&lt;p&gt;After much struggle, it seems I had to use &lt;code&gt;Imgproc.RETR_TREE&lt;/code&gt; rather than &lt;code&gt;Imgproc.RETR_COMPP&lt;/code&gt;. Wasted a good two days. Well, at least now I can reliably detect the desired edges.&lt;/p&gt;
&lt;p&gt;So I quickly move to the next phase, installing the optical recognition library necessary. Filled in the necessary info, only to realise that I downloaded v1.0. Does not appear to have v2.0 in java, only in c. Oh, jokes on me.&lt;/p&gt;
&lt;p&gt;OpenCV 3.0: &lt;code&gt;perspectiveTransoform()&lt;/code&gt; is in &lt;code&gt;Core&lt;/code&gt;, and yet &lt;code&gt;wrapPerspective()&lt;/code&gt; and &lt;code&gt;getPerspectiveTransform()&lt;/code&gt; is in &lt;code&gt;Imgproc&lt;/code&gt;? How does this even make sense?&lt;br&gt;
Ok, ok, it’s not image processing. Woe is me, I guess.&lt;/p&gt;
&lt;p&gt;Now, why… Where are there two different MatofPoints datatypes in OpenCV? There is MatofPoints, used for drawing contours, and then, there’s the MatofPoints2f (more if you go 3f, etc) if you want to approximate fit a polygon. Conversion is clumsy. One have to use &lt;code&gt;MatofPoints.convertTo(outputMatofPoints2f, CvType.CV_32FC2)&lt;/code&gt; and vice versa (swapping 32FC2 to 32S) for conversion. Somewhat headachy. But at least this part is done.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>More on OpenCV + trends in web development</title>
		<link href="https://pandamakes.me/posts/more-on-opencv/"/>
		<updated>2016-03-21T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/more-on-opencv/</id>
		<content type="html">&lt;p&gt;I have uncovered a few more new discoveries in the passing week.&lt;/p&gt;
&lt;p&gt;Firstly, loading the app into my Android phone drastically improved the performance of the app. I suspect this had something to do with the amount of virtual RAM that I have allotted to the Virtual Machine.&lt;/p&gt;
&lt;p&gt;Secondly, I found out the reason for the weird colouration of the rgba output of the preview frame. The problem had something to do with how the frame is encoded and decoded. In short, the problem is non-existent on actual android devices, and only becomes a problem in virtual machines.&lt;/p&gt;
&lt;p&gt;Thirdly, one thing that annoyed me a great deal was how OpenCV seems to fetch a 600×480 rectangle. More annoyingly, the onCameraFrame method has to return a Mat object with the same dimension as the one initialised at onCameraViewStarted(int width, int height). Any other dimension, the camera preview will display black, not even a cropped image. Another quirk I found was that the Imgproc.Canny operation automatically converts a Mat object to a greyscale Mat object, even if it was initialised as &lt;code&gt;CvType.CV_8UC4&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;What else, so much changes between versions. I believe I have already talked about &lt;code&gt;Core.line&lt;/code&gt; vs &lt;code&gt;Imgproc.line&lt;/code&gt;. There is also now &lt;code&gt;CV_RGB2GRAY&lt;/code&gt; vs &lt;code&gt;Imgproc.COLOR_RGB2GRAY&lt;/code&gt;. I guess I have learnt to search for the right version.&lt;/p&gt;
&lt;p&gt;More things learnt along the way: when compiling a List , such as Imgproc.findContours, the return results gets appended to the old one. So unless one does a &lt;code&gt;List.clear();&lt;/code&gt;, the list will grow larger and well… with devastating consequences. (For one, if one wishes to search through all of the geometric shapes that fits the bill, and at frame 1 finds it at, say pt1, pt2, p3, but at frame 2, the camera had moved, so the frame finds it at pt4, pt5, pt6, the array will remember both elements. If you are to colour the shapes, you get a trail of geometric shapes, essentially).&lt;/p&gt;
&lt;p&gt;Looking around me now, there seems to be a lot of buzzwords appearing in web development. RESTful seems to be thrown around a lot, seemingly out of nowhere. And then, there was &lt;em&gt;AngularJS&lt;/em&gt;, &lt;em&gt;NodeJS&lt;/em&gt;, &lt;em&gt;React&lt;/em&gt; etc. It is quite scary. Am I ever going to catch up?&lt;/p&gt;
&lt;p&gt;Having just looked at SASS + Compass… I have to say, it’s really really REALLY exciting to learn.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Fixing timetable.php and (a little bit) more openCV</title>
		<link href="https://pandamakes.me/posts/fixing-timetable-php-and-a-little-bit-more-opencv/"/>
		<updated>2016-03-14T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/fixing-timetable-php-and-a-little-bit-more-opencv/</id>
		<content type="html">&lt;p&gt;I was going to fix the web app i made awhile ago, implementing a few more features.&lt;/p&gt;
&lt;p&gt;I wanted to better the login security of the site. Of course, I do not have access to SSL encryption or two factor authentication, but the least I could do is salting and hashing the password. This way. I also added a security token whenever users login, so that they cannot just modify the cookie and gain admin rights. I fully understand this will only protect against internal attacks, and useless against man-in-the-middle attack, but, it might be the best I can do for now. I got it done early, only to be greeted by a bug, that overwrite the last timetable. long story short, I was trolled by &lt;code&gt;if (a = b) {do something}&lt;/code&gt; amatuer mistake.&lt;/p&gt;
&lt;p&gt;I had some time, so I also made a tutorial layer. When get a chance, I really should improve on the design aspect. The tutorial layer looks decent, but the handwriting was crap.&lt;/p&gt;
&lt;p&gt;Regardless, the app is behind me now. Refocusing on opencv project. First order of business: figuring out what to do with the mat object in opencv.&lt;/p&gt;
&lt;p&gt;So it seems &lt;code&gt;Core.line&lt;/code&gt; has been deprecated. Imgproc.line is to be used. Which certainly means it helps to read which documentation I should be reading.&lt;/p&gt;
&lt;p&gt;Also, in opencv, it seems Houghlines gives lines in terms of rho and theta, whereas HoughlinesP gives results in terms of x1,y1, x2, y2. The latter is what I need.&lt;/p&gt;
&lt;p&gt;It seems processing every frame is too cpu intensive. To lessen the load, I added a line which would only process cpu when it has been two seconds since the last process.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Adventuring into Android studio, Java and OpenCV (with an unexpected detour)</title>
		<link href="https://pandamakes.me/posts/adventuring-into-android-studio-java-and-opencv-with-an-unexpected-detour/"/>
		<updated>2016-03-07T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/adventuring-into-android-studio-java-and-opencv-with-an-unexpected-detour/</id>
		<content type="html">&lt;p&gt;Following on from the previous week’s progress, this week, we are trying to make progress towards OpenCV to be used on an android platform. I have encountered problem of course.&lt;/p&gt;
&lt;p&gt;Firstly, there was the issue of Android Studio not recognising hardware.camera, and threw me a number of errors. Turns out, I needed to update the target SDK across different build.gradle files.&lt;/p&gt;
&lt;p&gt;More significantly, I was thrown the error that the app could not have access to the camera.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://pandamakes.me/web/20190303112856im_/https:/pandamakes.com.au/content/images/2018/01/notworkingss.png&quot; alt=&quot;notworkingss&quot;&gt;&lt;/p&gt;
&lt;p&gt;Digging for an answer online, they seem to suggest that I needed to declare the permission to use camera in android manifest (which I did), and check if other apps are using the camera (they are not, since the native camera app works fine). And very coincidentally, when the emulator told me that I had not enough (virtual) space, and when I am trying to uninstall some early iterations of the app, did I notice that I had to manually give the app permission to use the camera.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://pandamakes.me/web/20190303112856im_/https:/pandamakes.com.au/content/images/2018/01/workaround.png&quot; alt=&quot;workaround&quot;&gt;&lt;/p&gt;
&lt;p&gt;And suddenly, it works!&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://pandamakes.me/web/20190303112856im_/https:/pandamakes.com.au/content/images/2018/01/workingss.png&quot; alt=&quot;workingss&quot;&gt;&lt;/p&gt;
&lt;p&gt;Next step, messing with the Mat variables so that it can recognise border symbol.&lt;/p&gt;
&lt;p&gt;Next next step, free transform the image and integrate osra + openbabel and output mol file&lt;/p&gt;
&lt;p&gt;final step, 3d rendering of the mol file in opengl.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;And suddenly, an interruption. I was asked to modify a resource management that I created long ago with html/css/js/jquery/php/mysql. It was clear what the client wanted. I have a good idea of how I would proceed. But this meant I will need to put the android opencv project to a halt. That being said, it is a good time to give the webapp a facelift. Although it did what it supposedly did, it has a face only its mother (me) would love.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Full force on Android development and openCV</title>
		<link href="https://pandamakes.me/posts/full-force-on-android-development-and-opencv/"/>
		<updated>2016-02-29T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/full-force-on-android-development-and-opencv/</id>
		<content type="html">&lt;p&gt;Now that the other projects have came to a natural pause and/or end, I was finally able to get into the AR app for molecular visualisation. The idea is nothing new, I believe. But I don’t think anyone’s done it (yet)? Or at least I hope no one had done it yet. I wonder why?&lt;/p&gt;
&lt;p&gt;First step is to get myself familiarised again with Android development environment. It has been a while since I touched Java Development Environment (Eclipse was the program I used in the past). Some (most) came back, at least the XML part of it. I am certainly going to hope that the Java part will come back very soon, too.&lt;/p&gt;
&lt;p&gt;I am going to suspect when I start to get myself accustomed with openCV, is where learning curve will start to look like a vertical asymptote. I have looked at a few guides on youtube. Am I going to hell, if I said the accent on one of the video guide cracked me up a little bit? No evil intention, of course.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;code&gt;Cannot resolve the symbol R&lt;/code&gt;? Are you Kidding me, number five? Who do you think I am you are?&lt;br&gt;
Turns out, I was an idiot. The aforementioned error usually will not stop the compilation. I mistyped &lt;code&gt;onClick&lt;/code&gt; as &lt;code&gt;onclick&lt;/code&gt; and &lt;code&gt;theOnlyTextView&lt;/code&gt; as &lt;code&gt;theOnlyTextview&lt;/code&gt;.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Lessons Learnt in the past week (15th-22nd/Feburary)</title>
		<link href="https://pandamakes.me/posts/lessons-learnt-in-the-past-week-15th-22ndfeburary/"/>
		<updated>2016-02-22T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/lessons-learnt-in-the-past-week-15th-22ndfeburary/</id>
		<content type="html">&lt;p&gt;One of the clients wanted his site to be remade.&lt;/p&gt;
&lt;p&gt;His existing site was wildly outdated, as it was put together hastely. At the time, I was not sure if he wanted a new site or not. But he pays me, I thought I should look out for him, so I whipped up something very simple.&lt;/p&gt;
&lt;p&gt;But now, he has a clearer picture of how he wanted the website. He wanted it to be responsive, and probably incorporates a few more slide show images. I figured I might as well make it on wordpress for a faster turn-around. This is when I noticed, except for Zerif-Lite, the customisability of most of the themes are wildly underwhelming. Or perhaps, it’s just I have much more to learn about wordpress.&lt;/p&gt;
&lt;p&gt;If anyone can tell me what is the equivalent of modules in wordpress, especially on the front page, I’d be eternally grateful. Or is it that I have to hard code everything on a static front page?&lt;/p&gt;
&lt;p&gt;More worryingly, there is one or two themes, where I could not see one of the modules (fullscreen image, in bootstrap, .jumbotron), let alone customise it. Perhaps I should try to use Drupal and that would be more of my liking?&lt;/p&gt;
&lt;p&gt;Shout out to the good guys/gals who made &lt;a href=&quot;https://wordpress.org/themes/zerif-lite/&quot;&gt;Zerif-Lite&lt;/a&gt;. It is my first venture into the world of wordpress (was using Joomla and then Notepad before that). The amount of features available is incredible. And I almost feel bad bypassing the pay wall by renaming the section id’s. Kudos to them for not tying in CSS format with section id’s.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;It seems like plugins are the closest thing to modules in WordPress. I should delve into it sometime. For now, a selection of my photography life can be seen at &lt;a href=&quot;http://www.pandamakes.com.au/about&quot;&gt;here&lt;/a&gt;. (That was a shameless plug.)&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;I have had a nice dinner with a couple of good friends of mine. It seems both of them have ideas to get away from their current jobs and start something exciting.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Whilst I promised myself I will wait until the arrival of the new laptop before I would start on the Android project, I cannot help but to read up on what needs to be done. I figured I will need &lt;em&gt;OpenCV&lt;/em&gt; to recognise the optical trigger, then hopefully, do a free transform to turn the optical information to an image. Then, use &lt;em&gt;OSRA&lt;/em&gt; to turn the image into a SMILES or hopefully, directly into a MOL. If the latter cannot happen, I will need &lt;em&gt;openBabel&lt;/em&gt; to convert the SMILES into MOL. What I did not realise was MOL is already 3D capable, with x, y and z axis. The rest should be just &lt;em&gt;openGL&lt;/em&gt; to render the 3D graphics.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>New project. Short and sweet</title>
		<link href="https://pandamakes.me/posts/new-project-short-and-sweet/"/>
		<updated>2016-02-15T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/new-project-short-and-sweet/</id>
		<content type="html">&lt;p&gt;I was asked to do an shortie over the weekend. The client wanted a way to pull four random images (one from each of the four folders) into a collage.&lt;/p&gt;
&lt;p&gt;Initially I wanted to use JS and HTML, since I am already familiar with the language. But as there are no easy way to find the number of files without resorting to server side language, and the aim was to make the process as painless as possible, I decided to look into python.&lt;/p&gt;
&lt;p&gt;After a brief search, it seems I could use ReportLab to generate a PDF and pull images at the same time. There are some languages I might need to learn, but ultimately it was not too difficult. That was when, I hit my first road block.&lt;/p&gt;
&lt;p&gt;Picking up python 3.x was a bad idea.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Attempting to install reportlab to python3.x was not successful. I was confronted with a missing vcvarsall.bat error. After much digging, it seems this is likely the result of Visual C/C++ compiler incompatibility. One of the suggested fix was to use MinGW, an open sourced C/C++ compiler. I did, and it did not turn out better. I was thrown an error for “unknown compiler version error”. Frustrated I was, I decided to forgo reportlab and try to just use python image library and get the job done. PIL installer alerted to me that it could not find python 2.x, and refuse to be installed. This raised the possibility of the lack of backwards compatibility of python 2.x and python 3.x.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;So I uninstalled python 3.x and installed python 2.7. And lo and behold, not only did PIL install without a glitch, reportlab did, too.&lt;/p&gt;
&lt;p&gt;There was a small hiccup when I was trying to convert .py to .exe. Clearly, clients do not have python installed, nor do they have environmental variable PATH set as &lt;code&gt;C:/PythonXY&lt;/code&gt;. Py2exe did not work for me. But then again, I could have accidentally attempted to launch the .exe in &lt;code&gt;/build/&lt;/code&gt;. PyInstaller worked, and the single file made it much easier.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Catching up with the past wisdom 11th Feb &#39;16</title>
		<link href="https://pandamakes.me/posts/catching-up-with-the-past-wisdom-11th-feb-16/"/>
		<updated>2016-02-11T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/catching-up-with-the-past-wisdom-11th-feb-16/</id>
		<content type="html">&lt;p&gt;Continued from the previous part.&lt;/p&gt;
&lt;p&gt;Just then, I learnt, &lt;code&gt;&amp;lt;code&amp;gt;&amp;lt;/code&amp;gt;&lt;/code&gt; does not escape html tags. Instead, one must use &lt;code&gt;&amp;amp;lt;div&amp;amp;gt;&lt;/code&gt;. (In fact, the exercise of typing the last line is more fun indeed.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;edit 2018-1-7: now that I have migrated to &lt;em&gt;ghost&lt;/em&gt;, backticks escapes special characters.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;But I digress. Continuing on from the last part.&lt;/p&gt;
&lt;p&gt;29thJan16, Here’s what I wrote:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Problems as soon as I loaded xampp and loaded the font page. Flex box is broken. After much trouble shooting, it seems &lt;code&gt;flex-basis&lt;/code&gt; is not exactly the same as &lt;code&gt;width&lt;/code&gt;. The problem is that without setting &lt;code&gt;width&lt;/code&gt; (or perhaps &lt;code&gt;max-width&lt;/code&gt;), the browser automatically sets the width to be 2000px, thus stretching out the entire div. (original design had 3 child-divs in a parent div).&lt;/li&gt;
&lt;li&gt;Second problem: I changed the PHP file, and now, the update and delete button in virtuemart cart no longer works.&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Firstly, I stumbled across this thread: &lt;a href=&quot;http://forum.virtuemart.net/index.php?topic=111410.0&quot;&gt;VM Forum&lt;/a&gt;, and the solution (try a different theme) works. This narrowed the problem. So I was sure it was one of the modification I did to the PHP that ruined it. The problem is, I made so many modifications, and every one of them seems plausible. and I was not willing to undo my hours of work.Then, when I was comparing the directory and file differences between the theme that works and the one that does not work, I found this line of code:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a class=&quot;vmicon vm2-remove_from_cart&quot; title=&quot;&gt;?php echo JText::_ (&#39;COM_VIRTUEMART_CART_DELETE&#39;) ?&gt;&quot; align=&quot;middle&quot; href=&quot;https://pandamakes.me/posts/catching-up-with-the-past-wisdom-11th-feb-16/%3E&quot;&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;which led me to &lt;code&gt;joomla/components/com_virtuemart/assets/js/dynupdate.js&lt;/code&gt;, which was included in the header. I felt at the time, on line 165 was the key, as it described a function &lt;code&gt;Virtuemart.updDynFormListener&lt;/code&gt;. I inserted a &lt;code&gt;console.log&lt;/code&gt; to try to catch the activation of the codes, and it seems for the theme that works, it is triggered twice and for one that does not work, it is triggered once.&lt;br&gt;
And so, the mystery continues. Checked the source codes for the theme that worked and theme that does not work, they are identical.&lt;br&gt;
Ok, false alarm, the &lt;code&gt;find(&#39;[*data-dynamic-update=&amp;quot;1&amp;quot;]&#39;)&lt;/code&gt; finds only 2 items, the checkout button and the shipping/billing address button. This is why on the one that works, it triggers twice.&lt;br&gt;
at long last, &lt;code&gt;vmsite.js&lt;/code&gt;, let’s hope it’s not another false alarm.&lt;br&gt;
hmm… bizarre. The console.log seems to trigger on page load…&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Ok, I am an idiot… When I was changing the PHP codes around, I moved the &lt;code&gt;&amp;lt;form&amp;gt;&lt;/code&gt; to AFTER the update/delete button. So the update/delete buttons. I could only imagine the event listener was attached via the &lt;code&gt;&amp;lt;form&amp;gt;&lt;/code&gt; tag. I moved it to a better place, and it is working as intended.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1stFeb16, played around with Akeeba. Successfully moved the site from localhost to its new home online. This can allow my client to see the final product. Somehow forgot the username and password for the old MySql database. After several unsuccessful attempts, I decided to create a new one. The old db had nothing in it. I should drop it when I get a chance.&lt;/li&gt;
&lt;/ul&gt;
</content>
	</entry>
	
	<entry>
		<title>11th Feburary, 2016, wisdom from the past week (In this case, in the past month)</title>
		<link href="https://pandamakes.me/posts/11th-feburary-2016-wisdom-from-the-past-week-in-this-case-in-the-past-month/"/>
		<updated>2016-02-11T00:00:00Z</updated>
		<id>https://pandamakes.me/posts/11th-feburary-2016-wisdom-from-the-past-week-in-this-case-in-the-past-month/</id>
		<content type="html">&lt;p&gt;I am an aspiring web designer, web developer and photographer. Building up a plethora of tools is not easy. I am hoping to record down the bits and pieces of wisdom I have learnt during my journey. Hopefully, it can help someone out.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;(I really hoped I did not have to start with this one.) You cannot spell therapist without rapist.&lt;/li&gt;
&lt;li&gt;In JQuery, one can apply &lt;code&gt;$()&lt;/code&gt; selector to select multiple levels of children, but &lt;code&gt;.children()&lt;/code&gt; selector only affects a single level. - Corollary: in order to select an element with a specific set of classes (e.g. &lt;code&gt;&amp;lt;div class=&amp;quot;pickme imtherealone&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;div class=&amp;quot;pickme&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;br&gt;
), remove the spaces (e.g. use &lt;code&gt;$(&#39;.pickme.imtherealone&#39;)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;bootstrap looks easy and useful - I have since went through bootstrap and put it to some good use. Still need more practice&lt;/li&gt;
&lt;li&gt;When customising the a module in Joomla in css, always use element.classname or element.id. For example, the ul element is typically used for menu’s. (This should have been in HTML/CSS 101. But still made the mistake.)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;box-sizing:border-box&lt;/code&gt; is an amazing way to define div sizes.&lt;/li&gt;
&lt;li&gt;In JS or JQuery, always quotation marks for properties. For example, use &lt;code&gt;.css(&#39;border-width&#39;,&#39;24px&#39;)&lt;/code&gt; rather than &lt;code&gt;.css(border-width,24px)&lt;/code&gt;. Again, this should have been HTML/JS 101. - One exception to this rule is if the value is a number, say &lt;code&gt;variable = 1024&lt;/code&gt;, then one need not quote the number. Otherwise, it will be considered as a string. (More rant on JS treatment of variables later)&lt;/li&gt;
&lt;li&gt;In order to modify any of the modules, first create an override of the corresponding module (&lt;code&gt;Extension -&amp;gt;Templates&lt;/code&gt; …&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://pandamakes.me/web/20190303113003im_/https:/pandamakes.com.au/content/images/2018/01/joomla.jpg&quot; alt=&quot;joomla&quot;&gt;&lt;/p&gt;
&lt;p&gt;Click on the template you are using …&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://pandamakes.me/web/20190303113003im_/https:/pandamakes.com.au/content/images/2018/01/joomla2.jpg&quot; alt=&quot;joomla2&quot;&gt;&lt;/p&gt;
&lt;p&gt;Then click “Create Override” and find the module or component or layout you want to override…&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://pandamakes.me/web/20190303113003im_/https:/pandamakes.com.au/content/images/2018/01/joomla3.jpg&quot; alt=&quot;joomla3&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;To find out which component (NOT modules… modules should be self-explanatory) you need to override, go to manage menu&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://pandamakes.me/web/20190303113003im_/https:/pandamakes.com.au/content/images/2018/01/joomla4.jpg&quot; alt=&quot;joomla4&quot;&gt;&lt;/p&gt;
&lt;p&gt;and find the page you want to modify, and check the path underneath it&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://pandamakes.me/web/20190303113003im_/https:/pandamakes.com.au/content/images/2018/01/joomla5.jpg&quot; alt=&quot;joomla5&quot;&gt;&lt;/p&gt;
&lt;p&gt;In this case, in order to customise the page after clicking “blog” button from the main menu, I will need to find the component folder called com_articles, and create an override for the item Category Blog.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Override creates a file that you can play with, and change the behaviour of the final page. To access the file, which you can tinker with, go to Extension -&amp;gt; Template -&amp;gt; select your template (as before), Then, hit Editor -&amp;gt; html -&amp;gt; find the component/module you are interested in tinkering.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://pandamakes.me/web/20190303113003im_/https:/pandamakes.com.au/content/images/2018/01/joomla6.jpg&quot; alt=&quot;joomla6&quot;&gt;&lt;/p&gt;
</content>
	</entry>
</feed>
