<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>More OpenCV p2</title>
    <meta name="Description" content="web developer, photographer, panda">
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="pandamakes">
    <link rel="stylesheet" href="/css/materialize.css">
    <link rel="stylesheet" href="/css/github-markdown.css">
    <link rel="stylesheet" href="/css/coverimage.css">
	  <link rel="me" href="https://fosstodon.org/@pandamakes">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
  </head>
  <body class="d-flex flex-column">
    <header class="flex-basis-0 flex-grow-0">

    <nav>
      <div class="nav-wrapper col s12">

        <!-- logo -->
        <a href="/" class="h-100 brand-logo">
          <div class="h-100 valign-wrapper ">
            <img class="h-100 p-1" src="/img/logo.svg">
            <span>
              pandamakes
            </span>
          </div>
        </a>

        <a href="#" data-target="mobile-menu" class="sidenav-trigger">
          <i class="fas fa-bars"></i>
        </a>

        <ul class="right hide-on-med-and-down"><li class="nav-item"><a href="/">Home</a></li>
<li class="nav-item"><a href="/blog/">Blog</a></li>
<li class="nav-item"><a href="/about/">About</a></li></ul>
      </div>
    </nav>

  <!-- mobile sidenav -->
  <ul class="sidenav" id="mobile-menu">
  
  
    <li class="nav-item">
      <a href="/">
        Home
      </a>
    </li>
  
  
  
    <li class="nav-item">
      <a href="/blog/">
        Blog
      </a>
    </li>
  
  
  
    <li class="nav-item">
      <a href="/about/">
        About
      </a>
    </li>
  
  
  </ul>

</header>

    <main class="flex-basis-0 flex-grow-1" >

      <div data-bgimgsrc="/img/cover.jpg" class="banner-image-wrapper w-100 h-100vh overflow-hidden d-flex align-items-center justify-content-center">
  <div>
    <h1 class="center-align">
      More OpenCV p2
    </h1>

    
  </div>
</div>

<div class="row"></div>
      <div class="container">
        

<div class="row">
	<div class="col s12"
		<time datetime="2016-03-28">28 March 2016</time>
	</div>
	
  	
<div class="col s12">
  <div class="d-flex flex-wrap">

    
    <span class="mt-a mb-a"> tags: </span>
    

    
    <span data-href="/tags/android programming/" class="waves-effect chip m-1">android programming</span>
    <span data-href="/tags/java/" class="waves-effect chip m-1">java</span>
    <span data-href="/tags/lessons learnt the hard way/" class="waves-effect chip m-1">lessons learnt the hard way</span>
    <span data-href="/tags/opencv/" class="waves-effect chip m-1">opencv</span>
  </div>
</div>



</div>


<div class="row">
  <div class="col s12 markdown-body">
  <p>More struggling with OpenCV this week. I will have to remember. Computer start counting at 0, not 1.</p>
<p>Bizarre behaviours of hierarchy in findContours. even though <code>hierarchy.size()</code> show 32×1, for eg, but it is really 1×32. In fact, when you access hierarchy matrix elements, you gain access to an array of doubles, even though they are suppose to be pointers to elements in the contour identifying as next sibling, previous sibling, parent or child.</p>
<p>After much struggle, it seems I had to use <code>Imgproc.RETR_TREE</code> rather than <code>Imgproc.RETR_COMPP</code>. Wasted a good two days. Well, at least now I can reliably detect the desired edges.</p>
<p>So I quickly move to the next phase, installing the optical recognition library necessary. Filled in the necessary info, only to realise that I downloaded v1.0. Does not appear to have v2.0 in java, only in c. Oh, jokes on me.</p>
<p>OpenCV 3.0: <code>perspectiveTransoform()</code> is in <code>Core</code>, and yet <code>wrapPerspective()</code> and <code>getPerspectiveTransform()</code> is in <code>Imgproc</code>? How does this even make sense?<br>
Ok, ok, it’s not image processing. Woe is me, I guess.</p>
<p>Now, why… Where are there two different MatofPoints datatypes in OpenCV? There is MatofPoints, used for drawing contours, and then, there’s the MatofPoints2f (more if you go 3f, etc) if you want to approximate fit a polygon. Conversion is clumsy. One have to use <code>MatofPoints.convertTo(outputMatofPoints2f, CvType.CV_32FC2)</code> and vice versa (swapping 32FC2 to 32S) for conversion. Somewhat headachy. But at least this part is done.</p>

  </div>
</div>
<ul class="links-nextprev"><li>Previous: <a href="/posts/more-on-opencv/">More on OpenCV + trends in web development</a></li><li>Next: <a href="/posts/more-opencv-p3/">More OpenCV p3</a></li>
</ul>

      </div>
    </main>

    <footer class="page-footer flex-basis-0 flex-grow-0">

  <div class="container">
    <div class="row">
      <div class="col s12">

        <a class="btn-flat" href="https://github.com/xgui3783">
          <i class="fab fa-github"></i>
          <span>
            xgui3783
          </span>
        </a>

        <a href="https://fosstodon.org/@pandamakes" class="btn-flat">
          <i class="fab fa-mastodon"></i>
          <span>
            @pandamakes@fosstodon.org
          </span>
        </a>
      </div>
    </div>
  </div>
  
  <div class="footer-copyright">
    <div class="container">
    © 2024 Copyright pandamakes
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {

      /* required for SideBar mobile */
      const elems = document.querySelectorAll('.sidenav')
      const instances = M.Sidenav.init(elems)

      /* required to overcome nested anchor links */
      const divHrefs = document.querySelectorAll('[data-href]')
      for (const divHref of divHrefs ){
        divHref.addEventListener('click', ev => {
          window.open(divHref.dataset.href, '_self')
          ev.stopPropagation()
        })
      }
    })
  </script>

</footer>
    <!-- Current page: /posts/more-opencv-p2/ -->
  </body>
</html>
