<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>More detour. Some Node.js</title>
    <meta name="Description" content="web developer, photographer, panda">
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/prism-base16-monokai.dark.css">
    <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="pandamakes">
    <link rel="stylesheet" href="/css/materialize.css">
    <link rel="stylesheet" href="/css/github-markdown.css">
    <link rel="stylesheet" href="/css/coverimage.css">
	  <link rel="me" href="https://fosstodon.org/@pandamakes">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
  </head>
  <body class="d-flex flex-column">
    <header class="flex-basis-0 flex-grow-0">

    <nav>
      <div class="nav-wrapper col s12">

        <!-- logo -->
        <a href="/" class="h-100 brand-logo">
          <div class="h-100 valign-wrapper ">
            <img class="h-100 p-1" src="/img/logo.svg">
            <span>
              pandamakes
            </span>
          </div>
        </a>

        <a href="#" data-target="mobile-menu" class="sidenav-trigger">
          <i class="fas fa-bars"></i>
        </a>

        <ul class="right hide-on-med-and-down"><li class="nav-item"><a href="/">Home</a></li>
<li class="nav-item"><a href="/blog/">Blog</a></li>
<li class="nav-item"><a href="/about/">About</a></li></ul>
      </div>
    </nav>

  <!-- mobile sidenav -->
  <ul class="sidenav" id="mobile-menu">
  
  
    <li class="nav-item">
      <a href="/">
        Home
      </a>
    </li>
  
  
  
    <li class="nav-item">
      <a href="/blog/">
        Blog
      </a>
    </li>
  
  
  
    <li class="nav-item">
      <a href="/about/">
        About
      </a>
    </li>
  
  
  </ul>

</header>

    <main class="flex-basis-0 flex-grow-1" >

      <div data-bgimgsrc="/img/cover.jpg" class="banner-image-wrapper w-100 h-100vh overflow-hidden d-flex align-items-center justify-content-center">
  <div>
    <h1 class="center-align">
      More detour. Some Node.js
    </h1>

    
  </div>
</div>

<div class="row"></div>
      <div class="container">
        

<div class="row">
	<div class="col s12"
		<time datetime="2016-04-25">25 April 2016</time>
	</div>
	
  	
<div class="col s12">
  <div class="d-flex flex-wrap">

    
    <span class="mt-a mb-a"> tags: </span>
    

    
    <span data-href="/tags/css/" class="waves-effect chip m-1">css</span>
    <span data-href="/tags/html/" class="waves-effect chip m-1">html</span>
    <span data-href="/tags/javascript/" class="waves-effect chip m-1">javascript</span>
    <span data-href="/tags/jquery/" class="waves-effect chip m-1">jquery</span>
    <span data-href="/tags/lessons learnt the hard way/" class="waves-effect chip m-1">lessons learnt the hard way</span>
    <span data-href="/tags/node.js/" class="waves-effect chip m-1">node.js</span>
  </div>
</div>



</div>


<div class="row">
  <div class="col s12 markdown-body">
  <p>The timetable app is in shambles.</p>
<p>Let me talk a little about the background of the timetable app. It first started as a visual basic/excel app. Very quickly, it became obvious that the slowness was just not going to cut The lack of portability (master file needed), the lack of customisation (prettiness) and the clunkiness of the excel/VB app just does not cut it. So some time Sep ’15, I pitched to my client of a web based timetable app. I built a prototype, and started working on the actual web app. Turned out, I learnt PHP and MySQL building the webapp, which I am eternally grateful. However, the app is showing its age. the codes are ugly, the site is slow, and full of bugs. It’s time to retire the site and make a new one.</p>
<p>This time, I am planning to use <em>bootstrap</em> for the layout, <em>node.js</em> for real time update on the database and <em>angular js</em> for binding the front end. I believe <em>Ruby on rails</em> would do similar thing as node.js. I was just lazy, and didn’t want to learn ruby unless absolutely necessary.</p>
<p>node.js quirk #1:</p>
<p>app.get('/', function (req,res){
res.sendFile('index.html');
});</p>
<p>returns an error:</p>
<p>TypeError: res.sendFile is not a function</p>
<p>So I was scratching my head, trying to identify the error, until I saw <a href="http://stackoverflow.com/questions/28787518/undefined-error-while-trying-to-route-to-client-folder-using-express">link</a>, which is in contrary to other <a href="http://stackoverflow.com/questions/26202150/express-js-error-express-deprecated-res-sendfile-use-res-sendfile-instead">SO answers</a> and the <a href="http://www.tutorialspoint.com/nodejs/nodejs_express_framework.htm">example</a>.</p>
<p>More quirk on node.js and socket.io. So I was testing the server client connection using socket.io, following the example <a href="http://socket.io/get-started/chat/">here</a>. But I thought I’d add my own little flavour, namely instead of</p>
<p>socket.emit('chat message','foo')</p>
<p>I would use</p>
<p>socket.emit('ping','foo')</p>
<p>Whilst the <code>io.on(‘connection’,’foo’)</code> fired correctly, the <code>socket.emit(‘ping’,’foo’)</code> refuse to fire. I double/triple checked the spelling, and there does not seem to be any typos present. And suddenly, a flicker of brilliance, I though to myself, ping is a common connection term, maybe it’s reserved for special functions, like ‘connection’, and lo and behold, changing <code>ping</code> to <code>ping pong</code> solved my issue.</p>
<p>ONWARDS, COMRADES! I am stoked.</p>
<p>More Node.js quirks. I installed mysql via npm, for record control. But somehow, I was not able to connect according to the <a href="https://www.npmjs.com/package/mysql">documented method</a>. What happened was, I was thrown the error</p>
<p>Error: getaddrinfo ENOTFOUND</p>
<p>Before anyone asks, I have restarted my node.js server, and made sure the xampp mysql server is up, at the right (3306) port. Well, either way, when I came back home, it worked. So who knows what happened. It’s likely that I did not have an internet connection, though all of the dependencies are installed locally, so I couldn’t see if there is anything else I needed.</p>
<p>More quirkiness with jquery this time around.</p>
<p>//$('#'+i.hashed_id).remove(); //does not work
$('div').remove('#'+i.hashed_id); //works</p>
<p>What’s the deal?</p>

  </div>
</div>
<ul class="links-nextprev"><li>Previous: <a href="/posts/detour-refocus/">Detour, refocus</a></li><li>Next: <a href="/posts/bizarre-behaviour-of-js/">Bizarre behaviour of JS + JS quirkiness.</a></li>
</ul>

      </div>
    </main>

    <footer class="page-footer flex-basis-0 flex-grow-0">

  <div class="container">
    <div class="row">
      <div class="col s12">

        <a class="btn-flat" href="https://github.com/xgui3783">
          <i class="fab fa-github"></i>
          <span>
            xgui3783
          </span>
        </a>

        <a href="https://fosstodon.org/@pandamakes" class="btn-flat">
          <i class="fab fa-mastodon"></i>
          <span>
            @pandamakes@fosstodon.org
          </span>
        </a>
      </div>
    </div>
  </div>
  
  <div class="footer-copyright">
    <div class="container">
    © 2024 Copyright pandamakes
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {

      /* required for SideBar mobile */
      const elems = document.querySelectorAll('.sidenav')
      const instances = M.Sidenav.init(elems)

      /* required to overcome nested anchor links */
      const divHrefs = document.querySelectorAll('[data-href]')
      for (const divHref of divHrefs ){
        divHref.addEventListener('click', ev => {
          window.open(divHref.dataset.href, '_self')
          ev.stopPropagation()
        })
      }
    })
  </script>

</footer>
    <!-- Current page: /posts/more-detour-some-node-js/ -->
  </body>
</html>
